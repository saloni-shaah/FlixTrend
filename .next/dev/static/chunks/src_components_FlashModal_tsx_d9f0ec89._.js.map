{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/FlashModal.tsx"],"sourcesContent":["\n\n\"use client\";\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { FlixTrendLogo } from './FlixTrendLogo';\nimport AdBanner from './AdBanner';\nimport { X, Send, Smile } from 'lucide-react';\nimport { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';\nimport { auth, app } from '@/utils/firebaseClient';\nimport { useAppState } from '@/utils/AppStateContext';\n\nconst db = getFirestore(app);\n\nconst Watermark = ({ isAnimated = false }: { isAnimated?: boolean }) => (\n    <div\n      className={`absolute flex items-center gap-1.5 bg-black/40 text-white py-1 px-2 rounded-full text-xs pointer-events-none z-10 ${\n        isAnimated ? 'animate-[float-watermark_10s_ease-in-out_infinite]' : 'bottom-2 right-2'\n      }`}\n    >\n        <FlixTrendLogo size={16} />\n        <span className=\"font-bold\">FlixTrend</span>\n    </div>\n);\n\nfunction AdView({ onSkip }: { onSkip: () => void }) {\n    const [countdown, setCountdown] = useState(5);\n\n    useEffect(() => {\n        if (countdown <= 0) return;\n        const timer = setTimeout(() => setCountdown(c => c - 1), 1000);\n        return () => clearTimeout(timer);\n    }, [countdown]);\n    \n    return (\n        <div className=\"w-full h-full bg-black flex flex-col items-center justify-center relative\">\n            <div className=\"absolute top-4 right-4 z-10\">\n                {countdown > 0 ? (\n                    <span className=\"text-white bg-black/50 rounded-full px-3 py-1 text-sm\">Skip in {countdown}</span>\n                ) : (\n                    <button onClick={onSkip} className=\"text-white bg-black/50 rounded-full px-4 py-2 text-sm flex items-center gap-2\">\n                        Skip Ad <X size={16} />\n                    </button>\n                )}\n            </div>\n            <div className=\"w-full max-w-sm\">\n                <AdBanner />\n            </div>\n             <p className=\"text-xs text-gray-500 absolute bottom-4\">This is a sponsored message.</p>\n        </div>\n    )\n}\n\nfunction FlashInteraction({ flash, currentUser, onClose }: { flash: any; currentUser: any; onClose: () => void }) {\n    const [message, setMessage] = useState('');\n    const emojis = ['â¤ï¸', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ”¥', 'ðŸ‘'];\n\n    const getChatId = (uid1: string, uid2: string) => [uid1, uid2].sort().join(\"_\");\n\n    const handleSend = async (text: string) => {\n        if (!text.trim() || !currentUser || !flash) return;\n        \n        const chatId = getChatId(currentUser.uid, flash.userId);\n        await addDoc(collection(db, \"chats\", chatId, \"messages\"), {\n            text: text,\n            sender: currentUser.uid,\n            createdAt: serverTimestamp(),\n            type: 'flash_reply',\n            readBy: [currentUser.uid],\n            flash_preview: {\n                mediaUrl: flash.mediaUrl,\n                caption: flash.caption || '',\n            }\n        });\n        // Potentially close the modal or show a \"Sent!\" confirmation\n        onClose(); \n    };\n\n    return (\n        <div className=\"absolute bottom-4 left-4 right-4 z-20 flex items-center gap-2\" onClick={e => e.stopPropagation()}>\n            <input \n                type=\"text\"\n                value={message}\n                onChange={e => setMessage(e.target.value)}\n                placeholder=\"Send a message...\"\n                className=\"input-glass flex-1 text-sm\"\n                onKeyDown={(e) => {\n                    if (e.key === 'Enter' && message.trim()) {\n                        handleSend(message);\n                    }\n                }}\n            />\n            <button \n                onClick={() => handleSend(message)}\n                disabled={!message.trim()}\n                className=\"p-3 rounded-full bg-accent-cyan text-black disabled:bg-gray-600\"\n            >\n                <Send size={16} />\n            </button>\n            <div className=\"flex gap-1\">\n                {emojis.map(emoji => (\n                    <button \n                        key={emoji} \n                        className=\"text-2xl hover:scale-125 transition-transform\"\n                        onClick={() => handleSend(emoji)}\n                    >\n                        {emoji}\n                    </button>\n                ))}\n            </div>\n        </div>\n    );\n}\n\nexport default function FlashModal({ userFlashes, onClose }: { userFlashes: any; onClose: (viewedUserId?: string) => void }) {\n  const [currentUserFlashesIndex, setCurrentUserFlashesIndex] = useState(0);\n  const [currentFlashIndex, setCurrentFlashIndex] = useState(0);\n  const [viewedCount, setViewedCount] = useState(0);\n  const [showAd, setShowAd] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n  const touchStartX = useRef(0);\n  const { setSelectedChat } = useAppState();\n  const currentUser = auth.currentUser;\n\n  const AD_INTERVAL = 9;\n\n  const allFlashes = Array.isArray(userFlashes) ? userFlashes : [userFlashes];\n\n  const handleClose = () => {\n    onClose(allFlashes[currentUserFlashesIndex]?.userId);\n  };\n\n  const goToNext = useCallback(() => {\n    // Check for ad break first\n    if ((viewedCount + 1) % AD_INTERVAL === 0 && viewedCount > 0) {\n        setShowAd(true);\n        setViewedCount(0); // Reset counter after ad\n        return;\n    }\n    setViewedCount(v => v + 1);\n\n    // Progression logic\n    const currentUserFlashGroup = allFlashes[currentUserFlashesIndex];\n    if (currentFlashIndex < currentUserFlashGroup.flashes.length - 1) {\n        setCurrentFlashIndex(i => i + 1);\n    } else {\n        if (currentUserFlashesIndex < allFlashes.length - 1) {\n            setCurrentUserFlashesIndex(i => i + 1);\n            setCurrentFlashIndex(0);\n        } else {\n            handleClose(); // End of all flashes\n        }\n    }\n  }, [allFlashes, currentFlashIndex, currentUserFlashesIndex, handleClose, viewedCount, AD_INTERVAL]);\n\n  const goToPrev = useCallback(() => {\n    if (currentFlashIndex > 0) {\n        setCurrentFlashIndex(i => i - 1);\n    } else if (currentUserFlashesIndex > 0) {\n        const prevUserIndex = currentUserFlashesIndex - 1;\n        setCurrentUserFlashesIndex(prevUserIndex);\n        setCurrentFlashIndex(allFlashes[prevUserIndex].flashes.length - 1);\n    }\n  }, [allFlashes, currentFlashIndex, currentUserFlashesIndex]);\n\n  useEffect(() => {\n    if (showAd) {\n      if (timerRef.current) clearTimeout(timerRef.current);\n      if (audioRef.current) audioRef.current.pause();\n      return;\n    }\n\n    const flash = allFlashes[currentUserFlashesIndex]?.flashes[currentFlashIndex];\n    if (!flash) return;\n\n    const isVideo = flash.mediaUrl && (flash.mediaUrl.includes('.mp4') || flash.mediaUrl.includes('.webm') || flash.mediaUrl.includes('.ogg'));\n    setProgress(0);\n\n    if (timerRef.current) clearTimeout(timerRef.current);\n    if (audioRef.current) {\n        audioRef.current.pause();\n        audioRef.current = null;\n    }\n\n    if (flash.song?.preview_url) {\n        const audio = new Audio(flash.song.preview_url);\n        audioRef.current = audio;\n        audio.currentTime = flash.song.snippetStart || 0;\n        audio.play().catch(e => console.error(\"Audio play failed\", e));\n        audio.addEventListener('ended', goToNext);\n    }\n\n    if (!isVideo) {\n        timerRef.current = setTimeout(goToNext, 15000);\n        requestAnimationFrame(() => {\n            setProgress(100);\n        });\n    } else {\n        setProgress(0);\n    }\n\n    return () => {\n        if (timerRef.current) clearTimeout(timerRef.current);\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current.removeEventListener('ended', goToNext);\n        }\n    };\n  }, [currentUserFlashesIndex, currentFlashIndex, allFlashes, goToNext, showAd]);\n  \n  useEffect(() => {\n      const handleKeyDown = (e: KeyboardEvent) => {\n          if (showAd) return;\n          if (e.key === 'ArrowRight') goToNext();\n          if (e.key === 'ArrowLeft') goToPrev();\n      };\n      window.addEventListener('keydown', handleKeyDown);\n      return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [goToNext, goToPrev, showAd]);\n\n  const handleContainerClick = (e: React.MouseEvent) => {\n      if (showAd) return;\n      const { clientX, currentTarget } = e;\n      const { left, width } = currentTarget.getBoundingClientRect();\n      const clickPosition = clientX - left;\n      if (clickPosition < width / 3) {\n          goToPrev();\n      } else {\n          goToNext();\n      }\n  };\n\n  const handleTouchStart = (e: React.TouchEvent) => {\n    if (showAd) return;\n    touchStartX.current = e.touches[0].clientX;\n  };\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    if (showAd) return;\n    const touchEndX = e.changedTouches[0].clientX;\n    const deltaX = touchEndX - touchStartX.current;\n    if (Math.abs(deltaX) > 50) {\n      if (deltaX < 0) goToNext();\n      else goToPrev();\n    }\n  };\n\n  const handleVideoTimeUpdate = () => {\n    if (videoRef.current && videoRef.current.duration) {\n      setProgress((videoRef.current.currentTime / videoRef.current.duration) * 100);\n    }\n  };\n  const handleVideoEnded = () => {\n      goToNext();\n  };\n\n  const handleAdSkip = () => {\n      setShowAd(false);\n      // Immediately go to the next flash without incrementing viewedCount again\n      const currentUserFlashGroup = allFlashes[currentUserFlashesIndex];\n      if (currentFlashIndex < currentUserFlashGroup.flashes.length - 1) {\n          setCurrentFlashIndex(i => i + 1);\n      } else {\n          if (currentUserFlashesIndex < allFlashes.length - 1) {\n              setCurrentUserFlashesIndex(i => i + 1);\n              setCurrentFlashIndex(0);\n          } else {\n              handleClose();\n          }\n      }\n  }\n  \n  if (showAd) {\n      return (\n          <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90\">\n             <div className=\"relative w-full max-w-lg h-[90vh] flex flex-col items-center justify-center\">\n                <AdView onSkip={handleAdSkip} />\n             </div>\n          </div>\n      )\n  }\n\n  const currentFlashUser = allFlashes[currentUserFlashesIndex];\n  if (!currentFlashUser) return null;\n  const currentFlash = currentFlashUser.flashes[currentFlashIndex];\n  if (!currentFlash) return null;\n\n  const isVideo = currentFlash.mediaUrl && (currentFlash.mediaUrl.includes('.mp4') || currentFlash.mediaUrl.includes('.webm') || currentFlash.mediaUrl.includes('.ogg'));\n  const duration = isVideo ? (videoRef.current?.duration || 15) : 15;\n\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/90\" onTouchStart={handleTouchStart} onTouchEnd={handleTouchEnd}>\n      <div className=\"relative w-full max-w-lg h-[90vh] flex flex-col items-center justify-center cursor-pointer\" onClick={handleContainerClick}>\n        <button onClick={(e) => { e.stopPropagation(); handleClose();}} className=\"absolute top-2 right-2 text-white text-3xl z-20\">&times;</button>\n        {/* Progress Bars */}\n        <div className=\"absolute top-4 left-2 right-2 flex gap-1 z-20\">\n            {currentFlashUser.flashes.map((_:any, idx:number) => (\n                <div key={idx} className=\"flex-1 h-1 bg-white/30 rounded-full overflow-hidden\">\n                    <div \n                        className=\"h-full bg-white rounded-full\"\n                        style={{\n                            width: `${idx < currentFlashIndex ? 100 : idx === currentFlashIndex ? progress : 0}%`,\n                            transition: idx === currentFlashIndex && !isVideo ? `width ${duration}s linear` : 'none',\n                        }}\n                    />\n                </div>\n            ))}\n        </div>\n        \n        <div className=\"w-full h-full relative\">\n            {isVideo ? (\n                <div className=\"relative w-full h-full\">\n                    <video\n                        ref={videoRef}\n                        src={currentFlash.mediaUrl}\n                        className=\"w-full h-full object-contain\"\n                        autoPlay\n                        onTimeUpdate={handleVideoTimeUpdate}\n                        onEnded={handleVideoEnded}\n                    />\n                    <Watermark isAnimated={true} />\n                </div>\n            ) : (\n                <div className=\"relative w-full h-full\">\n                    {currentFlash.mediaUrl && <img src={currentFlash.mediaUrl} alt=\"flash\" className=\"w-full h-full object-contain\" />}\n                    <Watermark />\n                </div>\n            )}\n        </div>\n\n        {currentFlash.caption && (\n          <div className=\"absolute bottom-20 left-4 right-4 text-white text-center font-semibold p-2 bg-black/50 rounded-lg\">\n            {currentFlash.caption}\n          </div>\n        )}\n\n        <FlashInteraction flash={currentFlash} currentUser={currentUser} onClose={handleClose} />\n      </div>\n    </div>\n  );\n}\n\n    "],"names":[],"mappings":"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"}}]
}