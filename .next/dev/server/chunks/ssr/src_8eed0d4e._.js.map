{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/signal/ChatLobby.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport { MessageSquare } from 'lucide-react';\n\nexport function ChatLobby() {\n    return (\n        <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ duration: 0.5, ease: \"easeOut\" }}\n            className=\"text-center text-gray-500\"\n        >\n            <MessageSquare className=\"mx-auto mb-4 text-gray-600\" size={64} strokeWidth={1} />\n            <h2 className=\"text-xl font-bold text-gray-300\">Welcome to Signal</h2>\n            <p>Select a chat from the left to start a conversation.</p>\n        </motion.div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AAJA;;;;AAMO,SAAS;IACZ,qBACI,8OAAC,oMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,OAAO;QAAI;QAClC,SAAS;YAAE,SAAS;YAAG,OAAO;QAAE;QAChC,YAAY;YAAE,UAAU;YAAK,MAAM;QAAU;QAC7C,WAAU;;0BAEV,8OAAC,yOAAa;gBAAC,WAAU;gBAA6B,MAAM;gBAAI,aAAa;;;;;;0BAC7E,8OAAC;gBAAG,WAAU;0BAAkC;;;;;;0BAChD,8OAAC;0BAAE;;;;;;;;;;;;AAGf"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/signal/page.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport Link from 'next/link';\nimport { getFirestore, collection, query, onSnapshot, orderBy, doc, getDoc, setDoc, addDoc, serverTimestamp, where, writeBatch, getDocs, updateDoc, deleteField, limit } from \"firebase/firestore\";\nimport { auth, app } from \"@/utils/firebaseClient\";\nimport { Users, Bot, Search, CheckSquare, Square, Trash2, X, PlusCircle } from \"lucide-react\";\nimport { useAppState } from \"@/utils/AppStateContext\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\nimport { ChatLobby } from \"@/components/signal/ChatLobby\";\n\nconst db = getFirestore(app);\n\nconst useLongPress = (callback = () => {}, ms = 300) => {\n    const timerRef = useRef<NodeJS.Timeout>();\n    const onTouchStart = () => { timerRef.current = setTimeout(callback, ms); };\n    const onTouchEnd = () => { if (timerRef.current) clearTimeout(timerRef.current); };\n    return { \n        onTouchStart, \n        onTouchEnd, \n        onMouseDown: onTouchStart, \n        onMouseUp: onTouchEnd, \n        onMouseLeave: onTouchEnd \n    };\n};\n\nconst ChatItem = React.memo(({ chat, selectionMode, isSelected, onLongPress, onClick, drafts }: any) => {\n    const getInitials = (user: any) => user?.name?.[0] || user?.username?.[0] || \"U\";\n    const longPressProps = useLongPress(onLongPress);\n\n    return (\n        <div \n            {...longPressProps}\n            className={cn(\"w-full flex items-center gap-4 px-4 py-3 text-left transition-colors duration-200 group relative\", isSelected ? \"bg-accent-cyan/30\" : \"hover:bg-accent-cyan/10\", \"cursor-pointer\")} \n            onClick={onClick}\n        >\n            {selectionMode === 'chats' && (\n                <div className=\"absolute left-2 top-1/2 -translate-y-1/2\">\n                    {isSelected ? <CheckSquare className=\"text-accent-cyan\"/> : <Square className=\"text-gray-500\"/>}\n                </div>\n            )}\n            <div className={cn(\"relative w-12 h-12 rounded-full bg-gradient-to-tr from-accent-pink to-accent-cyan flex items-center justify-center text-white font-bold text-xl overflow-hidden shrink-0\", selectionMode === 'chats' && \"ml-8\")}>\n                {chat.isGroup ? \n                    (chat.avatar_url ? <img src={chat.avatar_url} alt={chat.name} className=\"w-full h-full object-cover\"/> : <Users/>) :\n                    (chat.avatar_url ? <img src={chat.avatar_url} alt=\"avatar\" className=\"w-full h-full object-cover\"/> : getInitials(chat))\n                }\n                 {chat.unreadCount > 0 && (\n                    <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-accent-pink rounded-full flex items-center justify-center text-white text-[10px] font-bold border-2 border-background\">\n                        {chat.unreadCount > 9 ? '9+' : chat.unreadCount}\n                    </div>\n                )}\n            </div>\n            <div className=\"flex-1 overflow-hidden\">\n                <span className=\"font-bold text-white block truncate\">{chat.name || chat.username}</span>\n                <span className=\"text-xs text-gray-400 block truncate italic\">\n                    {drafts[chat.id] ? <span className=\"text-red-400\">[Draft] {drafts[chat.id]}</span> : chat.lastMessage?.text || \"No messages yet\"}\n                </span>\n            </div>\n        </div>\n    )\n});\nChatItem.displayName = 'ChatItem';\n\n\nfunction ClientOnlySignalPage({ firebaseUser, userProfile }: { firebaseUser: any, userProfile: any }) {\n    const [chats, setChats] = useState<any[]>([]);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [selectionMode, setSelectionMode] = useState<'chats' | null>(null);\n    const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n    const router = useRouter();\n\n    const { drafts } = useAppState();\n\n    useEffect(() => {\n        if (!firebaseUser) return;\n\n        // Fetch user's groups\n        const qGroups = query(collection(db, \"groups\"), where(\"members\", \"array-contains\", firebaseUser.uid));\n        const unsubGroups = onSnapshot(qGroups, async (groupsSnap) => {\n            const groupChatsPromises = groupsSnap.docs.map(d => processChatData(d, true));\n            Promise.all(groupChatsPromises).then(groupChats => {\n                setChats(prev => {\n                    const existingIds = new Set(prev.filter(p => !p.isGroup).map(p => p.id));\n                    const newChats = groupChats.filter(p => !existingIds.has(p.id));\n                    return [...prev.filter(p => !p.isGroup), ...newChats].sort((a,b) => (b.lastMessage?.createdAt?.toDate() || 0) - (a.lastMessage?.createdAt?.toDate() || 0));\n                });\n            });\n        });\n\n        const processChatData = async (chatDoc: any, isGroup: boolean) => {\n            const chatData = { id: chatDoc.id, ...chatDoc.data(), isGroup };\n            const chatId = isGroup ? chatDoc.id : [firebaseUser.uid, chatDoc.id].sort().join('_');\n            \n            const lastMsgQuery = query(collection(db, \"chats\", chatId, \"messages\"), orderBy(\"createdAt\", \"desc\"), limit(1));\n            const lastMsgSnap = await getDocs(lastMsgQuery);\n            const lastMessage = lastMsgSnap.empty ? null : lastMsgSnap.docs[0].data();\n\n            const unreadQuery = query(\n                collection(db, \"chats\", chatId, \"messages\"), \n                where(\"sender\", \"!=\", firebaseUser.uid),\n            );\n\n            // This is still inefficient but works for a small number of chats.\n            // A cloud function would be better to maintain a count.\n            const unreadSnap = await getDocs(unreadQuery);\n            const unreadCount = unreadSnap.docs.filter(doc => !(doc.data().readBy || []).includes(firebaseUser.uid)).length;\n\n            return { ...chatData, lastMessage, unreadCount };\n        }\n\n        const fetchConnections = async () => {\n             const followingRef = collection(db, \"users\", firebaseUser.uid, \"following\");\n            const followersRef = collection(db, \"users\", firebaseUser.uid, \"followers\");\n            const [followingSnap, followersSnap] = await Promise.all([getDocs(followingRef), getDocs(followersRef)]);\n            \n            const followingIds = followingSnap.docs.map(doc => doc.id);\n            const followerIds = followersSnap.docs.map(doc => doc.id);\n            const allConnections = Array.from(new Set([...followingIds, ...followerIds]));\n            \n            const userProfilesPromises = allConnections.map(async (uid) => {\n                const userDoc = await getDoc(doc(db, \"users\", uid));\n                if (!userDoc.exists()) return null;\n                return processChatData(userDoc, false);\n            });\n            Promise.all(userProfilesPromises).then(userChats => {\n                setChats(prev => {\n                     const existingGroupIds = new Set(prev.filter(p => p.isGroup).map(p => p.id));\n                     const newChats = userChats.filter(Boolean).filter(p => !existingGroupIds.has(p.id));\n                     return [...prev.filter(p => p.isGroup), ...newChats].sort((a,b) => (b.lastMessage?.createdAt?.toDate() || 0) - (a.lastMessage?.createdAt?.toDate() || 0));\n                });\n            });\n        };\n\n        fetchConnections();\n\n        return () => {\n            unsubGroups();\n        };\n\n    }, [firebaseUser]);\n\n    const handleSelectChat = (chat: any) => {\n        if (selectionMode === 'chats') {\n            handleItemClick(chat.id);\n        } else {\n            const chatId = chat.isGroup ? chat.id : [firebaseUser.uid, chat.id].sort().join('_');\n            router.push(`/signal/${chatId}`);\n        }\n    };\n\n    const handleDeleteChats = async () => {\n        if (selectedItems.size === 0) return;\n        const batch = writeBatch(db);\n        selectedItems.forEach(chatId => {\n            const userDeletedChatRef = doc(db, 'users', firebaseUser.uid, 'deletedChats', chatId);\n            batch.set(userDeletedChatRef, {\n                deletedAt: serverTimestamp()\n            });\n        });\n        await batch.commit();\n        setChats(prev => prev.filter(c => !selectedItems.has(c.id)));\n        cancelSelectionMode();\n    };\n\n    const handleItemClick = (id: string) => {\n        const newSelection = new Set(selectedItems);\n        if (newSelection.has(id)) {\n            newSelection.delete(id);\n        } else {\n            newSelection.add(id);\n        }\n        setSelectedItems(newSelection);\n        if (newSelection.size === 0) {\n            setSelectionMode(null);\n        }\n    };\n    \n    const cancelSelectionMode = () => {\n        setSelectionMode(null);\n        setSelectedItems(new Set());\n    };\n\n    const filteredChats = chats.filter(chat => \n        chat.name?.toLowerCase().includes(searchTerm.toLowerCase()) || \n        chat.username?.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n\n  return (\n    <div className=\"flex h-screen w-full bg-transparent font-body text-white overflow-hidden relative\">\n        <div className=\"w-full md:w-1/3 md:min-w-[350px] border-r border-accent-cyan/10 bg-black/60 flex flex-col relative\">\n            <AnimatePresence>\n            {selectionMode === 'chats' ? (\n                <motion.div \n                    initial={{ y: -50, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    exit={{ y: -50, opacity: 0 }}\n                    className=\"p-4 border-b border-accent-cyan/10 flex items-center justify-between shrink-0 bg-accent-cyan/10\"\n                >\n                    <button onClick={cancelSelectionMode}><X size={24} /></button>\n                    <span className=\"font-bold\">{selectedItems.size} selected</span>\n                    <button onClick={() => { if (window.confirm(`Hide ${selectedItems.size} chat(s) from your list?`)) handleDeleteChats(); }}><Trash2 size={24} /></button>\n                </motion.div>\n            ) : (\n                <div className=\"p-4 border-b border-accent-cyan/10 flex items-center justify-between shrink-0\">\n                    <h2 className=\"text-xl font-headline font-bold text-accent-cyan\">Signal</h2>\n                    <Link href=\"/signal/create-group\">\n                        <motion.button \n                            className=\"btn-glass text-sm\"\n                            whileHover={{ scale: 1.05, y: -2 }}\n                            whileTap={{ scale: 0.95 }}\n                        >\n                            Create Group\n                        </motion.button>\n                    </Link>\n                </div>\n            )}\n            </AnimatePresence>\n            \n            <div className=\"p-2\">\n                <div className=\"relative\">\n                    <input \n                        type=\"text\"\n                        placeholder=\"Search chats...\"\n                        className=\"input-glass w-full pl-10\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                    />\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20}/>\n                </div>\n            </div>\n            <div className=\"flex-1 overflow-y-auto\">\n                {filteredChats.map((chat) => (\n                    <ChatItem \n                        key={chat.id}\n                        chat={chat}\n                        selectionMode={selectionMode}\n                        isSelected={selectedItems.has(chat.id)}\n                        drafts={drafts}\n                        onClick={() => handleSelectChat(chat)}\n                        onLongPress={() => {setSelectionMode('chats'); setSelectedItems(new Set([chat.id]))}}\n                    />\n                ))}\n            </div>\n        </div>\n        <div className=\"hidden md:flex flex-1 items-center justify-center bg-black/40\">\n            <ChatLobby />\n        </div>\n    </div>\n  );\n}\n\nfunction SignalPage() {\n  const [firebaseUser, setFirebaseUser] = useState<any>(null);\n  const [userProfile, setUserProfile] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const unsub = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        setFirebaseUser(user);\n        const userDocRef = doc(db, \"users\", user.uid);\n        const userDocSnap = await getDoc(userDocRef);\n        if (userDocSnap.exists()) {\n          setUserProfile({ ...user, ...userDocSnap.data() });\n        } else {\n          setUserProfile(user);\n        }\n      } else {\n        setFirebaseUser(null);\n        setUserProfile(null);\n      }\n      setLoading(false);\n    });\n    return () => unsub();\n  }, []);\n  \n  if (loading || !firebaseUser || !userProfile) {\n    return <div className=\"flex h-screen items-center justify-center text-accent-cyan\">Loading Signal...</div>;\n  }\n  return <ClientOnlySignalPage firebaseUser={firebaseUser} userProfile={userProfile} />;\n}\n\nexport default function SignalPageWrapper() {\n    return (\n        <Suspense fallback={<div className=\"flex h-screen items-center justify-center text-accent-cyan\">Loading Signal...</div>}>\n            <SignalPage />\n        </Suspense>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}