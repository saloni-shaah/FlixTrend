{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"glass-card fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AANA;;;;;;AAQA,MAAM,cAAc,mLAAyB;AAE7C,MAAM,qBAAqB,sLAA4B;AAEvD,MAAM,oBAAoB,qLAA2B;AAErD,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,sLAA4B;QAC3B,WAAW,IAAA,yHAAE,EACX,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,mCAAqB,mNAAgB,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,sLAA4B;gBAC3B,KAAK;gBACL,WAAW,IAAA,yHAAE,EACX,4fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,sLAA4B,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,mNAAgB,CAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,oLAA0B;QACzB,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,oLAA0B,CAAC,WAAW;AAErE,MAAM,uCAAyB,mNAAgB,CAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,0LAAgC;QAC/B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,uBAAuB,WAAW,GAChC,0LAAgC,CAAC,WAAW;AAE9C,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,IAAA,oJAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW;AAEvE,MAAM,kCAAoB,mNAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,qLAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,yHAAE,EACX,IAAA,oJAAc,EAAC;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,qLAA2B,CAAC,WAAW"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/signal/MessageItem.tsx"],"sourcesContent":["'use client';\nimport React from 'react';\nimport Link from 'next/link';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Eye, Smile, Trash2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { getFirestore, doc, updateDoc, arrayUnion, arrayRemove } from 'firebase/firestore';\nimport { app } from '@/utils/firebaseClient';\n\nconst db = getFirestore(app);\n\n\n// --- HELPER FUNCTIONS ---\n\nconst anonymousNames = [\"Ram\", \"Shyam\", \"Sita\", \"Mohan\", \"Krishna\", \"Radha\", \"Anchal\", \"Anaya\", \"Advik\", \"Diya\", \"Rohan\", \"Priya\", \"Arjun\", \"Saanvi\", \"Kabir\"];\nconst generateAnonymousName = (userId: string, chatId: string) => {\n    const hash = (str: string) => {\n        let h = 0;\n        for (let i = 0; i < str.length; i++) {\n            h = (Math.imul(31, h) + str.charCodeAt(i)) | 0;\n        }\n        return h;\n    };\n    const nameIndex = Math.abs(hash(userId + chatId)) % anonymousNames.length;\n    const num = Math.abs(hash(chatId + userId)) % 900 + 100;\n    return `${anonymousNames[nameIndex]}${num}`;\n};\n\nconst useLongPress = (callback: () => void, ms = 300) => {\n    const timerRef = React.useRef<NodeJS.Timeout>();\n    const onTouchStart = () => { timerRef.current = setTimeout(callback, ms); };\n    const onTouchEnd = () => { if (timerRef.current) clearTimeout(timerRef.current); };\n    return { onTouchStart, onTouchEnd, onMouseDown: onTouchStart, onMouseUp: onTouchEnd, onMouseLeave: onTouchEnd };\n};\n\n// --- COMPONENT DEFINITION ---\n\nexport const MessageItem = React.memo(({ msg, isUser, selectedChat, firebaseUser, isSelected, onLongPress, onClick, onShowEmojiPicker, showEmojiPicker, onShowDeleteConfirm, selectionMode }: any) => {\n    const longPressProps = useLongPress(() => {\n        if (selectionMode) {\n            onClick();\n        } else {\n            onLongPress();\n        }\n    });\n\n    const senderInfo = selectedChat.isGroup ? (selectedChat.groupType === 'simple' ? selectedChat.memberInfo?.[msg.sender] : null) : selectedChat;\n    const displayName = selectedChat.groupType === 'anonymous' ? generateAnonymousName(msg.sender, selectedChat.id) : selectedChat.groupType === 'pseudonymous' ? selectedChat.pseudonyms?.[msg.sender] || 'Anon' : senderInfo?.name || \"User\";\n    const defaultReactions = [\"ðŸ‘\", \"â¤ï¸\", \"ðŸ˜‚\", \"ðŸ˜¢\", \"ðŸ˜®\", \"ðŸ™\"];\n\n    const handleReact = async (emoji: string) => {\n        if (!firebaseUser) return;\n        const messageRef = doc(db, 'chats', selectedChat.id, 'messages', msg.id);\n        const currentReactions = msg.reactions || {};\n        let newReactions = { ...currentReactions };\n        let userHasReacted = false;\n        let previousEmoji = '';\n\n        // Check if user has already reacted and with which emoji\n        for (const [e, uids] of Object.entries(newReactions)) {\n            if (Array.isArray(uids) && uids.includes(firebaseUser.uid)) {\n                userHasReacted = true;\n                previousEmoji = e;\n                break;\n            }\n        }\n\n        // If user is re-reacting with the same emoji, remove it\n        if (userHasReacted && previousEmoji === emoji) {\n            newReactions[previousEmoji] = newReactions[previousEmoji].filter((uid: string) => uid !== firebaseUser.uid);\n            if (newReactions[previousEmoji].length === 0) {\n                delete newReactions[previousEmoji];\n            }\n        } else {\n            // If user had a previous reaction, remove it\n            if (userHasReacted) {\n                newReactions[previousEmoji] = newReactions[previousEmoji].filter((uid: string) => uid !== firebaseUser.uid);\n                 if (newReactions[previousEmoji].length === 0) {\n                    delete newReactions[previousEmoji];\n                }\n            }\n            // Add new reaction\n            if (!newReactions[emoji]) {\n                newReactions[emoji] = [];\n            }\n            newReactions[emoji].push(firebaseUser.uid);\n        }\n\n        await updateDoc(messageRef, { reactions: newReactions });\n        onShowEmojiPicker(null);\n    };\n\n    const getSeenStatus = () => {\n        if (!isUser || msg.sender === 'system') return 'none';\n        const otherParticipantIds = selectedChat.isGroup\n            ? selectedChat.members.filter((id: string) => id !== firebaseUser.uid)\n            : [selectedChat.id];\n        \n        const readers = msg.readBy || [];\n        const allOthersHaveRead = otherParticipantIds.every((id: string) => readers.includes(id));\n        \n        if (allOthersHaveRead) return 'all_seen';\n        if (readers.length > 1) return 'delivered'; // Delivered to at least one other person\n        return 'sent'; // Only sent by user\n    };\n\n    const seenStatus = getSeenStatus();\n\n    return (\n        <div \n            key={msg.id} \n            onClick={onClick}\n            {...longPressProps}\n            className={cn(\"group flex w-full items-end gap-2\", isUser ? \"justify-end\" : msg.sender === 'system' ? 'justify-center' : \"justify-start\", selectionMode === 'messages' && \"cursor-pointer\")}\n        >\n        <div className={cn(\"flex items-end gap-2 max-w-[80%] md:max-w-[70%]\", isSelected && \"bg-accent-cyan/20 rounded-xl\")}>\n            <div className={`flex flex-col ${isUser ? 'items-end' : 'items-start'}`}>\n                <div className={`relative px-4 py-2 rounded-2xl transition-all duration-300 ${isUser ? \"bg-accent-cyan text-white rounded-br-none\" : msg.sender === 'system' ? \"bg-gray-800 text-gray-400 text-xs italic\" : \"bg-gray-700 text-white rounded-bl-none\"}`}>\n                    {!isUser && msg.sender !== 'system' && (\n                        <div className=\"font-bold text-sm text-accent-pink\">{displayName}</div>\n                    )}\n                    {msg.type === 'image' && <img src={msg.mediaUrl} alt={msg.text || \"image\"} className=\"rounded-lg max-w-xs mt-1\" />}\n                    {msg.type === 'video' && <video src={msg.mediaUrl} controls className=\"rounded-lg max-w-xs\" />}\n                    {msg.type === 'audio' && <audio src={msg.mediaUrl} controls />}\n                    {msg.text && <p className=\"mt-1 break-words\">{msg.text}</p>}\n                    \n                    <div className={`text-xs mt-1 flex items-center gap-1 ${isUser ? 'justify-end' : 'justify-start'}`}>\n                        <span>{msg.createdAt?.toDate?.().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) || \"\"}</span>\n                         {seenStatus !== 'none' && (\n                             <span className=\"relative flex items-center\">\n                                <Eye size={14} className={cn('transition-colors', seenStatus === 'all_seen' ? 'text-blue-400' : 'text-gray-500')} />\n                                {seenStatus === 'all_seen' && <Eye size={14} className=\"absolute -right-1 text-blue-400\" />}\n                             </span>\n                         )}\n                    </div>\n                    {msg.reactions && Object.keys(msg.reactions).length > 0 && (\n                        <div className=\"absolute -bottom-4 -right-1 flex gap-1\">\n                            {Object.entries(msg.reactions).map(([emoji, uids]: [string, any]) => (\n                                <div key={emoji} className=\"bg-gray-600 px-1.5 py-0.5 rounded-full text-xs flex items-center gap-1\">\n                                    <span>{emoji}</span>\n                                    <span className=\"font-bold text-xs\">{Array.isArray(uids) ? uids.length : 0}</span>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n                <div className={`relative hidden group-hover:flex items-center gap-1 mt-1 ${isUser ? \"flex-row-reverse\" : \"\"}`}>\n                {msg.sender !== 'system' && \n                    <>\n                        <div className=\"relative\">\n                        <button onClick={() => onShowEmojiPicker(showEmojiPicker === msg.id ? null : msg.id)} className=\"p-1 rounded-full bg-gray-600 hover:bg-gray-500\"><Smile size={16}/></button>\n                            <AnimatePresence>\n                            {showEmojiPicker === msg.id && (\n                                <motion.div \n                                    initial={{ opacity: 0, y: 10 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    exit={{ opacity: 0, y: 10 }}\n                                    className=\"absolute z-10 -top-10 bg-gray-800 rounded-full p-2 flex gap-1 shadow-lg\"\n                                >\n                                    {defaultReactions.map(emoji => (\n                                        <button key={emoji} onClick={() => handleReact(emoji)} className=\"text-xl hover:scale-125 transition-transform\">{emoji}</button>\n                                    ))}\n                                </motion.div>\n                            )}\n                            </AnimatePresence>\n                        </div>\n                    </>\n                }\n                {isUser && <button onClick={onShowDeleteConfirm} className=\"p-1 rounded-full bg-gray-600 hover:bg-red-500\"><Trash2 size={16}/></button>}\n                </div>\n            </div>\n            </div>\n        </div>\n    );\n});\nMessageItem.displayName = 'MessageItem';\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 583, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[40px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          \"bg-transparent border-2 border-glass-border focus:ring-accent-green focus:border-accent-green\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EACX,wSACA,iGACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 610, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/signal/%5Bid%5D/page.tsx"],"sourcesContent":["\n'use client';\nimport React, { useEffect, useState, useRef, Suspense } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { getFirestore, collection, query, onSnapshot, orderBy, doc, getDoc, setDoc, addDoc, serverTimestamp, where, writeBatch, getDocs, updateDoc, deleteDoc, arrayUnion, arrayRemove, deleteField, Unsubscribe, limit } from \"firebase/firestore\";\nimport { auth, app } from \"@/utils/firebaseClient\";\nimport { Phone, Video, Paperclip, Mic, Send, ArrowLeft, Image as ImageIcon, X, Smile, Trash2, Users, UserPlus, UserX, Edit, Shield, EyeOff, LogOut, UploadCloud, UserCircle, Cake, MapPin, AtSign, User, Bot, Search, Check, Camera, Loader, Lock, Eye } from \"lucide-react\";\nimport { useAppState } from \"@/utils/AppStateContext\";\nimport { motion, AnimatePresence, useAnimation } from \"framer-motion\";\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from \"@/components/ui/alert-dialog\";\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { MessageItem } from '@/components/signal/MessageItem';\nimport { Textarea } from \"@/components/ui/textarea\";\n\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\n\nfunction formatDateSeparator(date: Date) {\n  const now = new Date();\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n  const yesterday = new Date(today);\n  yesterday.setDate(yesterday.getDate() - 1);\n  const targetDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n  if (targetDate.getTime() === today.getTime()) return 'Today';\n  if (targetDate.getTime() === yesterday.getTime()) return 'Yesterday';\n  \n  return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });\n}\n\n\nfunction ChatPage({ firebaseUser, userProfile, chatId }: { firebaseUser: any, userProfile: any, chatId: string }) {\n    const router = useRouter();\n    const { drafts, setDraft } = useAppState();\n    const [selectedChat, setSelectedChat] = useState<any>(null);\n    const [messages, setMessages] = useState<any[]>([]);\n    const [newMessage, setNewMessage] = useState(\"\");\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n    \n    const [isRecording, setIsRecording] = useState(false);\n    const [isRecordingLocked, setIsRecordingLocked] = useState(false);\n    const [recordingTime, setRecordingTime] = useState(0);\n    const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n    const audioChunksRef = useRef<Blob[]>([]);\n    const recordingTimerRef = useRef<NodeJS.Timeout | null>(null);\n    const micButtonRef = useRef<HTMLButtonElement>(null);\n    const lockIconControls = useAnimation();\n\n\n    const [selectionMode, setSelectionMode] = useState<'messages' | null>(null);\n    const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n    const [showEmojiPicker, setShowEmojiPicker] = useState<string | null>(null);\n    const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n    const [showAttachmentMenu, setShowAttachmentMenu] = useState(false);\n    const [showCameraView, setShowCameraView] = useState(false);\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadError, setUploadError] = useState<string | null>(null);\n    const [mediaPreview, setMediaPreview] = useState<string | null>(null);\n    const [cameraStream, setCameraStream] = useState<MediaStream | null>(null);\n\n    useEffect(() => {\n        const draftForThisChat = drafts[chatId] || '';\n        setNewMessage(draftForThisChat);\n    }, [chatId, drafts]);\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        const newText = e.target.value;\n        setNewMessage(newText);\n        // Auto-resize textarea\n        if(textareaRef.current) {\n            textareaRef.current.style.height = 'auto';\n            textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n        }\n\n        if (selectedChat) {\n            setDraft(chatId, newText);\n\n            if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\n            \n            const updateRef = doc(db, selectedChat.isGroup ? \"groups\" : \"users\", selectedChat.id);\n            updateDoc(updateRef, {\n                typing: arrayUnion(firebaseUser.uid)\n            }).catch(() => {});\n\n            typingTimeoutRef.current = setTimeout(() => {\n                updateDoc(updateRef, {\n                    typing: arrayRemove(firebaseUser.uid)\n                }).catch(() => {});\n            }, 3000);\n        }\n    };\n\n    useEffect(() => {\n        if (!chatId || !firebaseUser) return;\n    \n        const isGroupChat = !chatId.includes('_');\n        let unsub: Unsubscribe;\n    \n        if (isGroupChat) {\n            unsub = onSnapshot(doc(db, \"groups\", chatId), (doc) => {\n                if (doc.exists()) {\n                    setSelectedChat({ id: doc.id, ...doc.data(), isGroup: true });\n                }\n            });\n        } else {\n            const otherUserId = chatId.replace(firebaseUser.uid, '').replace('_', '');\n            unsub = onSnapshot(doc(db, \"users\", otherUserId), (doc) => {\n                if(doc.exists()) {\n                    setSelectedChat({ id: doc.id, ...doc.data(), isGroup: false });\n                }\n            });\n        }\n    \n        const q = query(collection(db, \"chats\", chatId, \"messages\"), orderBy(\"createdAt\", \"asc\"));\n        const unsubMessages = onSnapshot(q, (snap) => {\n             const newMessages = snap.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n             const unreadMessages = newMessages.filter(msg => {\n                return msg.sender !== firebaseUser.uid && !(msg.readBy || []).includes(firebaseUser.uid);\n             });\n\n             if (unreadMessages.length > 0) {\n                 const batch = writeBatch(db);\n                 unreadMessages.forEach(msg => {\n                     const msgRef = doc(db, \"chats\", chatId, \"messages\", msg.id);\n                     batch.update(msgRef, { readBy: arrayUnion(firebaseUser.uid) });\n                 });\n                 batch.commit().catch(e => console.error(\"Error marking messages as read:\", e));\n             }\n\n            setMessages(newMessages);\n        });\n    \n        return () => {\n            unsub();\n            unsubMessages();\n        };\n    }, [chatId, firebaseUser]);\n\n\n    useEffect(() => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, [messages]);\n\n     const startCamera = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });\n            setCameraStream(stream);\n            if (videoRef.current) {\n                videoRef.current.srcObject = stream;\n            }\n        } catch (err) {\n            console.error(\"Camera error:\", err);\n            alert(\"Camera access denied. Please enable it in your browser settings.\");\n            setShowCameraView(false);\n        }\n    };\n    \n    const stopCamera = () => {\n        if (cameraStream) {\n            cameraStream.getTracks().forEach(track => track.stop());\n            setCameraStream(null);\n        }\n    };\n\n    useEffect(() => {\n        if (showCameraView) {\n            startCamera();\n        } else {\n            stopCamera();\n        }\n        return stopCamera;\n    }, [showCameraView]);\n    \n    const handleSend = async (e?: React.FormEvent, mediaUrl: string | null = null, type: 'text' | 'image' | 'video' | 'audio' = 'text') => {\n        e?.preventDefault();\n        const textToSend = newMessage.trim();\n        if ((!textToSend && !mediaUrl) || !firebaseUser || !selectedChat) return;\n        \n        const capturedText = newMessage.trim();\n        setNewMessage(\"\"); // Clear input immediately\n        setDraft(chatId, '');\n        if (textareaRef.current) {\n            textareaRef.current.style.height = 'auto'; // Reset height\n        }\n        if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\n    \n        const messageData: any = {\n            sender: firebaseUser.uid,\n            createdAt: serverTimestamp(),\n            type: type,\n            readBy: [firebaseUser.uid],\n            reactions: {},\n            deletedFor: []\n        };\n    \n        if (mediaUrl) {\n            messageData.mediaUrl = mediaUrl;\n            if (capturedText) messageData.text = capturedText; \n        } else {\n            messageData.text = capturedText;\n        }\n    \n        await addDoc(collection(db, \"chats\", chatId, \"messages\"), messageData);\n    };\n\n    const handleDeleteMessages = async (mode: 'me' | 'everyone') => {\n        if (selectedItems.size === 0) return;\n        \n        const batch = writeBatch(db);\n        selectedItems.forEach(messageId => {\n            const msgRef = doc(db, 'chats', chatId, 'messages', messageId);\n            if (mode === 'me') {\n                batch.update(msgRef, { deletedFor: arrayUnion(firebaseUser.uid) });\n            } else {\n                batch.delete(msgRef); // Firestore rules should prevent unauthorized deletion\n            }\n        });\n\n        try {\n            await batch.commit();\n        } catch (error) {\n            console.error(\"Error deleting messages:\", error);\n            alert(\"Could not delete messages.\");\n        } finally {\n            cancelSelectionMode();\n        }\n    };\n    \n    const cancelSelectionMode = () => {\n        setSelectionMode(null);\n        setSelectedItems(new Set());\n    };\n\n    const handleFileUpload = async (file: File, typeOverride?: 'audio') => {\n        const user = auth.currentUser;\n        if (!user) {\n            setUploadError(\"You must be logged in to upload files.\");\n            return;\n        }\n\n        // Enforce file type and size limits for chat\n        const isImage = file.type.startsWith('image/');\n        const maxSize = 5 * 1024 * 1024; // 5MB\n\n        if (!isImage) {\n            setUploadError(\"Only images can be sent in chat.\");\n            return;\n        }\n        if (file.size > maxSize) {\n            setUploadError(\"Image size cannot exceed 5MB.\");\n            return;\n        }\n\n        setIsUploading(true);\n        setUploadError('');\n        \n        let previewUrl: string | null = null;\n        if (!typeOverride) {\n            previewUrl = URL.createObjectURL(file);\n            setMediaPreview(previewUrl);\n        }\n\n        try {\n            const path = typeOverride === 'audio' ? `voice_messages/${user.uid}` : `chat_media/${user.uid}`;\n            const fileName = `${Date.now()}-${file.name}`;\n            const fileRef = storageRef(storage, `${path}/${fileName}`);\n            \n            const snapshot = await uploadBytes(fileRef, file);\n            const downloadURL = await getDownloadURL(snapshot.ref);\n\n            let type: 'image' | 'video' | 'audio' = typeOverride || (file.type.startsWith('video/') ? 'video' : 'image');\n            \n            await handleSend(undefined, downloadURL, type);\n\n        } catch (error: any) {\n            console.error(\"Upload failed:\", error);\n            setUploadError(error.message);\n        } finally {\n            setIsUploading(false);\n            if(previewUrl) {\n                URL.revokeObjectURL(previewUrl); \n                setMediaPreview(null);\n            }\n        }\n    };\n\n\n     const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      setShowAttachmentMenu(false);\n      const file = e.target.files?.[0];\n      if (file) {\n          handleFileUpload(file);\n      }\n      if (e.target) e.target.value = '';\n    };\n\n     const handleCapture = () => {\n        if (videoRef.current && canvasRef.current) {\n            const video = videoRef.current;\n            const canvas = canvasRef.current;\n            canvas.width = video.videoWidth;\n            canvas.height = video.videoHeight;\n            const context = canvas.getContext('2d');\n            context?.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n            \n            canvas.toBlob(async (blob) => {\n                if (blob) {\n                    const file = new File([blob], `capture-${Date.now()}.jpg`, { type: 'image/jpeg' });\n                    setShowCameraView(false);\n                    await handleFileUpload(file);\n                }\n            }, 'image/jpeg');\n        }\n    };\n    \n    const startRecording = async () => {\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            mediaRecorderRef.current = new MediaRecorder(stream);\n            audioChunksRef.current = [];\n\n            mediaRecorderRef.current.ondataavailable = (event) => {\n                audioChunksRef.current.push(event.data);\n            };\n\n            mediaRecorderRef.current.onstop = async () => {\n                const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n                if (audioBlob.size > 5 * 1024 * 1024) { // 5MB limit\n                    setUploadError(\"Voice message is too large (max 5MB).\");\n                    stream.getTracks().forEach(track => track.stop());\n                    return;\n                }\n                const audioFile = new File([audioBlob], `voice-message-${Date.now()}.webm`, { type: 'audio/webm' });\n                await handleFileUpload(audioFile, 'audio');\n                stream.getTracks().forEach(track => track.stop());\n            };\n\n            mediaRecorderRef.current.start();\n            setIsRecording(true);\n            setRecordingTime(0);\n            recordingTimerRef.current = setInterval(() => {\n                setRecordingTime(prev => prev + 1);\n            }, 1000);\n        } catch (err) {\n            console.error(\"Audio recording failed:\", err);\n            setUploadError(\"Microphone access denied.\");\n        }\n    };\n\n    const stopRecording = () => {\n        if (mediaRecorderRef.current && isRecording) {\n            mediaRecorderRef.current.stop();\n        }\n        if (recordingTimerRef.current) clearInterval(recordingTimerRef.current);\n        setIsRecording(false);\n        setIsRecordingLocked(false);\n    };\n    \n    const cancelRecording = () => {\n        if (mediaRecorderRef.current && isRecording) {\n            mediaRecorderRef.current.onstop = () => {\n                 mediaRecorderRef.current?.stream.getTracks().forEach(track => track.stop());\n            };\n            mediaRecorderRef.current.stop();\n        }\n        if (recordingTimerRef.current) clearInterval(recordingTimerRef.current);\n        setIsRecording(false);\n        setIsRecordingLocked(false);\n    };\n\n    const handleMicButtonTouchStart = (e: React.TouchEvent) => {\n        e.preventDefault();\n        lockIconControls.start({ y: 0, opacity: 1 });\n        startRecording();\n    };\n\n    const handleMicButtonTouchMove = (e: React.TouchEvent) => {\n        const touch = e.touches[0];\n        const lockElement = document.getElementById('lock-icon');\n        if (lockElement) {\n            const { top, right, bottom, left } = lockElement.getBoundingClientRect();\n            if (touch.clientX > left && touch.clientX < right && touch.clientY > top && touch.clientY < bottom) {\n                setIsRecordingLocked(true);\n                 if (mediaRecorderRef.current && isRecording) {\n                    lockIconControls.start({ y: -100, opacity: 0 });\n                 }\n            }\n        }\n    };\n\n    const handleMicButtonTouchEnd = () => {\n        lockIconControls.start({ y: -100, opacity: 0 });\n        if (!isRecordingLocked) {\n            stopRecording();\n        }\n    };\n    \n    const renderMessagesWithSeparators = () => {\n        let lastDate: string | null = null;\n        const messageElements = [];\n\n        messages\n            .filter(msg => !(msg.deletedFor || []).includes(firebaseUser.uid))\n            .forEach(msg => {\n                const msgDate = msg.createdAt?.toDate();\n                if (msgDate) {\n                    const dateString = msgDate.toDateString();\n                    if (dateString !== lastDate) {\n                        messageElements.push(\n                            <div key={dateString} className=\"text-center my-4\">\n                                <span className=\"bg-gray-800 text-gray-400 text-xs font-bold px-3 py-1 rounded-full\">{formatDateSeparator(msgDate)}</span>\n                            </div>\n                        );\n                        lastDate = dateString;\n                    }\n                }\n                \n                const isUser = msg.sender === firebaseUser.uid;\n                messageElements.push(\n                    <MessageItem\n                      key={msg.id}\n                      msg={msg}\n                      isUser={isUser}\n                      selectedChat={selectedChat}\n                      firebaseUser={firebaseUser}\n                      isSelected={selectedItems.has(msg.id)}\n                      selectionMode={selectionMode}\n                      onLongPress={() => { setSelectionMode('messages'); setSelectedItems(new Set([msg.id])); }}\n                      onClick={() => {\n                        if (selectionMode === 'messages') {\n                            const newSelection = new Set(selectedItems);\n                            if (newSelection.has(msg.id)) {\n                                newSelection.delete(msg.id);\n                            } else {\n                                newSelection.add(msg.id);\n                            }\n                            setSelectedItems(newSelection);\n                            if (newSelection.size === 0) {\n                                cancelSelectionMode();\n                            }\n                        }\n                      }}\n                      onShowEmojiPicker={setShowEmojiPicker}\n                      showEmojiPicker={showEmojiPicker}\n                      onShowDeleteConfirm={() => {\n                        setSelectedItems(new Set([msg.id]));\n                        setShowDeleteConfirm(true);\n                      }}\n                    />\n                );\n            });\n            return messageElements;\n    };\n\n\n     if (showCameraView) {\n        return (\n            <div className=\"absolute inset-0 z-20 bg-black flex flex-col items-center justify-center\">\n                <video ref={videoRef} autoPlay playsInline muted className=\"w-full h-full object-cover\"/>\n                <canvas ref={canvasRef} className=\"hidden\"></canvas>\n                <div className=\"absolute bottom-4 flex items-center gap-4\">\n                     <button onClick={() => setShowCameraView(false)} className=\"p-3 bg-gray-800/70 rounded-full text-white\"><X/></button>\n                     <button onClick={handleCapture} className=\"w-20 h-20 rounded-full bg-white border-4 border-gray-400\"></button>\n                </div>\n            </div>\n        )\n    }\n\n    if (!selectedChat) {\n        return <div className=\"flex h-full w-full items-center justify-center text-accent-cyan\"><Loader className=\"animate-spin\" /> Loading Chat...</div>\n    }\n\n    return (\n        <div className=\"flex-1 flex flex-col bg-black/40 h-full\">\n            <header className=\"flex items-center gap-3 p-3 border-b border-accent-cyan/10 bg-black/60 shadow-md shrink-0\">\n                <button onClick={() => router.push('/signal')} className=\"p-2 rounded-full hover:bg-accent-cyan/10\"><ArrowLeft size={20}/></button>\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-tr from-accent-pink to-accent-cyan flex items-center justify-center text-white font-bold text-lg overflow-hidden shrink-0\">\n                {selectedChat.isGroup ? \n                        (selectedChat.avatar_url ? <img src={selectedChat.avatar_url} alt={selectedChat.name} className=\"w-full h-full object-cover\"/> : <Users/>) :\n                        (selectedChat.avatar_url ? <img src={selectedChat.avatar_url} alt=\"avatar\" className=\"w-full h-full object-cover\"/> : <UserCircle/>)\n                }\n                </div>\n                <div className=\"flex-1 text-left\">\n                    <h3 className=\"font-bold text-white\">{selectedChat.name || selectedChat.username}</h3>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                {!selectedChat.isGroup && <button className=\"p-2 rounded-full hover:bg-accent-cyan/10\"><Video size={20}/></button>}\n                {!selectedChat.isGroup && <button className=\"p-2 rounded-full hover:bg-accent-cyan/10\"><Phone size={20}/></button>}\n                </div>\n            </header>\n            \n            <AnimatePresence>\n                {selectionMode === 'messages' && (\n                    <motion.div \n                        initial={{ opacity: 0, y: -50 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: -50 }}\n                        className=\"p-3 border-b border-accent-cyan/10 flex items-center justify-between shrink-0 bg-accent-cyan/10 fixed top-[65px] left-0 right-0 z-10 md:left-1/3\"\n                    >\n                        <button onClick={cancelSelectionMode}><X size={24} /></button>\n                        <span className=\"font-bold\">{selectedItems.size} selected</span>\n                        <button onClick={() => setShowDeleteConfirm(true)}><Trash2 size={24} /></button>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            <div className=\"flex-1 overflow-y-auto p-4 flex flex-col gap-1\">\n                {renderMessagesWithSeparators()}\n                <div ref={messagesEndRef} />\n            </div>\n\n            <footer className=\"shrink-0 p-2 border-t border-accent-cyan/10 bg-black/60 relative\">\n                 <AnimatePresence>\n                 {showAttachmentMenu && (\n                    <motion.div \n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: 10 }}\n                        className=\"absolute bottom-full left-2 w-48 bg-gray-800 rounded-lg shadow-lg p-2 flex flex-col gap-1\"\n                    >\n                        <button type=\"button\" onClick={() => { setShowAttachmentMenu(false); setShowCameraView(true); }} className=\"btn-glass text-sm justify-start gap-2 text-white\"><Camera/> Take Photo</button>\n                        <button type=\"button\" onClick={() => fileInputRef.current?.click()} className=\"btn-glass text-sm justify-start gap-2 text-white\"><ImageIcon/> Upload Image</button>\n                    </motion.div>\n                )}\n                </AnimatePresence>\n                <form onSubmit={(e) => handleSend(e)} className=\"flex items-end gap-2\">\n                    {!isRecordingLocked && (\n                        <div className=\"flex items-center\">\n                            <button type=\"button\" onClick={() => setShowAttachmentMenu(v => !v)} className=\"p-2 text-gray-400 hover:text-accent-cyan shrink-0\">\n                                <Paperclip size={20}/>\n                            </button>\n                            <button type=\"button\" className=\"p-2 text-gray-400 hover:text-accent-cyan shrink-0\" onClick={() => {\n                                textareaRef.current?.focus();\n                                try {\n                                    if(textareaRef.current && 'showPicker' in HTMLInputElement.prototype) {\n                                        (textareaRef.current as any).showPicker();\n                                    }\n                                } catch(e) { console.warn(\"Could not programmatically open emoji keyboard.\"); }\n                            }}>\n                                <Smile size={20}/>\n                            </button>\n                        </div>\n                    )}\n                    \n                    {isRecordingLocked ? (\n                        <div className=\"flex-1 flex items-center gap-3 bg-gray-700 rounded-full px-4 py-2\">\n                            <button type=\"button\" onClick={cancelRecording} className=\"text-red-400\">Cancel</button>\n                            <div className=\"flex-1 text-center text-red-400 animate-pulse font-mono\">{Math.floor(recordingTime / 60).toString().padStart(2, '0')}:{ (recordingTime % 60).toString().padStart(2, '0')}</div>\n                        </div>\n                    ) : (\n                        <div className=\"flex-1 relative flex items-center\">\n                            <Textarea \n                                ref={textareaRef}\n                                value={newMessage} \n                                onChange={handleInputChange} \n                                onKeyDown={(e) => { if (e.key === 'Enter' && !e.shiftKey) { handleSend(e as any); } }}\n                                placeholder={isRecording ? \"Recording...\" : \"Type a message...\"} \n                                className=\"flex-1 bg-gray-700 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-accent-cyan w-full pr-10 resize-none max-h-32\"\n                                rows={1}\n                            />\n                        </div>\n                    )}\n\n                    <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" accept=\"image/*\" />\n                    <AnimatePresence mode=\"wait\">\n                    {newMessage.trim() === \"\" && !isRecordingLocked ? (\n                        <div className=\"relative\">\n                            <motion.div \n                                id=\"lock-icon\"\n                                className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 p-2 bg-gray-800 rounded-full pointer-events-none\"\n                                animate={lockIconControls}\n                                initial={{ y: -100, opacity: 0 }}\n                            >\n                                <Lock size={20} />\n                            </motion.div>\n                            <motion.button \n                                key=\"mic\"\n                                ref={micButtonRef}\n                                onTouchStart={handleMicButtonTouchStart}\n                                onTouchEnd={handleMicButtonTouchEnd}\n                                onTouchMove={handleMicButtonTouchMove}\n                                animate={{ scale: isRecording ? 1.2 : 1 }}\n                                type=\"button\" \n                                className={`p-3 rounded-full transition-colors shrink-0 ${isRecording ? 'bg-red-500 animate-pulse' : 'bg-accent-pink text-white'}`}\n                            >\n                                <Mic size={20}/>\n                            </motion.button>\n                        </div>\n                    ) : (\n                            <motion.button \n                                key=\"send\"\n                                initial={{ scale: 0.5, opacity: 0 }}\n                                animate={{ scale: 1, opacity: 1 }}\n                                exit={{ scale: 0.5, opacity: 0 }}\n                                type=\"submit\"\n                                className=\"p-3 rounded-full bg-accent-cyan text-black shrink-0\"\n                            >\n                                <Send size={20}/>\n                            </motion.button>\n                    )}\n                    </AnimatePresence>\n                </form>\n            </footer>\n             <AlertDialog open={showDeleteConfirm} onOpenChange={setShowDeleteConfirm}>\n                <AlertDialogContent>\n                    <AlertDialogHeader>\n                        <AlertDialogTitle>Delete Message(s)?</AlertDialogTitle>\n                        <AlertDialogDescription>\n                            This action cannot be undone.\n                        </AlertDialogDescription>\n                    </AlertDialogHeader>\n                    <AlertDialogFooter>\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\n                         <AlertDialogAction\n                            onClick={() => handleDeleteMessages('me')}\n                            className=\"bg-yellow-600 hover:bg-yellow-700\"\n                        >\n                            Delete for Me\n                        </AlertDialogAction>\n                        <AlertDialogAction\n                             onClick={() => handleDeleteMessages('everyone')}\n                             className=\"bg-red-600 hover:bg-red-700\"\n                        >\n                            Delete for Everyone\n                        </AlertDialogAction>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialog>\n        </div>\n    )\n}\n\nfunction ChatPageWrapper() {\n    const params = useParams();\n    const chatId = params.id as string;\n    const [firebaseUser, setFirebaseUser] = useState<any>(null);\n    const [userProfile, setUserProfile] = useState<any>(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n  \n    useEffect(() => {\n      const unsub = auth.onAuthStateChanged(async (user) => {\n        if (user) {\n          setFirebaseUser(user);\n          const userDocRef = doc(db, \"users\", user.uid);\n          const unsubProfile = onSnapshot(userDocRef, (userDocSnap) => {\n            if (userDocSnap.exists()) {\n              setUserProfile({ ...user, ...userDocSnap.data() });\n            } else {\n              setUserProfile(user);\n            }\n            setLoading(false);\n          });\n          return () => unsubProfile();\n        } else {\n          router.push('/login');\n          setLoading(false);\n        }\n      });\n      return () => unsub();\n    }, [router]);\n    \n    if (loading || !firebaseUser || !userProfile) {\n      return <div className=\"flex h-full items-center justify-center text-accent-cyan\"><Loader className=\"animate-spin\" /> Loading Chat...</div>;\n    }\n    \n    return <ChatPage firebaseUser={firebaseUser} userProfile={userProfile} chatId={chatId} />;\n  }\n\nexport default function SignalChatPage() {\n    return (\n        <div className=\"h-full w-full\">\n            <Suspense fallback={<div className=\"flex h-full items-center justify-center text-accent-cyan\"><Loader className=\"animate-spin\" /> Loading Chat...</div>}>\n                <ChatPageWrapper />\n            </Suspense>\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}}]
}