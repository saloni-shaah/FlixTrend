{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/actions.ts"],"sourcesContent":["'use server';\n\nimport { v2 as cloudinary } from 'cloudinary';\nimport { revalidatePath } from 'next/cache';\nimport { initializeApp, getApps, cert } from 'firebase-admin/app';\nimport { getStorage } from 'firebase-admin/storage';\nimport { v4 as uuidv4 } from 'uuid';\n\n// --- Cloudinary Configuration & Upload ---\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\nexport async function uploadToCloudinary(formData: FormData) {\n  const file = formData.get('file') as File;\n  const arrayBuffer = await file.arrayBuffer();\n  const buffer = new Uint8Array(arrayBuffer);\n\n  try {\n    const results: any = await new Promise((resolve, reject) => {\n      cloudinary.uploader.upload_stream({ resource_type: 'auto' }, (error, result) => {\n        if (error) {\n          reject(error);\n        } else {\n          resolve(result);\n        }\n      }).end(buffer);\n    });\n    return { success: true, url: results.secure_url };\n  } catch (error) {\n    console.error('Cloudinary upload failed:', error);\n    return { success: false, error: 'Upload failed' };\n  }\n}\n\n// --- Firebase Admin Configuration & Upload ---\nconst serviceAccount = JSON.parse(process.env.FIREBASE_SERVICE_ACCOUNT_KEY as string);\n\nif (!getApps().length) {\n  initializeApp({\n    credential: cert(serviceAccount),\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET\n  });\n}\n\nexport async function uploadFileToFirebaseStorage(formData: FormData) {\n  const file = formData.get('file') as File;\n  const userId = formData.get('userId') as string;\n\n  if (!file || !userId) {\n    return { failure: 'File or user ID is missing.' };\n  }\n  \n  const bucket = getStorage().bucket();\n  const fileExtension = file.name.split('.').pop();\n  const fileName = `${userId}/${uuidv4()}.${fileExtension}`;\n  const blob = bucket.file(fileName);\n  \n  const arrayBuffer = await file.arrayBuffer();\n  const buffer = Buffer.from(arrayBuffer);\n\n  try {\n    await new Promise((resolve, reject) => {\n      const blobStream = blob.createWriteStream({\n        metadata: {\n          contentType: file.type,\n        },\n      });\n\n      blobStream.on('error', (err) => {\n        console.error('Firebase upload stream error:', err);\n        reject(err);\n      });\n\n      blobStream.on('finish', () => {\n        // The public URL can be constructed like this.\n        // You might want to make it a signed URL for private files.\n        const publicUrl = `https://firebasestorage.googleapis.com/v0/b/${bucket.name}/o/${encodeURIComponent(fileName)}?alt=media`;\n        resolve(publicUrl);\n      });\n\n      blobStream.end(buffer);\n    });\n\n    const publicUrl = `https://firebasestorage.googleapis.com/v0/b/${bucket.name}/o/${encodeURIComponent(fileName)}?alt=media`;\n    return { success: { url: publicUrl } };\n\n  } catch (error) {\n    console.error('Firebase upload failed:', error);\n    return { failure: 'Firebase upload process failed.' };\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA+CsB,8BAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/TextPostForm.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from 'react';\nimport { MapPin, Smile, Locate, Loader } from 'lucide-react';\nimport { uploadFileToFirebaseStorage } from '@/app/actions';\nimport { auth } from '@/utils/firebaseClient';\n\nconst backgroundColors = [\n  '#ffffff', '#ffadad', '#ffd6a5', '#fdffb6', '#caffbf', '#9bf6ff',\n  '#a0c4ff', '#bdb2ff', '#ffc6ff', '#fffffc', '#f1f1f1', '#e0e0e0'\n];\n\nconst fontStyles = [\n    { name: 'Default', style: 'font-body' },\n    { name: 'Cursive', style: 'font-cursive' },\n    { name: 'Calligraphy', style: 'font-calligraphy' },\n    { name: 'Italiano', style: 'font-italiano' }\n];\n\nexport function TextPostForm({ data, onDataChange }: { data: any, onDataChange: (data: any) => void }) {\n    const [isFetchingLocation, setIsFetchingLocation] = useState(false);\n    \n    // Local state for image preview before it's uploaded and the final URL is stored in the parent.\n    const [bgImagePreview, setBgImagePreview] = useState<string | null>(data.backgroundImage || null);\n    const [isUploading, setIsUploading] = useState(false);\n    \n    // Derived state from props for the textarea background\n    const currentBg = data.backgroundImage || data.backgroundColor || '#ffffff';\n\n    const handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        onDataChange({ ...data, [e.target.name]: e.target.value });\n    };\n\n    const handleBgColorChange = (color: string) => {\n        setBgImagePreview(null);\n        onDataChange({ ...data, backgroundColor: color, backgroundImage: null });\n    };\n    \n    const handleImageBgChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            const file = e.target.files[0];\n            const user = auth.currentUser;\n            if (!user) {\n                alert(\"You must be logged in to upload images.\");\n                return;\n            }\n\n            setIsUploading(true);\n            const previewUrl = URL.createObjectURL(file);\n            setBgImagePreview(previewUrl);\n\n            try {\n                const formData = new FormData();\n                formData.append('file', file);\n                formData.append('userId', user.uid);\n                const result = await uploadFileToFirebaseStorage(formData);\n\n                if (result.success?.url) {\n                    onDataChange({ ...data, backgroundImage: result.success.url, backgroundColor: null });\n                } else {\n                    throw new Error(result.failure || \"Background image upload failed.\");\n                }\n            } catch (error: any) {\n                alert(error.message);\n                setBgImagePreview(null); // Clear preview on error\n            } finally {\n                setIsUploading(false);\n            }\n        }\n    };\n    \n    const handleFontStyleChange = (style: string) => {\n        onDataChange({ ...data, fontStyle: style });\n    }\n\n    const handleGetLocation = () => {\n        if (navigator.geolocation) {\n            setIsFetchingLocation(true);\n            navigator.geolocation.getCurrentPosition(async (position) => {\n                const { latitude, longitude } = position.coords;\n                try {\n                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\n                    const locationData = await response.json();\n                    const city = locationData.address.city || locationData.address.town || locationData.address.village;\n                    const country = locationData.address.country;\n                    if(city && country){\n                        onDataChange({ ...data, location: `${city}, ${country}` });\n                    } else {\n                         onDataChange({ ...data, location: 'Unknown Location' });\n                    }\n                } catch (error) {\n                    console.error(\"Error fetching location name:\", error);\n                    onDataChange({ ...data, location: 'Could not fetch name' });\n                } finally {\n                    setIsFetchingLocation(false);\n                }\n            }, (error) => {\n                console.error(\"Geolocation error:\", error.message);\n                if (error.code !== error.PERMISSION_DENIED) {\n                    alert(\"Could not get location. Please enable location services for this site.\");\n                }\n                setIsFetchingLocation(false);\n            });\n        } else {\n            alert(\"Geolocation is not supported by this browser.\");\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col gap-4\">\n            <textarea\n                name=\"content\"\n                className={`input-glass w-full min-h-[250px] text-2xl p-6 text-center flex items-center justify-center rounded-2xl ${data.fontStyle || 'font-body'}`}\n                placeholder=\"What's on your mind?\"\n                value={data.content || ''}\n                onChange={handleTextChange}\n                style={{\n                    backgroundColor: data.backgroundImage ? 'transparent' : data.backgroundColor,\n                    backgroundImage: data.backgroundImage ? `url(${data.backgroundImage})` : 'none',\n                    backgroundSize: 'cover',\n                    backgroundPosition: 'center',\n                }}\n            />\n            \n            <div className=\"relative\">\n                <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"location\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"Add location...\" value={data.location || ''} onChange={handleTextChange} />\n                 <button type=\"button\" onClick={handleGetLocation} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-accent-cyan\" disabled={isFetchingLocation}>\n                    {isFetchingLocation ? <Loader className=\"animate-spin\" size={16} /> : <Locate size={16} />}\n                </button>\n            </div>\n             <div className=\"relative\">\n                <Smile className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"mood\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"How are you feeling?\" value={data.mood || ''} onChange={handleTextChange} />\n            </div>\n\n            <div className=\"space-y-3\">\n                 <h4 className=\"font-bold text-sm text-accent-cyan\">Font Style</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                    {fontStyles.map(font => (\n                        <button key={font.name} type=\"button\" onClick={() => handleFontStyleChange(font.style)} className={`btn-glass text-xs ${data.fontStyle === font.style ? 'bg-accent-cyan text-black' : ''}`}>\n                            {font.name}\n                        </button>\n                    ))}\n                </div>\n\n                <h4 className=\"font-bold text-sm text-accent-cyan\">Background Color</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                    {backgroundColors.map(color => (\n                        <button type=\"button\" key={color} onClick={() => handleBgColorChange(color)} className=\"w-8 h-8 rounded-full border-2\" style={{ backgroundColor: color, borderColor: currentBg === color ? 'var(--accent-pink)' : 'transparent' }} />\n                    ))}\n                </div>\n\n                <h4 className=\"font-bold text-sm text-accent-cyan\">Or Upload Background Image</h4>\n                <input type=\"file\" accept=\"image/*\" onChange={handleImageBgChange} className=\"block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-accent-pink/20 file:text-accent-pink hover:file:bg-accent-pink/40\"/>\n                {isUploading && <p className=\"text-sm text-accent-cyan animate-pulse\">Uploading background...</p>}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/FilterCamera.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FaceLandmarker, FilesetResolver, DrawingUtils } from \"@mediapipe/tasks-vision\";\nimport { X, Glasses, Brush, Package, PartyPopper, Zap } from 'lucide-react';\n\nlet faceLandmarker: FaceLandmarker;\nlet lastVideoTime = -1;\n\n// Image assets for filters\nconst sunglassesImg = new Image();\nsunglassesImg.src = '/filters/sunglasses.png';\nconst hatImg = new Image();\nhatImg.src = '/filters/hat.png';\n\nconst setupFaceLandmarker = async () => {\n    if (faceLandmarker) return;\n    const vision = await FilesetResolver.forVisionTasks(\n        \"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm\"\n    );\n    faceLandmarker = await FaceLandmarker.createFromOptions(vision, {\n        baseOptions: {\n            modelAssetPath: `/models/face_landmarker.task`,\n            delegate: \"GPU\"\n        },\n        outputFaceBlendshapes: true,\n        runningMode: \"VIDEO\",\n        numFaces: 1\n    });\n};\n\ntype FilterType = \"None\" | \"Sunglasses\" | \"Blush & Lipstick\" | \"Funny Nose\" | \"Hat\" | \"Zap\";\n\nexport function FilterCamera({ onCapture }: { onCapture: (image: string) => void }) {\n    const videoRef = useRef<HTMLVideoElement>(null);\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [isCameraReady, setIsCameraReady] = useState(false);\n    const [activeFilter, setActiveFilter] = useState<FilterType>(\"None\");\n\n    useEffect(() => {\n        const enableWebcam = async () => {\n            try {\n                await setupFaceLandmarker();\n                const stream = await navigator.mediaDevices.getUserMedia({\n                    video: { width: 1280, height: 720 },\n                });\n                if (videoRef.current) {\n                    videoRef.current.srcObject = stream;\n                    videoRef.current.addEventListener('loadeddata', predictWebcam);\n                }\n                setIsCameraReady(true);\n            } catch (err) {\n                console.error(\"Failed to start camera:\", err);\n            }\n        };\n\n        enableWebcam();\n\n        return () => {\n            const stream = videoRef.current?.srcObject as MediaStream;\n            stream?.getTracks().forEach(track => track.stop());\n            if (videoRef.current) {\n                 videoRef.current.removeEventListener('loadeddata', predictWebcam);\n            }\n        }\n    }, []);\n\n    const drawFilter = (ctx: CanvasRenderingContext2D, landmarks: any[], videoWidth: number, videoHeight: number) => {\n        switch (activeFilter) {\n            case \"Sunglasses\":\n                const leftEye = landmarks[130];\n                const rightEye = landmarks[359];\n                if (leftEye && rightEye) {\n                    const eyeCenter = { x: (leftEye.x + rightEye.x) / 2 * videoWidth, y: (leftEye.y + rightEye.y) / 2 * videoHeight };\n                    const eyeDistance = Math.sqrt(Math.pow((rightEye.x - leftEye.x) * videoWidth, 2) + Math.pow((rightEye.y - leftEye.y) * videoHeight, 2));\n                    const glassesWidth = eyeDistance * 2.5;\n                    const angle = Math.atan2((rightEye.y - leftEye.y) * videoHeight, (rightEye.x - leftEye.x) * videoWidth);\n\n                    ctx.save();\n                    ctx.translate(eyeCenter.x, eyeCenter.y);\n                    ctx.rotate(angle);\n                    ctx.drawImage(sunglassesImg, -glassesWidth / 2, -glassesWidth * 0.2, glassesWidth, glassesWidth * 0.4);\n                    ctx.restore();\n                }\n                break;\n            \n            case \"Blush & Lipstick\":\n                const lipLandmarks = [61, 146, 91, 181, 84, 17, 314, 405, 321, 375, 291, 409, 270, 269, 267, 0, 37, 39, 40, 185, 61].map(i => landmarks[i]);\n                const leftCheek = landmarks[117];\n                const rightCheek = landmarks[346];\n\n                if (lipLandmarks.every(p => p)) {\n                    // Draw lipstick\n                    ctx.fillStyle = 'rgba(255, 0, 100, 0.5)';\n                    ctx.beginPath();\n                    ctx.moveTo(lipLandmarks[0].x * videoWidth, lipLandmarks[0].y * videoHeight);\n                    for (let i = 1; i < lipLandmarks.length; i++) {\n                        ctx.lineTo(lipLandmarks[i].x * videoWidth, lipLandmarks[i].y * videoHeight);\n                    }\n                    ctx.closePath();\n                    ctx.fill();\n\n                    // Add sparkles\n                    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n                    for (let i = 0; i < 3; i++) { // Draw 3 sparkles\n                        const landmarkIndex = Math.floor(Math.random() * lipLandmarks.length);\n                        const sparklePoint = lipLandmarks[landmarkIndex];\n                        const sparkleX = sparklePoint.x * videoWidth + (Math.random() - 0.5) * 5;\n                        const sparkleY = sparklePoint.y * videoHeight + (Math.random() - 0.5) * 5;\n                        ctx.beginPath();\n                        ctx.arc(sparkleX, sparkleY, Math.random() * 2 + 1, 0, 2 * Math.PI);\n                        ctx.fill();\n                    }\n                }\n                if (leftCheek && rightCheek) {\n                    ctx.fillStyle = 'rgba(255, 105, 180, 0.4)';\n                    ctx.beginPath();\n                    ctx.arc(leftCheek.x * videoWidth, leftCheek.y * videoHeight, 25, 0, 2 * Math.PI);\n                    ctx.fill();\n                    ctx.beginPath();\n                    ctx.arc(rightCheek.x * videoWidth, rightCheek.y * videoHeight, 25, 0, 2 * Math.PI);\n                    ctx.fill();\n                }\n                break;\n\n             case \"Funny Nose\":\n                const noseTip = landmarks[4];\n                if (noseTip) {\n                    const wiggleX = (Math.random() - 0.5) * 4; // Small random horizontal offset\n                    const wiggleY = (Math.random() - 0.5) * 4; // Small random vertical offset\n                    ctx.fillStyle = 'red';\n                    ctx.beginPath();\n                    ctx.arc(noseTip.x * videoWidth + wiggleX, noseTip.y * videoHeight + wiggleY, 20, 0, 2 * Math.PI);\n                    ctx.fill();\n                }\n                break;\n\n            case \"Hat\":\n                const forehead = landmarks[10];\n                const leftBrow = landmarks[70];\n                const rightBrow = landmarks[300];\n                if (forehead && leftBrow && rightBrow) {\n                    const browWidth = Math.abs(rightBrow.x - leftBrow.x) * videoWidth;\n                    const hatWidth = browWidth * 1.8;\n                    const hatHeight = hatImg.height * (hatWidth / hatImg.width)\n\n                    ctx.save();\n                    ctx.translate(forehead.x * videoWidth, forehead.y * videoHeight);\n                    ctx.drawImage(hatImg, -hatWidth / 2, -hatHeight * 0.9, hatWidth, hatHeight);\n                    ctx.restore();\n                }\n                break;\n\n            case \"Zap\":\n                const faceOval = [10, 338, 297, 332, 284, 251, 389, 356, 454, 323, 361, 288, 397, 365, 379, 378, 400, 377, 152, 148, 176, 149, 150, 136, 172, 58, 132, 93, 234, 127, 162, 21, 54, 103, 67, 109, 10].map(i => landmarks[i]);\n\n                if (faceOval.every(p => p)) {\n                    ctx.strokeStyle = '#00FFFF'; // Cyan color for lightning\n                    ctx.lineWidth = 3;\n                    ctx.shadowColor = '#00FFFF';\n                    ctx.shadowBlur = 10;\n\n                    for (let i = 0; i < 2; i++) { // Two bolts\n                        const startPoint = faceOval[Math.floor(Math.random() * faceOval.length)];\n                        const endPoint = { x: startPoint.x + (Math.random() - 0.5) * 0.4, y: startPoint.y + (Math.random() - 0.5) * 0.4 };\n                        \n                        ctx.beginPath();\n                        ctx.moveTo(startPoint.x * videoWidth, startPoint.y * videoHeight);\n\n                        // Jagged line\n                        for (let j = 0; j < 5; j++) {\n                            const nextX = startPoint.x + (endPoint.x - startPoint.x) * (j / 4) + (Math.random() - 0.5) * 0.05;\n                            const nextY = startPoint.y + (endPoint.y - startPoint.y) * (j / 4) + (Math.random() - 0.5) * 0.05;\n                            ctx.lineTo(nextX * videoWidth, nextY * videoHeight);\n                        }\n                        ctx.stroke();\n                    }\n                }\n                break;\n        }\n    }\n\n    const predictWebcam = () => {\n        if (!videoRef.current || !canvasRef.current || !faceLandmarker) return;\n\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return;\n        \n        canvas.width = video.videoWidth;\n        canvas.height = video.videoHeight;\n        \n        if (lastVideoTime !== video.currentTime) {\n            lastVideoTime = video.currentTime;\n            const results = faceLandmarker.detectForVideo(video, performance.now());\n\n            ctx.save();\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.drawImage(video, 0, 0, video.videoWidth, video.videoHeight);\n\n            if (results.faceLandmarks && results.faceLandmarks.length > 0) {\n                drawFilter(ctx, results.faceLandmarks[0], video.videoWidth, video.videoHeight);\n            }\n            ctx.restore();\n        }\n\n        requestAnimationFrame(predictWebcam);\n    };\n\n    const handleCapture = () => {\n        if (canvasRef.current) {\n            const image = canvasRef.current.toDataURL(\"image/jpeg\");\n            onCapture(image);\n        }\n    };\n\n    const FilterButton = ({ filter, icon: Icon, label }: { filter: FilterType, icon: React.ElementType, label: string}) => (\n         <button onClick={() => setActiveFilter(filter)} className={`flex flex-col items-center gap-1 p-2 rounded-lg ${activeFilter === filter ? 'bg-accent-pink/30' : ''}`}>\n            <Icon size={24} className=\"text-white\" />\n            <span className=\"text-xs text-white\">{label}</span>\n        </button>\n    );\n\n    return (\n        <div className=\"relative w-full aspect-[9/16] bg-black rounded-lg overflow-hidden flex flex-col justify-between\">\n            <div className=\"relative w-full h-full\">\n                <video ref={videoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\n                <canvas ref={canvasRef} className=\"absolute top-0 left-0 w-full h-full\" />\n                {!isCameraReady && (\n                    <div className=\"absolute inset-0 bg-black/80 flex flex-col items-center justify-center\">\n                        <p className=\"text-white text-lg\">Starting camera...</p>\n                    </div>\n                )}\n            </div>\n            \n            <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-black/30 backdrop-blur-sm\">\n                 <div className=\"flex justify-center items-center gap-3\">\n                     <FilterButton filter=\"None\" icon={X} label=\"None\" />\n                     <FilterButton filter=\"Sunglasses\" icon={Glasses} label=\"Shades\" />\n                     <FilterButton filter=\"Blush & Lipstick\" icon={Brush} label=\"Makeup\" />\n                     <FilterButton filter=\"Funny Nose\" icon={Package} label=\"Clown\" />\n                     <FilterButton filter=\"Hat\" icon={PartyPopper} label=\"Party\" />\n                     <FilterButton filter=\"Zap\" icon={Zap} label=\"Zap\" />\n                 </div>\n                <div className=\"flex justify-center mt-4\">\n                    <button \n                        onClick={handleCapture}\n                        className=\"w-16 h-16 rounded-full bg-white border-4 border-accent-pink focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-accent-pink\"\n                        aria-label=\"Capture with filter\"\n                        disabled={!isCameraReady}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 805, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/MediaPostForm.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState, useRef, useCallback } from 'react';\nimport { UploadCloud, X, MapPin, Smile, Hash, AtSign, Locate, Loader, Camera, Wand2 } from 'lucide-react';\nimport { FilterCamera } from './FilterCamera';\n\nexport function MediaPostForm({ data, onDataChange }: { data: any, onDataChange: (data: any) => void }) {\n    const [isDragging, setIsDragging] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const [isFetchingLocation, setIsFetchingLocation] = useState(false);\n    const [uploadError, setUploadError] = useState<string | null>(null);\n    const [showFilterCamera, setShowFilterCamera] = useState(false);\n\n    const mediaPreviews = data.mediaUrl || [];\n\n    const handleFileSelection = (file: File) => {\n        if (file.size > 200 * 1024 * 1024) {\n            setUploadError(`File ${file.name} is too large (max 200MB).`);\n            return;\n        }\n\n        const previewUrl = URL.createObjectURL(file);\n        const newMediaUrls = [...(data.mediaUrl || []), previewUrl];\n        const newMediaFiles = [...(data.mediaFiles || []), file];\n\n        const isVideo = file.type.startsWith('video/');\n        const updateData: any = { mediaUrl: newMediaUrls, mediaFiles: newMediaFiles, isVideo };\n\n        if (isVideo) {\n            const video = document.createElement('video');\n            video.preload = 'metadata';\n            video.onloadedmetadata = () => {\n                window.URL.revokeObjectURL(video.src);\n                updateData.isPortrait = video.videoHeight > video.videoWidth;\n                updateData.videoDuration = video.duration;\n                onDataChange({ ...data, ...updateData });\n            };\n            video.src = previewUrl;\n        } else {\n             updateData.isPortrait = false;\n             updateData.videoDuration = 0;\n             onDataChange({ ...data, ...updateData });\n        }\n    }\n    \n    const processFiles = (files: FileList | null) => {\n        if (!files) return;\n        const filesToProcess = Array.from(files).filter(file => \n            file.type.startsWith('image/') || \n            file.type.startsWith('video/')\n        );\n        if (filesToProcess.length === 0) return;\n\n        for (const file of filesToProcess) {\n            handleFileSelection(file);\n        }\n    };\n    \n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        processFiles(e.target.files);\n    };\n\n    const handleCaptureFromFilter = (image: string) => {\n        const byteString = atob(image.split(',')[1]);\n        const mimeString = image.split(',')[0].split(':')[1].split(';')[0];\n        const ab = new ArrayBuffer(byteString.length);\n        const ia = new Uint8Array(ab);\n        for (let i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n        const blob = new Blob([ab], { type: mimeString });\n        const file = new File([blob], `filter-capture-${Date.now()}.jpg`, { type: 'image/jpeg' });\n        \n        handleFileSelection(file);\n        setShowFilterCamera(false);\n    };\n    \n    const removeMedia = (urlToRemove: string) => {\n        const indexToRemove = data.mediaUrl.findIndex((url: string) => url === urlToRemove);\n        if (indexToRemove === -1) return;\n\n        URL.revokeObjectURL(urlToRemove);\n\n        const newMediaUrls = data.mediaUrl.filter((_: any, index: number) => index !== indexToRemove);\n        const newMediaFiles = data.mediaFiles.filter((_: any, index: number) => index !== indexToRemove);\n        \n        onDataChange({ ...data, mediaUrl: newMediaUrls, mediaFiles: newMediaFiles });\n    };\n\n    const handleTextChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n        onDataChange({ ...data, [e.target.name]: e.target.value });\n    };\n\n    const handleDragEnter = useCallback((e: React.DragEvent<HTMLDivElement>) => { e.preventDefault(); e.stopPropagation(); setIsDragging(true); }, []);\n    const handleDragLeave = useCallback((e: React.DragEvent<HTMLDivElement>) => { e.preventDefault(); e.stopPropagation(); setIsDragging(false); }, []);\n    const handleDragOver = useCallback((e: React.DragEvent<HTMLDivElement>) => { e.preventDefault(); e.stopPropagation(); }, []);\n    const handleDrop = useCallback((e: React.DragEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsDragging(false);\n        processFiles(e.dataTransfer.files);\n        e.dataTransfer.clearData();\n    }, []);\n\n    const handleGetLocation = () => {\n        setUploadError(null);\n        if (navigator.geolocation) {\n            setIsFetchingLocation(true);\n            navigator.geolocation.getCurrentPosition(async (position) => {\n                const { latitude, longitude } = position.coords;\n                try {\n                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\n                    const locationData = await response.json();\n                    const city = locationData.address.city || locationData.address.town || locationData.address.village;\n                    const country = locationData.address.country;\n                    if(city && country){\n                        onDataChange({ ...data, location: `${city}, ${country}` });\n                    } else {\n                         onDataChange({ ...data, location: 'Unknown Location' });\n                    }\n                } catch (error) {\n                    setUploadError('Could not fetch location name.');\n                } finally {\n                    setIsFetchingLocation(false);\n                }\n            }, (error) => {\n                if (error.code === error.PERMISSION_DENIED) {\n                    setUploadError('Location permission denied.');\n                } else {\n                     setUploadError('Could not get location.');\n                }\n                setIsFetchingLocation(false);\n            });\n        } else {\n            setUploadError(\"Geolocation is not supported by this browser.\");\n        }\n    };\n    \n    if (showFilterCamera) {\n        return <FilterCamera onCapture={handleCaptureFromFilter} />\n    }\n\n    return (\n        <div className=\"flex flex-col gap-4\">\n            <input type=\"text\" name=\"title\" placeholder=\"Title\" className=\"input-glass text-lg\" value={data.title || ''} onChange={handleTextChange} />\n            \n            <textarea\n                name=\"caption\"\n                className=\"input-glass w-full rounded-2xl\"\n                placeholder=\"Write a caption...\"\n                value={data.caption || ''}\n                onChange={handleTextChange}\n            />\n\n            <div className=\"relative\">\n                <Hash className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\n                <input type=\"text\" name=\"hashtags\" placeholder=\"#trending #vibes\" className=\"input-glass w-full pl-10\" value={data.hashtags || ''} onChange={handleTextChange} />\n            </div>\n            \n            <div className=\"relative\">\n                <AtSign className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\n                <input type=\"text\" name=\"mentions\" placeholder=\"@friend1 @friend2\" className=\"input-glass w-full pl-10\" value={data.mentions || ''} onChange={handleTextChange} />\n            </div>\n            \n            <div \n                className={`p-4 border-2 border-dashed rounded-2xl text-center transition-colors duration-300 ${isDragging ? 'border-accent-pink bg-accent-pink/10' : 'border-accent-cyan/30'}`}\n                onDragEnter={handleDragEnter}\n                onDragLeave={handleDragLeave}\n                onDragOver={handleDragOver}\n                onDrop={handleDrop}\n            >\n                <div className=\"flex flex-col items-center justify-center gap-2 mx-auto\">\n                    <UploadCloud className={`transition-transform duration-300 ${isDragging ? 'scale-110' : ''}`} />\n                    <p className=\"text-sm text-gray-400\">{isDragging ? 'Drop your files here!' : 'Drag & drop files or click an option below'}</p>\n                     <div className=\"flex gap-2 mt-2\">\n                        <button type=\"button\" className=\"btn-glass\" onClick={() => fileInputRef.current?.click()}>\n                            From Device\n                        </button>\n                         <button type=\"button\" className=\"btn-glass flex items-center gap-2\" onClick={() => setShowFilterCamera(true)}>\n                            <Camera size={16}/> Camera\n                        </button>\n                        <button type=\"button\" className=\"btn-glass flex items-center gap-2\" onClick={() => setShowFilterCamera(true)}>\n                            <Wand2 size={16}/> Filters\n                        </button>\n                    </div>\n                </div>\n                <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" multiple accept=\"image/*,video/*\" />\n                {uploadError && <p className=\"text-red-400 text-xs mt-2\">{uploadError}</p>}\n                \n                 <div className=\"mt-4 grid grid-cols-3 md:grid-cols-4 gap-2\">\n                    {mediaPreviews.map((url: string, index: number) => {\n                        const isVideo = data.mediaFiles[index]?.type.startsWith('video/');\n                        return (\n                            <div key={url} className=\"relative group aspect-square\">\n                                {isVideo ? (\n                                    <video src={url} className=\"w-full h-full object-cover rounded-lg\" />\n                                ) : (\n                                    <img src={url} alt={`preview ${index}`} className=\"w-full h-full object-cover rounded-lg\" />\n                                )}\n                                <button type=\"button\" onClick={() => removeMedia(url)} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\n                                    <X size={16} />\n                                </button>\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n\n            <textarea\n                name=\"description\"\n                placeholder=\"Add a detailed description (e.g., your video script, story behind the photo, or more info). This helps us feature your content!\"\n                className=\"input-glass w-full rounded-2xl min-h-[120px]\"\n                value={data.description || ''}\n                onChange={handleTextChange}\n            />\n            \n            <div className=\"relative\">\n                <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"location\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"Add location...\" value={data.location || ''} onChange={handleTextChange} />\n                <button type=\"button\" onClick={handleGetLocation} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-accent-cyan\" disabled={isFetchingLocation}>\n                    {isFetchingLocation ? <Loader className=\"animate-spin\" size={16} /> : <Locate size={16} />}\n                </button>\n            </div>\n             <div className=\"relative\">\n                <Smile className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"mood\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"How are you feeling?\" value={data.mood || ''} onChange={handleTextChange} />\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1348, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/PollPostForm.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState } from 'react';\nimport { X, Plus, MapPin, Smile } from 'lucide-react';\n\nexport function PollPostForm({ data, onDataChange }: { data: any, onDataChange: (data: any) => void }) {\n    const [options, setOptions] = useState<any[]>(data.options || [{ text: '' }, { text: '' }]);\n\n    const updateOptions = (newOptions: any[]) => {\n        setOptions(newOptions);\n        onDataChange({ ...data, options: newOptions });\n    };\n    \n    const handleTextChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        onDataChange({ ...data, [e.target.name]: e.target.value });\n    };\n\n    const handleOptionTextChange = (index: number, text: string) => {\n        const newOptions = [...options];\n        newOptions[index].text = text;\n        updateOptions(newOptions);\n    };\n\n    const addOption = () => {\n        if (options.length < 4) {\n            updateOptions([...options, { text: '' }]);\n        }\n    };\n\n    const removeOption = (index: number) => {\n        if (options.length > 2) {\n            updateOptions(options.filter((_, i) => i !== index));\n        }\n    };\n    \n    return (\n        <div className=\"flex flex-col gap-4\">\n            <input\n                type=\"text\"\n                name=\"question\"\n                className=\"input-glass text-lg\"\n                placeholder=\"Ask a question...\"\n                value={data.question || ''}\n                onChange={handleTextChange}\n            />\n            \n            <div className=\"space-y-3\">\n                {options.map((option, index) => (\n                    <div key={index} className=\"flex items-center gap-2\">\n                        <input\n                            type=\"text\"\n                            className=\"input-glass flex-1\"\n                            placeholder={`Option ${index + 1}`}\n                            value={option.text}\n                            onChange={(e) => handleOptionTextChange(index, e.target.value)}\n                        />\n                        {options.length > 2 && (\n                            <button type=\"button\" onClick={() => removeOption(index)} className=\"p-2 text-red-400 hover:text-red-300\">\n                                <X size={20} />\n                            </button>\n                        )}\n                    </div>\n                ))}\n            </div>\n            \n            {options.length < 4 && (\n                <button type=\"button\" onClick={addOption} className=\"btn-glass text-sm self-start flex items-center gap-2\">\n                    <Plus size={16} /> Add Option\n                </button>\n            )}\n\n            <input type=\"text\" name=\"hashtags\" className=\"input-glass w-full mt-2\" placeholder=\"Add #hashtags...\" value={data.hashtags || ''} onChange={handleTextChange}/>\n\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAFA;;;;AAIO,SAAS,aAAa,EAAE,IAAI,EAAE,YAAY,EAAoD;IACjG,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAQ,KAAK,OAAO,IAAI;QAAC;YAAE,MAAM;QAAG;QAAG;YAAE,MAAM;QAAG;KAAE;IAE1F,MAAM,gBAAgB,CAAC;QACnB,WAAW;QACX,aAAa;YAAE,GAAG,IAAI;YAAE,SAAS;QAAW;IAChD;IAEA,MAAM,mBAAmB,CAAC;QACtB,aAAa;YAAE,GAAG,IAAI;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;IAC5D;IAEA,MAAM,yBAAyB,CAAC,OAAe;QAC3C,MAAM,aAAa;eAAI;SAAQ;QAC/B,UAAU,CAAC,MAAM,CAAC,IAAI,GAAG;QACzB,cAAc;IAClB;IAEA,MAAM,YAAY;QACd,IAAI,QAAQ,MAAM,GAAG,GAAG;YACpB,cAAc;mBAAI;gBAAS;oBAAE,MAAM;gBAAG;aAAE;QAC5C;IACJ;IAEA,MAAM,eAAe,CAAC;QAClB,IAAI,QAAQ,MAAM,GAAG,GAAG;YACpB,cAAc,QAAQ,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;QACjD;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBACG,MAAK;gBACL,MAAK;gBACL,WAAU;gBACV,aAAY;gBACZ,OAAO,KAAK,QAAQ,IAAI;gBACxB,UAAU;;;;;;0BAGd,8OAAC;gBAAI,WAAU;0BACV,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBAClB,8OAAC;wBAAgB,WAAU;;0CACvB,8OAAC;gCACG,MAAK;gCACL,WAAU;gCACV,aAAa,CAAC,OAAO,EAAE,QAAQ,GAAG;gCAClC,OAAO,OAAO,IAAI;gCAClB,UAAU,CAAC,IAAM,uBAAuB,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;4BAEhE,QAAQ,MAAM,GAAG,mBACd,8OAAC;gCAAO,MAAK;gCAAS,SAAS,IAAM,aAAa;gCAAQ,WAAU;0CAChE,cAAA,8OAAC,iMAAC;oCAAC,MAAM;;;;;;;;;;;;uBAVX;;;;;;;;;;YAiBjB,QAAQ,MAAM,GAAG,mBACd,8OAAC;gBAAO,MAAK;gBAAS,SAAS;gBAAW,WAAU;;kCAChD,8OAAC,0MAAI;wBAAC,MAAM;;;;;;oBAAM;;;;;;;0BAI1B,8OAAC;gBAAM,MAAK;gBAAO,MAAK;gBAAW,WAAU;gBAA0B,aAAY;gBAAmB,OAAO,KAAK,QAAQ,IAAI;gBAAI,UAAU;;;;;;;;;;;;AAIxJ"}},
    {"offset": {"line": 1504, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/LivePostForm.tsx"],"sourcesContent":["\"use client\";\nimport React from 'react';\nimport { Radio } from 'lucide-react';\n\nexport function LivePostForm({ data, onDataChange }: { data: any, onDataChange: (data: any) => void }) {\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onDataChange({ ...data, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div className=\"flex flex-col gap-4\">\n        <div className=\"flex flex-col items-center gap-4 text-center\">\n            <Radio className=\"text-red-500 animate-pulse\" size={48} />\n            <h3 className=\"text-xl font-bold text-white\">You're about to go live!</h3>\n            <p className=\"text-sm text-gray-400\">Give your stream a title to let people know what's up.</p>\n            <input\n                type=\"text\"\n                name=\"title\"\n                className=\"input-glass w-full\"\n                placeholder=\"Live Stream Title (e.g., Sunset Vibes, Q&A)\"\n                value={data.title || ''}\n                onChange={handleChange}\n            />\n        </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,aAAa,EAAE,IAAI,EAAE,YAAY,EAAoD;IACnG,MAAM,eAAe,CAAC;QACpB,aAAa;YAAE,GAAG,IAAI;YAAE,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC,KAAK;QAAC;IAC1D;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BACX,8OAAC,6MAAK;oBAAC,WAAU;oBAA6B,MAAM;;;;;;8BACpD,8OAAC;oBAAG,WAAU;8BAA+B;;;;;;8BAC7C,8OAAC;oBAAE,WAAU;8BAAwB;;;;;;8BACrC,8OAAC;oBACG,MAAK;oBACL,MAAK;oBACL,WAAU;oBACV,aAAY;oBACZ,OAAO,KAAK,KAAK,IAAI;oBACrB,UAAU;;;;;;;;;;;;;;;;;AAK1B"}},
    {"offset": {"line": 1577, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/forms/FlashPostForm.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport { X, UploadCloud, Music as MusicIcon, MapPin, Smile, Camera, Image as ImageIcon, Zap, Locate, Loader, Wand2 } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { getFirestore, collection, onSnapshot, query, orderBy, getDoc, doc } from 'firebase/firestore';\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { auth, app } from '@/utils/firebaseClient';\nimport { FilterCamera } from './FilterCamera';\n\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\nexport function FlashPostForm({ data, onDataChange }: { data: any, onDataChange: (data: any) => void }) {\n    const [mediaPreview, setMediaPreview] = useState<string | null>(data.mediaUrl ? (Array.isArray(data.mediaUrl) ? data.mediaUrl[0] : data.mediaUrl) : null);\n    const [showSongPicker, setShowSongPicker] = useState(false);\n    const [appSongs, setAppSongs] = useState<any[]>([]);\n    \n    const [showFilterCamera, setShowFilterCamera] = useState(false);\n    const [isUploading, setIsUploading] = useState(false);\n    const [uploadError, setUploadError] = useState('');\n    const [isFetchingLocation, setIsFetchingLocation] = useState(false);\n\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (data.songId && !data.song) {\n            const fetchSong = async () => {\n                const songDoc = await getDoc(doc(db, \"songs\", data.songId));\n                if (songDoc.exists()) {\n                    handleSelectSong({ id: songDoc.id, ...songDoc.data() });\n                }\n            };\n            fetchSong();\n        }\n\n        const q = query(collection(db, \"songs\"), orderBy(\"createdAt\", \"desc\"));\n        const unsub = onSnapshot(q, (snapshot) => {\n            setAppSongs(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));\n        });\n        return () => unsub();\n    }, [data.songId]);\n\n    const handleFileUpload = async (file: File) => {\n        const user = auth.currentUser;\n        if (!user) {\n            setUploadError(\"You must be logged in to upload files.\");\n            return;\n        }\n\n        if (file.size > 20 * 1024 * 1024) { // 20MB limit for Flashes\n            setUploadError(\"File is too large for a Flash (max 20MB).\");\n            return;\n        }\n\n        setIsUploading(true);\n        setUploadError('');\n        const previewUrl = URL.createObjectURL(file);\n        setMediaPreview(previewUrl);\n\n        try {\n            const fileName = `${user.uid}-${Date.now()}-${file.name}`;\n            const fileRef = storageRef(storage, `flashes/${user.uid}/${fileName}`);\n            \n            const snapshot = await uploadBytes(fileRef, file);\n            const downloadURL = await getDownloadURL(snapshot.ref);\n\n            onDataChange({ ...data, mediaUrl: [downloadURL] });\n            setMediaPreview(downloadURL);\n\n        } catch (error: any) {\n            console.error(\"Upload failed:\", error);\n            setUploadError(error.message);\n            setMediaPreview(null); // Clear preview on error\n        } finally {\n            setIsUploading(false);\n            // URL.revokeObjectURL(previewUrl); // Keep for display\n        }\n    };\n\n    const handleCaptureFromFilter = (image: string) => {\n        const byteString = atob(image.split(',')[1]);\n        const mimeString = image.split(',')[0].split(':')[1].split(';')[0];\n        const ab = new ArrayBuffer(byteString.length);\n        const ia = new Uint8Array(ab);\n        for (let i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n        const blob = new Blob([ab], { type: mimeString });\n        const file = new File([blob], `filter-capture-${Date.now()}.jpg`, { type: 'image/jpeg' });\n        \n        handleFileUpload(file);\n        setShowFilterCamera(false);\n    };\n\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            handleFileUpload(e.target.files[0]);\n        }\n    };\n    \n    const removeMedia = () => {\n        setMediaPreview(null);\n        onDataChange({ ...data, mediaUrl: [] });\n    };\n\n    const handleTextChange = (e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n        onDataChange({ ...data, [e.target.name]: e.target.value });\n    };\n\n    const handleSelectSong = (song: any) => {\n        onDataChange({ ...data, song: {\n            id: song.id,\n            name: song.title,\n            artists: [song.artist],\n            album: song.album,\n            albumArt: song.albumArtUrl,\n            preview_url: song.audioUrl,\n            snippetStart: 0,\n            snippetEnd: 15,\n        } });\n        setShowSongPicker(false);\n    };\n\n     const handleGetLocation = () => {\n        setUploadError(\"\");\n        if (navigator.geolocation) {\n            setIsFetchingLocation(true);\n            navigator.geolocation.getCurrentPosition(async (position) => {\n                const { latitude, longitude } = position.coords;\n                try {\n                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`);\n                    const locationData = await response.json();\n                    const city = locationData.address.city || locationData.address.town || locationData.address.village;\n                    const country = locationData.address.country;\n                    if(city && country){\n                        onDataChange({ ...data, location: `${city}, ${country}` });\n                    } else {\n                         onDataChange({ ...data, location: 'Unknown Location' });\n                    }\n                } catch (error) {\n                    setUploadError(\"Could not fetch location name.\");\n                } finally {\n                    setIsFetchingLocation(false);\n                }\n            }, (error) => {\n                if (error.code === error.PERMISSION_DENIED) {\n                    setUploadError(\"Location permission denied.\");\n                } else {\n                    setUploadError(\"Could not get location.\");\n                }\n                setIsFetchingLocation(false);\n            });\n        } else {\n            setUploadError(\"Geolocation is not supported by this browser.\");\n        }\n    };\n\n    if (showFilterCamera) {\n        return <FilterCamera onCapture={handleCaptureFromFilter} />\n    }\n\n    return (\n        <div className=\"flex flex-col gap-4\">\n            <textarea\n                name=\"caption\"\n                className=\"input-glass w-full rounded-2xl\"\n                placeholder=\"Add a caption...\"\n                value={data.caption || ''}\n                onChange={handleTextChange}\n            />\n\n            <div className=\"p-4 border-2 border-dashed border-accent-cyan/30 rounded-2xl text-center min-h-[200px] flex flex-col items-center justify-center\">\n                {isUploading && (\n                    <div className=\"flex flex-col items-center gap-2\">\n                        <Loader className=\"animate-spin text-accent-cyan\"/>\n                        <p className=\"text-sm text-accent-cyan\">Uploading...</p>\n                    </div>\n                )}\n                {!isUploading && !mediaPreview && (\n                    <div className=\"grid grid-cols-3 gap-2 w-full max-w-sm\">\n                        <button type=\"button\" className=\"btn-glass flex items-center justify-center gap-2\" onClick={() => fileInputRef.current?.click()}>\n                            <ImageIcon /> Gallery\n                        </button>\n                        <button type=\"button\" className=\"btn-glass flex items-center justify-center gap-2\" onClick={() => setShowFilterCamera(true)}>\n                            <Camera /> Camera\n                        </button>\n                        <button type=\"button\" className=\"btn-glass flex items-center justify-center gap-2\" onClick={() => setShowFilterCamera(true)}>\n                            <Wand2 /> Filters\n                        </button>\n                    </div>\n                )}\n                {mediaPreview && !isUploading && (\n                     <div className=\"relative group aspect-video\">\n                        {(mediaPreview.includes('.mp4') || mediaPreview.includes('.webm') || mediaPreview.startsWith('blob:')) ? (\n                            <video src={mediaPreview} className=\"w-full h-full object-contain rounded-lg\" controls/>\n                        ) : (\n                            <img src={mediaPreview} alt=\"preview\" className=\"w-full h-full object-contain rounded-lg\" />\n                        )}\n                        <button type=\"button\" onClick={removeMedia} className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 z-10\">\n                            <X size={16} />\n                        </button>\n                    </div>\n                )}\n                <input type=\"file\" ref={fileInputRef} onChange={handleFileChange} className=\"hidden\" accept=\"image/*,video/*\" />\n                {uploadError && <p className=\"text-red-400 text-xs mt-2\">{uploadError}</p>}\n            </div>\n            \n             <div className=\"relative\">\n                <MapPin className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"location\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"Add location...\" value={data.location || ''} onChange={handleTextChange} />\n                 <button type=\"button\" onClick={handleGetLocation} className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-accent-cyan\" disabled={isFetchingLocation}>\n                    {isFetchingLocation ? <Loader className=\"animate-spin\" size={16} /> : <Locate size={16} />}\n                </button>\n            </div>\n            <div className=\"relative\">\n                <Smile className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={20} />\n                <input type=\"text\" name=\"mood\" className=\"w-full rounded-xl p-3 pl-10 bg-black/20 text-white border-2 border-accent-cyan focus:outline-none focus:ring-2 focus:ring-accent-pink\" placeholder=\"How are you feeling?\" value={data.mood || ''} onChange={handleTextChange} />\n            </div>\n\n            <div className=\"mt-2\">\n                <button type=\"button\" className=\"w-full btn-glass flex justify-between items-center\" onClick={() => setShowSongPicker(v => !v)}>\n                    <span>{data.song ? `Song: ${data.song.name}` : 'Add a Song (Optional)'}</span>\n                    <MusicIcon size={16}/>\n                </button>\n                <motion.div\n                    initial={false}\n                    animate={{ height: showSongPicker ? 'auto' : 0, opacity: showSongPicker ? 1 : 0 }}\n                    className=\"overflow-hidden bg-black/20 rounded-b-lg\"\n                >\n                    <div className=\"p-2 max-h-48 overflow-y-auto\">\n                        {appSongs.map(song => (\n                            <div key={song.id} className=\"flex items-center gap-3 p-2 rounded cursor-pointer hover:bg-accent-cyan/10\" onClick={() => handleSelectSong(song)}>\n                                <img src={song.albumArtUrl} alt=\"album\" className=\"w-10 h-10 rounded\" />\n                                <div>\n                                    <div className=\"font-bold text-sm text-accent-cyan\">{song.title}</div>\n                                    <div className=\"text-xs text-gray-400\">{song.artist}</div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </motion.div>\n            </div>\n            \n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2140, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/Step1.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { ArrowRight } from 'lucide-react';\nimport { TextPostForm } from './forms/TextPostForm';\nimport { MediaPostForm } from './forms/MediaPostForm';\nimport { PollPostForm } from './forms/PollPostForm';\nimport { LivePostForm } from './forms/LivePostForm';\nimport { FlashPostForm } from './forms/FlashPostForm';\n\nexport default function Step1({ onNext, postType, postData }: { onNext: (data: any) => void; postType: string; postData: any }) {\n    const [formData, setFormData] = useState(postData);\n\n    const handleDataChange = (data: any) => {\n        setFormData((prev: any) => ({...prev, ...data}));\n    };\n\n    const renderForm = () => {\n        switch(postType) {\n            case 'text':\n                return <TextPostForm data={formData} onDataChange={handleDataChange} />;\n            case 'media':\n                return <MediaPostForm data={formData} onDataChange={handleDataChange} />;\n            case 'flash':\n                return <FlashPostForm data={formData} onDataChange={handleDataChange} />;\n            case 'poll':\n                return <PollPostForm data={formData} onDataChange={handleDataChange} />;\n            case 'live':\n                return <LivePostForm data={formData} onDataChange={handleDataChange} />;\n            default:\n                return <p>Select a post type</p>;\n        }\n    }\n\n    return (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n            <div className=\"glass-card p-8\">\n                <h2 className=\"text-2xl font-headline text-accent-pink mb-4\">Step 1: The Content</h2>\n                <p className=\"text-gray-400 mb-6\">Let's get the core of your vibe down. Fill in the details below.</p>\n                {renderForm()}\n            </div>\n            <div className=\"flex justify-end mt-8\">\n                <button className=\"btn-glass bg-accent-pink flex items-center gap-2\" onClick={() => onNext(formData)}>\n                    Next Step <ArrowRight />\n                </button>\n            </div>\n        </motion.div>\n    );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;;;;;;;;;AAUe,SAAS,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAoE;IAC1H,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,mBAAmB,CAAC;QACtB,YAAY,CAAC,OAAc,CAAC;gBAAC,GAAG,IAAI;gBAAE,GAAG,IAAI;YAAA,CAAC;IAClD;IAEA,MAAM,aAAa;QACf,OAAO;YACH,KAAK;gBACD,qBAAO,8OAAC,qKAAY;oBAAC,MAAM;oBAAU,cAAc;;;;;;YACvD,KAAK;gBACD,qBAAO,8OAAC,uKAAa;oBAAC,MAAM;oBAAU,cAAc;;;;;;YACxD,KAAK;gBACD,qBAAO,8OAAC,uKAAa;oBAAC,MAAM;oBAAU,cAAc;;;;;;YACxD,KAAK;gBACD,qBAAO,8OAAC,qKAAY;oBAAC,MAAM;oBAAU,cAAc;;;;;;YACvD,KAAK;gBACD,qBAAO,8OAAC,qKAAY;oBAAC,MAAM;oBAAU,cAAc;;;;;;YACvD;gBACI,qBAAO,8OAAC;8BAAE;;;;;;QAClB;IACJ;IAEA,qBACI,8OAAC,oMAAM,CAAC,GAAG;QAAC,SAAS;YAAE,SAAS;QAAE;QAAG,SAAS;YAAE,SAAS;QAAE;;0BACvD,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAA+C;;;;;;kCAC7D,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;oBACjC;;;;;;;0BAEL,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAO,WAAU;oBAAmD,SAAS,IAAM,OAAO;;wBAAW;sCACxF,8OAAC,gOAAU;;;;;;;;;;;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 2296, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,0RACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,mNAAgB,CAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 2356, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/calendar.tsx"],"sourcesContent":["\n\"use client\"\n\nimport * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker, type DayPickerProps, type CustomComponents } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = DayPickerProps\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside: \"text-muted-foreground opacity-50\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: (props) => <ChevronLeft className=\"h-4 w-4\" {...props} />,\n        IconRight: (props) => <ChevronRight className=\"h-4 w-4\" {...props} />,\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n"],"names":[],"mappings":";;;;;AAIA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;AAWA,SAAS,SAAS,EAChB,SAAS,EACT,UAAU,EACV,kBAAkB,IAAI,EACtB,GAAG,OACW;IACd,qBACE,8OAAC,+KAAS;QACR,iBAAiB;QACjB,WAAW,IAAA,yHAAE,EAAC,OAAO;QACrB,YAAY;YACV,QAAQ;YACR,OAAO;YACP,SAAS;YACT,eAAe;YACf,KAAK;YACL,YAAY,IAAA,yHAAE,EACZ,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAU,IACpC;YAEF,qBAAqB;YACrB,iBAAiB;YACjB,OAAO;YACP,UAAU;YACV,WACE;YACF,KAAK;YACL,MAAM;YACN,KAAK,IAAA,yHAAE,EACL,IAAA,oJAAc,EAAC;gBAAE,SAAS;YAAQ,IAClC;YAEF,cACE;YACF,WAAW;YACX,aAAa;YACb,cAAc;YACd,kBACE;YACF,YAAY;YACZ,GAAG,UAAU;QACf;QACA,YAAY;YACV,UAAU,CAAC,sBAAU,8OAAC,mOAAW;oBAAC,WAAU;oBAAW,GAAG,KAAK;;;;;;YAC/D,WAAW,CAAC,sBAAU,8OAAC,sOAAY;oBAAC,WAAU;oBAAW,GAAG,KAAK;;;;;;QACnE;QACC,GAAG,KAAK;;;;;;AAGf;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 2434, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,2KAAqB;AAErC,MAAM,iBAAiB,8KAAwB;AAE/C,MAAM,+BAAiB,mNAAgB,CAGrC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,yHAAE,EACX,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,8KAAwB,CAAC,WAAW"}},
    {"offset": {"line": 2476, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/create/Step3.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { ArrowLeft, CheckCircle, ShieldOff, Calendar as CalendarIcon, Eye } from 'lucide-react';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { getFirestore, collection, addDoc, serverTimestamp, Timestamp, doc, getDoc } from \"firebase/firestore\";\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { auth, app } from '@/utils/firebaseClient';\nimport { useRouter } from 'next/navigation';\n\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\n// Mapping from sub-category (creatorType) to main category\nconst creatorCategoryMap: { [key: string]: string } = {\n    'vlogs': 'daily', 'moments': 'daily', 'travel': 'daily', 'self': 'daily',\n    'art': 'creative', 'photos': 'creative', 'design': 'creative', 'writing': 'creative',\n    'gaming': 'play', 'challenges': 'play', 'comedy': 'play', 'reactions': 'play',\n    'tips': 'learn', 'tech': 'learn', 'study': 'learn', 'explainers': 'learn',\n    'music': 'culture', 'movies': 'culture', 'trends': 'culture', 'community': 'culture'\n};\nconst mainCategories = ['daily', 'creative', 'play', 'learn', 'culture'];\n\n\nfunction PostPreview({ postData }: { postData: any }) {\n    if (!postData) return null;\n    \n    const {\n        postType, content, question, pollOptions, mediaUrl, backgroundColor, fontStyle, title, caption,\n    } = postData;\n\n    return (\n        <div className=\"mb-6\">\n            <h4 className=\"font-bold text-sm text-accent-cyan mb-2 flex items-center gap-2\"><Eye size={16}/> Post Preview</h4>\n            <div className=\"border border-glass-border rounded-2xl p-4 bg-black/20\">\n                {postType === 'text' && (\n                     <div \n                        className={`w-full min-h-[100px] p-4 rounded-lg flex items-center justify-center text-center ${fontStyle || 'font-body'}`}\n                        style={{\n                            backgroundColor: backgroundColor || 'transparent',\n                            backgroundImage: postData.backgroundImage ? `url(${postData.backgroundImage})` : 'none',\n                            backgroundSize: 'cover',\n                            backgroundPosition: 'center',\n                        }}\n                    >\n                        <p className=\"text-lg\">{content}</p>\n                    </div>\n                )}\n\n                {(postType === 'media' || postType === 'flash') && mediaUrl && mediaUrl.length > 0 && (\n                    <>\n                        <p className=\"font-bold\">{title}</p>\n                        <p className=\"text-sm text-gray-400\">{caption}</p>\n                        <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                            {mediaUrl.map((url: string, index: number) => {\n                                const isVideo = postData.mediaFiles[index]?.type.startsWith('video/');\n                                if (isVideo) {\n                                    return <video key={index} src={url} className=\"w-full h-auto rounded-md aspect-square object-cover\" />;\n                                }\n                                return <img key={index} src={url} alt=\"preview\" className=\"w-full h-auto rounded-md aspect-square object-cover\" />\n                            })}\n                        </div>\n                    </>\n                )}\n\n                {postType === 'poll' && (\n                    <>\n                        <p className=\"font-bold mb-2\">{question}</p>\n                        <div className=\"flex flex-col gap-2\">\n                            {postData.options?.map((opt: any, idx: number) => (\n                                <div key={idx} className=\"p-2 border border-glass-border rounded-full text-sm text-center\">\n                                    {opt.text}\n                                </div>\n                            ))}\n                        </div>\n                    </>\n                )}\n                 {postType === 'live' && (\n                    <div className=\"text-center\">\n                        <p className=\"font-bold text-red-500\">LIVE</p>\n                        <p>{title || \"Live Stream\"}</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\n\nexport default function Step3({ onNext, onBack, postData }: { onNext?: (data: any) => void; onBack: () => void; postData: any }) {\n    const [isScheduling, setIsScheduling] = useState(false);\n    const [scheduleDate, setScheduleDate] = useState<Date | undefined>();\n    const [scheduleTime, setScheduleTime] = useState('12:00');\n    const [isPublishing, setIsPublishing] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const router = useRouter();\n\n    const uploadMedia = async (files: File[]) => {\n        const user = auth.currentUser;\n        if (!user) throw new Error(\"User not logged in\");\n\n        const uploadPromises = files.map(async (file) => {\n            const fileName = `${user.uid}-${Date.now()}-${file.name}`;\n            const fileRef = storageRef(storage, `posts/${user.uid}/${fileName}`);\n            const snapshot = await uploadBytes(fileRef, file);\n            return getDownloadURL(snapshot.ref);\n        });\n\n        return Promise.all(uploadPromises);\n    };\n\n    const handleSubmit = async () => {\n        setIsPublishing(true);\n        setError(null);\n        const user = auth.currentUser;\n        if (!user) {\n            alert(\"You must be logged in to post.\");\n            setIsPublishing(false);\n            return;\n        }\n\n        try {\n            let uploadedMediaUrls: string[] = [];\n            if (postData.mediaFiles && postData.mediaFiles.length > 0) {\n                uploadedMediaUrls = await uploadMedia(postData.mediaFiles);\n            }\n\n            const finalPostData = { ...postData, mediaUrl: uploadedMediaUrls };\n            \n            const userDocRef = doc(db, 'users', user.uid);\n            const userDocSnap = await getDoc(userDocRef);\n            if (!userDocSnap.exists()) throw new Error(\"User profile not found!\");\n            const userData = userDocSnap.data();\n\n            const creatorType = userData.creatorType || '';\n            let mainCategory = null;\n            if (mainCategories.includes(creatorType)) {\n                mainCategory = creatorType;\n            } else {\n                mainCategory = creatorCategoryMap[creatorType] || null;\n            }\n\n            let publishAt;\n            if (isScheduling && scheduleDate && postData.postType !== 'live') {\n                const [hours, minutes] = scheduleTime.split(':');\n                const finalDate = new Date(scheduleDate);\n                finalDate.setHours(parseInt(hours, 10));\n                finalDate.setMinutes(parseInt(minutes, 10));\n                publishAt = Timestamp.fromDate(finalDate);\n            } else {\n                publishAt = serverTimestamp();\n            }\n\n            const livekitRoomName = postData.postType === 'live' ? `${user.uid}-${Date.now()}` : null;\n            const collectionName = postData.postType === 'flash' ? 'flashes' : 'posts';\n            const hashtags = (postData.hashtags || \"\").split(' ').map((h:string) => h.replace('#', '')).filter(Boolean);\n            \n            const dataToSave: any = {\n                userId: user.uid,\n                displayName: userData.name || user.displayName,\n                username: userData.username,\n                avatar_url: userData.avatar_url || null,\n                type: postData.postType,\n                content: postData.content || postData.caption || postData.question || postData.title || \"\",\n                hashtags: hashtags,\n                createdAt: serverTimestamp(),\n                publishAt: publishAt,\n                notificationSent: false,\n                location: postData.location || null,\n                mood: postData.mood || null,\n                isPortrait: postData.isPortrait || false,\n                videoDuration: postData.videoDuration || 0,\n                isVideo: postData.isVideo || false,\n                viewCount: 0,\n                creatorType: creatorType,\n                category: mainCategory,\n                ...(postData.postType === 'text' && { \n                    backgroundColor: postData.backgroundColor || null, \n                    backgroundImage: postData.backgroundImage || null, \n                    fontStyle: postData.fontStyle || null \n                }),\n                ...(postData.postType === 'media' && { \n                    mediaUrl: finalPostData.mediaUrl && finalPostData.mediaUrl.length > 0 ? (finalPostData.mediaUrl.length > 1 ? finalPostData.mediaUrl : finalPostData.mediaUrl[0]) : null, \n                    title: postData.title || \"\", \n                    description: postData.description || \"\", \n                }),\n                ...(postData.postType === 'flash' && { \n                    mediaUrl: finalPostData.mediaUrl && finalPostData.mediaUrl.length > 0 ? finalPostData.mediaUrl[0] : null, \n                    song: postData.song || null, \n                    expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000), \n                    caption: postData.caption || \"\" \n                }),\n                ...(postData.postType === 'poll' && { pollOptions: postData.options.map((opt:any) => opt.text) }),\n                ...(postData.postType === 'live' && { \n                    livekitRoom: livekitRoomName, \n                    title: postData.title || \"Live Stream\", \n                    status: (isScheduling && postData.postType !== 'live') ? 'scheduled' : 'live'\n                }),\n            };\n            \n            await addDoc(collection(db, collectionName), dataToSave);\n            \n            if (postData.postType === 'live' && livekitRoomName) {\n                router.push(`/broadcast/${encodeURIComponent(livekitRoomName)}`);\n            } else {\n                router.push('/vibespace');\n            }\n\n        } catch (error: any) {\n            console.error(\"Error publishing post:\", error);\n            setError(error.message);\n        } finally {\n            setIsPublishing(false);\n        }\n    };\n\n    const shouldShowScheduling = postData.postType !== 'flash' && postData.postType !== 'live';\n\n    return (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n             <div className=\"glass-card p-8\">\n                <h2 className=\"text-2xl font-headline text-accent-pink mb-4\">Step 2: Publish</h2>\n                \n                <PostPreview postData={postData} />\n\n                <p className=\"text-gray-400 mb-6 text-sm\">You're ready to publish now or schedule your post for later.</p>\n                 \n                {error && (\n                    <motion.div \n                        initial={{ opacity: 0, y: -10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        className=\"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-lg mb-6 flex items-center gap-3\"\n                    >\n                        <ShieldOff size={24} />\n                        <div>\n                            <h4 className=\"font-bold\">Publishing Error</h4>\n                            <p className=\"text-sm\">{error}</p>\n                        </div>\n                    </motion.div>\n                )}\n\n                {shouldShowScheduling && (\n                    <div className=\"mt-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <h4 className=\"font-bold text-accent-cyan mb-2\">Scheduling</h4>\n                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                <input type=\"checkbox\" checked={isScheduling} onChange={(e) => setIsScheduling(e.target.checked)} className=\"sr-only peer\" />\n                                <div className=\"w-11 h-6 bg-gray-600 rounded-full peer peer-focus:ring-2 peer-focus:ring-accent-cyan peer-checked:after:translate-x-full after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-cyan\"></div>\n                            </label>\n                        </div>\n\n                        {isScheduling && (\n                            <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} className=\"flex flex-col md:flex-row gap-4 mt-4\">\n                                <Popover>\n                                    <PopoverTrigger asChild>\n                                    <button className=\"btn-glass flex-1 justify-start text-left font-normal\">\n                                        <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                                        {scheduleDate ? scheduleDate.toLocaleDateString() : <span>Pick a date</span>}\n                                    </button>\n                                    </PopoverTrigger>\n                                    <PopoverContent className=\"w-auto p-0 glass-card\">\n                                    <Calendar\n                                        mode=\"single\"\n                                        selected={scheduleDate}\n                                        onSelect={setScheduleDate}\n                                        initialFocus\n                                        disabled={(date) => date < new Date(new Date().setDate(new Date().getDate() - 1))}\n                                    />\n                                    </PopoverContent>\n                                </Popover>\n                                <input \n                                    type=\"time\"\n                                    value={scheduleTime}\n                                    onChange={(e) => setScheduleTime(e.target.value)}\n                                    className=\"input-glass\"\n                                />\n                            </motion.div>\n                        )}\n                    </div>\n                )}\n\n            </div>\n             <div className=\"flex justify-between mt-8\">\n                <button className=\"btn-glass flex items-center gap-2\" onClick={onBack} disabled={isPublishing}>\n                    <ArrowLeft /> Back\n                </button>\n                <button \n                    className=\"btn-glass bg-green-500 text-white flex items-center gap-2 disabled:bg-gray-500\" \n                    onClick={handleSubmit}\n                    disabled={isPublishing}\n                >\n                    {isPublishing ? 'Publishing...' : (isScheduling && scheduleDate && shouldShowScheduling) ? 'Schedule Post' : 'Publish Now'} <CheckCircle />\n                </button>\n            </div>\n        </motion.div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3095, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/create/page.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState, Suspense, useEffect } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AlignLeft, Image as ImageIcon, BarChart3, Zap, Radio } from 'lucide-react';\nimport Step1 from '@/components/create/Step1';\nimport Step3 from '@/components/create/Step3';\n\nconst POST_TYPES = [\n  { id: 'text', label: 'Text Post', icon: AlignLeft },\n  { id: 'media', label: 'Media', icon: ImageIcon },\n  { id: 'poll', label: 'Poll', icon: BarChart3 },\n  { id: 'flash', label: 'Flash', icon: Zap },\n  { id: 'live', label: 'Live', icon: Radio },\n];\n\nfunction CreatePostPageContent() {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n\n    const initialType = searchParams.get('type') as 'text' | 'media' | 'poll' | 'flash' | 'live' || undefined;\n    const initialImageUrl = searchParams.get('imageUrl');\n\n    const [postData, setPostData] = useState<any>({\n        postType: initialType,\n        songId: searchParams.get('songId'),\n        mediaUrl: initialImageUrl ? [initialImageUrl] : [],\n        mediaFiles: []\n    });\n\n    const [step, setStep] = useState(1);\n    const [postType, setPostType] = useState<'text' | 'media' | 'poll' | 'flash' | 'live' | undefined>(initialType);\n    const [typeSelected, setTypeSelected] = useState(!!initialType);\n\n    useEffect(() => {\n        if (initialType && !typeSelected) {\n            handleTypeChange(initialType);\n        }\n    }, [initialType, typeSelected]);\n\n    const handleNext = (data: any) => {\n        setPostData(prev => ({ ...prev, ...data }));\n        setStep(s => s + 1);\n    };\n\n    const handleBack = () => {\n        setStep(s => s - 1);\n    };\n\n    const handleDataChange = (newData: any) => {\n        setPostData(prev => ({...prev, ...newData}));\n    }\n\n    const handleTypeChange = (type: 'text' | 'media' | 'poll' | 'flash' | 'live') => {\n        setPostType(type);\n        setPostData({ postType: type, songId: searchParams.get('songId'), mediaUrl: [], mediaFiles: [] }); // Reset data\n        setStep(1);\n        setTypeSelected(true);\n        router.push(`/create?type=${type}${searchParams.get('songId') ? `&songId=${searchParams.get('songId')}`: ''}`, { scroll: false });\n    };\n\n    const steps = [\n        <Step1 key=\"step1\" onNext={handleNext} postType={postType!} postData={postData} onDataChange={handleDataChange} />,\n        <Step3 key=\"step2\" onBack={handleBack} postData={postData} />,\n    ];\n\n    const totalSteps = 2;\n    const currentStepLogic = step;\n\n    const stepLabels = ['Details', 'Publish'];\n\n\n    return (\n        <div className=\"w-full max-w-4xl mx-auto flex flex-col items-center p-4 min-h-screen\">\n            <h1 className=\"text-3xl font-headline font-bold text-accent-cyan mb-8\">Create Your Vibe</h1>\n\n            {!typeSelected && (\n                 <motion.div\n                    className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8 w-full\"\n                    initial=\"hidden\"\n                    animate=\"visible\"\n                    variants={{\n                        hidden: {},\n                        visible: { transition: { staggerChildren: 0.05 }}\n                    }}\n                >\n                    {POST_TYPES.map(type => (\n                        <motion.button \n                            key={type.id}\n                            variants={{hidden: {opacity:0, y:20}, visible: {opacity:1, y:0}}}\n                            onClick={() => handleTypeChange(type.id as any)}\n                            className={`w-full p-4 rounded-lg font-bold text-lg flex items-center justify-start gap-4 transition-colors glass-card ${postType === type.id ? 'bg-accent-cyan text-black' : 'bg-transparent text-gray-300'}`}>\n                            <type.icon />{type.label}\n                        </motion.button>\n                    ))}\n                </motion.div>\n            )}\n\n            {typeSelected && postType && (\n                <>\n                    {/* Progress Bar */}\n                    <div className=\"w-full max-w-lg mb-8\">\n                        <div className=\"flex justify-between items-center text-xs font-bold text-gray-400\">\n                           {stepLabels.map(label => <span key={label}>{label}</span>)}\n                        </div>\n                         <div className=\"relative w-full h-4 mt-1\">\n                            <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 200 10\" preserveAspectRatio=\"none\" className=\"absolute top-0 left-0\">\n                                <defs>\n                                    <clipPath id=\"heptagonClip\">\n                                        <path d=\"M0,5 L20,0 L90,2 L150,0 L200,5 L160,10 L80,9 L30,10 Z\" />\n                                    </clipPath>\n                                    <linearGradient id=\"paint0_linear_7_9\" x1=\"0\" y1=\"5\" x2=\"200\" y2=\"5\" gradientUnits=\"userSpaceOnUse\">\n                                        <stop stopColor=\"var(--accent-pink)\"/>\n                                        <stop offset=\"1\" stopColor=\"var(--accent-cyan)\"/>\n                                    </linearGradient>\n                                </defs>\n                                <g clipPath=\"url(#heptagonClip)\">\n                                    <rect x=\"0\" y=\"0\" width=\"200\" height=\"10\" className=\"text-black/20\" fill=\"currentColor\" />\n                                    <motion.rect\n                                        x=\"0\"\n                                        y=\"0\"\n                                        height=\"10\"\n                                        fill=\"url(#paint0_linear_7_9)\"\n                                        initial={{ width: 0 }}\n                                        animate={{ width: ((currentStepLogic - 1) / (totalSteps - 1)) * 200 }}\n                                        transition={{ duration: 0.5, ease: 'easeInOut' }}\n                                    />\n                                </g>\n                            </svg>\n                        </div>\n                    </div>\n\n                    {/* Steps Content */}\n                    <AnimatePresence mode=\"wait\">\n                        <motion.div\n                            key={step}\n                            initial={{ opacity: 0, x: 50 }}\n                            animate={{ opacity: 1, x: 0 }}\n                            exit={{ opacity: 0, x: -50 }}\n                            transition={{ duration: 0.3 }}\n                            className=\"w-full max-w-2xl\"\n                        >\n                            {steps[step-1]}\n                        </motion.div>\n                    </AnimatePresence>\n                </>\n            )}\n        </div>\n    );\n}\n\nexport default function CreatePostPage() {\n    return (\n        <Suspense fallback={<div>Loading...</div>}>\n            <CreatePostPageContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}