{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/login/LoginWithEmail.tsx"],"sourcesContent":["\n\"use client\";\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { auth } from '@/utils/firebaseClient';\nimport { isSignInWithEmailLink, signInWithEmailLink } from 'firebase/auth';\nimport { motion } from 'framer-motion';\n\nexport default function LoginWithEmail() {\n  const router = useRouter();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const finishSignIn = async () => {\n      if (isSignInWithEmailLink(auth, window.location.href)) {\n        let email = window.localStorage.getItem('emailForSignIn');\n        if (!email) {\n          email = window.prompt('Please provide your email for confirmation');\n        }\n        try {\n          if (email) {\n            await signInWithEmailLink(auth, email, window.location.href);\n            window.localStorage.removeItem('emailForSignIn');\n            router.push('/home?new=true');\n          }\n        } catch (err: any) {\n          setError('Failed to sign in. The link may have expired or been used already.');\n          console.error('Sign In With Email Link Error:', err);\n        }\n      } else {\n        setError('Invalid sign-in link.');\n      }\n      setLoading(false);\n    };\n\n    finishSignIn();\n  }, [router]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 animate-fade-in\">\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n        className=\"glass-card p-8 w-full max-w-md flex flex-col items-center gap-6\"\n      >\n        <h2 className=\"text-3xl font-headline font-bold text-accent-pink mb-2 text-center\">\n          {loading ? 'Completing Sign In...' : 'Sign In Complete'}\n        </h2>\n        {loading && <div className=\"text-accent-cyan\">Please wait while we sign you in.</div>}\n        {error && <div className=\"text-red-400 text-center animate-bounce mt-2\">{error}</div>}\n        {!loading && !error && <div className=\"text-accent-cyan\">You have been successfully signed in!</div>}\n      </motion.div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AALA;;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI,IAAA,2LAAqB,EAAC,sIAAI,EAAE,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACrD,IAAI,QAAQ,OAAO,YAAY,CAAC,OAAO,CAAC;gBACxC,IAAI,CAAC,OAAO;oBACV,QAAQ,OAAO,MAAM,CAAC;gBACxB;gBACA,IAAI;oBACF,IAAI,OAAO;wBACT,MAAM,IAAA,yLAAmB,EAAC,sIAAI,EAAE,OAAO,OAAO,QAAQ,CAAC,IAAI;wBAC3D,OAAO,YAAY,CAAC,UAAU,CAAC;wBAC/B,OAAO,IAAI,CAAC;oBACd;gBACF,EAAE,OAAO,KAAU;oBACjB,SAAS;oBACT,QAAQ,KAAK,CAAC,kCAAkC;gBAClD;YACF,OAAO;gBACL,SAAS;YACX;YACA,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,oMAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,GAAG,CAAC;YAAG;YAC9B,SAAS;gBAAE,SAAS;gBAAG,GAAG;YAAE;YAC5B,YAAY;gBAAE,UAAU;YAAI;YAC5B,WAAU;;8BAEV,8OAAC;oBAAG,WAAU;8BACX,UAAU,0BAA0B;;;;;;gBAEtC,yBAAW,8OAAC;oBAAI,WAAU;8BAAmB;;;;;;gBAC7C,uBAAS,8OAAC;oBAAI,WAAU;8BAAgD;;;;;;gBACxE,CAAC,WAAW,CAAC,uBAAS,8OAAC;oBAAI,WAAU;8BAAmB;;;;;;;;;;;;;;;;;AAIjE"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/login/page.tsx"],"sourcesContent":["\n\"use client\";\nimport React, { useState, Suspense, useEffect } from \"react\";\nimport { useSearchParams } from 'next/navigation';\nimport Link from \"next/link\";\nimport { auth } from \"@/utils/firebaseClient\";\nimport { \n    RecaptchaVerifier,\n    signInWithPhoneNumber \n} from \"firebase/auth\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport LoginWithEmail from \"./LoginWithEmail\";\n\n// ... (ForgotPasswordModal remains the same - can be removed if email login is fully deprecated)\n\nfunction LoginPageContent() {\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [otp, setOtp] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showOtpInput, setShowOtpInput] = useState(false);\n  const [confirmationResult, setConfirmationResult] = useState<any>(null);\n  const router = useRouter();\n\n  useEffect(() => {\n    window.recaptchaVerifier = new RecaptchaVerifier(auth, 'recaptcha-container', {\n      'size': 'invisible',\n      'callback': (response: any) => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n      }\n    });\n  }, []);\n\n  const handlePhoneSignIn = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n    try {\n      const verifier = window.recaptchaVerifier;\n      const result = await signInWithPhoneNumber(auth, phoneNumber, verifier);\n      setConfirmationResult(result);\n      setShowOtpInput(true);\n    } catch (err: any) {\n      setError(\"Failed to send OTP. Please check the phone number and try again.\");\n      console.error(\"Phone Sign In Error:\", err);\n    }\n    setLoading(false);\n  };\n\n  const handleOtpSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n    try {\n      await confirmationResult.confirm(otp);\n      router.push(\"/home?new=true\");\n    } catch (err: any) {\n      setError(\"Invalid OTP. Please try again.\");\n      console.error(\"OTP Verification Error:\", err);\n    }\n    setLoading(false);\n  };\n\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center p-4 animate-fade-in\">\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.5 }}\n        className=\"glass-card p-8 w-full max-w-md flex flex-col gap-6\"\n      >\n        <div id=\"recaptcha-container\"></div>\n        <h2 className=\"text-3xl font-headline font-bold text-accent-pink mb-2 text-center\">Welcome Back</h2>\n        <p className=\"text-accent-cyan text-center mb-4\">Login with your phone number</p>\n        \n        {!showOtpInput ? (\n          <form onSubmit={handlePhoneSignIn} className=\"flex flex-col gap-4\">\n            <input\n              type=\"tel\"\n              placeholder=\"Phone Number (e.g., +1 555-555-5555)\"\n              className=\"input-glass w-full\"\n              value={phoneNumber}\n              onChange={e => setPhoneNumber(e.target.value)}\n              required\n            />\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              type=\"submit\"\n              className=\"btn-glass mt-4 bg-accent-pink/80\"\n              disabled={loading}\n            >\n              {loading ? \"Sending OTP...\" : \"Send OTP\"}\n            </motion.button>\n          </form>\n        ) : (\n          <form onSubmit={handleOtpSubmit} className=\"flex flex-col gap-4\">\n            <input\n              type=\"text\"\n              placeholder=\"Enter OTP\"\n              className=\"input-glass w-full\"\n              value={otp}\n              onChange={e => setOtp(e.target.value)}\n              required\n            />\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              type=\"submit\"\n              className=\"btn-glass mt-4 bg-accent-pink/80\"\n              disabled={loading}\n            >\n              {loading ? \"Verifying...\" : \"Verify OTP\"}\n            </motion.button>\n          </form>\n        )}\n\n        {error && <div className=\"text-red-400 text-center animate-bounce mt-2\">{error}</div>}\n\n        <div className=\"text-center mt-2\">\n          <span className=\"text-gray-400\">Don't have an account? </span>\n          <Link href=\"/signup\" className=\"text-accent-cyan hover:underline\">Sign up</Link>\n        </div>\n         <div className=\"text-center mt-2 text-xs text-gray-400\">\n            <Link href=\"/terms\" className=\"hover:text-accent-cyan hover:underline\">Terms of Service</Link>\n            <span className=\"mx-2\">|</span>\n            <Link href=\"/privacy\" className=\"hover:text-accent-cyan hover:underline\">Privacy Policy</Link>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n\nfunction LoginHandler() {\n    const searchParams = useSearchParams();\n    const finish = searchParams.get('finish');\n\n    if (finish) {\n        return <LoginWithEmail />;\n    }\n    return <LoginPageContent />;\n}\n\nexport default function LoginPage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center\">Loading...</div>}>\n      <LoginHandler />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}