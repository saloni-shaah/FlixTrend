module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},88347,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={ACTION_HMR_REFRESH:function(){return k},ACTION_NAVIGATE:function(){return h},ACTION_REFRESH:function(){return g},ACTION_RESTORE:function(){return i},ACTION_SERVER_ACTION:function(){return l},ACTION_SERVER_PATCH:function(){return j},PrefetchKind:function(){return m}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g="refresh",h="navigate",i="restore",j="server-patch",k="hmr-refresh",l="server-action";var m=((d={}).AUTO="auto",d.FULL="full",d.TEMPORARY="temporary",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},67009,(a,b,c)=>{"use strict";function d(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isThenable",{enumerable:!0,get:function(){return d}})},90841,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={dispatchAppRouterAction:function(){return i},useActionQueue:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(46058)._(a.r(72131)),g=a.r(67009),h=null;function i(a){if(null===h)throw Object.defineProperty(Error("Internal Next.js error: Router action dispatched before initialization."),"__NEXT_ERROR_CODE",{value:"E668",enumerable:!1,configurable:!0});h(a)}function j(a){let[b,c]=f.default.useState(a.state);h=b=>a.dispatch(b,c);let d=(0,f.useMemo)(()=>b,[b]);return(0,g.isThenable)(d)?(0,f.use)(d):d}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20611,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"callServer",{enumerable:!0,get:function(){return g}});let d=a.r(72131),e=a.r(88347),f=a.r(90841);async function g(a,b){return new Promise((c,g)=>{(0,d.startTransition)(()=>{(0,f.dispatchAppRouterAction)({type:e.ACTION_SERVER_ACTION,actionId:a,actionArgs:b,resolve:c,reject:g})})})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},1722,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"findSourceMapURL",{enumerable:!0,get:function(){return d}});("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},45222,a=>{"use strict";let b=(0,a.i(70106).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],45222)},43108,a=>{"use strict";let b=(0,a.i(70106).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);a.s(["Lock",()=>b],43108)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>b],81560)},54347,a=>{"use strict";let b=(0,a.i(70106).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);a.s(["Palette",()=>b],54347)},65169,a=>{"use strict";let b=(0,a.i(70106).default)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);a.s(["AtSign",()=>b],65169)},42112,a=>{"use strict";let b=(0,a.i(70106).default)("cog",[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]]);a.s(["Cog",()=>b],42112)},20788,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(42112),e=a.i(54347),f=a.i(43108),g=a.i(45222),h=a.i(70106);let i=(0,h.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var j=a.i(81560),k=a.i(65169);let l=(0,h.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var m=a.i(16201),n=a.i(210),o=a.i(38246);a.i(30485);var p=a.i(31052),q=a.i(50944),r=a.i(25408);a.i(69387);var s=a.i(60574),t=a.i(46271);let u=(0,h.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.i(9912);let v=(0,a.i(94318).httpsCallable)(r.functions,"deleteUserAccount");function w({profile:a,onClose:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(1),o=(0,q.useRouter)(),s=async()=>{j(""),l(!0);let a=r.auth.currentUser;if(!a||!a.email){j("Could not verify user session. Please log in again."),l(!1);return}try{let b=p.EmailAuthProvider.credential(a.email,e);await (0,p.reauthenticateWithCredential)(a,b),await v(),alert("Your account has been permanently deleted."),o.push("/signup")}catch(a){console.error("Account deletion error:",a),"auth/wrong-password"===a.code?j("Incorrect password. Please try again."):"auth/requires-recent-login"===a.code?j("This action requires a recent login. Please sign out and sign in again before deleting your account."):j("An unexpected error occurred. Please try again later.")}finally{l(!1)}},w=g===`delete/${a.username}`;return(0,b.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-md",children:(0,b.jsxs)(t.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-6 w-full max-w-lg relative flex flex-col gap-4 border-2 border-red-500/50 shadow-lg shadow-red-500/10",children:[(0,b.jsx)("button",{onClick:d,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",children:"Ã—"}),(0,b.jsxs)("h2",{className:"text-2xl font-headline font-bold text-red-400 flex items-center gap-3",children:[(0,b.jsx)(u,{})," Confirm Account Deletion"]}),i&&(0,b.jsx)("div",{className:"p-3 bg-red-900/50 text-red-300 rounded-lg text-sm text-center border border-red-800",children:i}),1===m&&(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("p",{className:"text-center text-gray-300",children:"This is your final confirmation. This action is irreversible and will permanently delete all your data, including posts, comments, and profile information."}),(0,b.jsxs)("p",{className:"text-center text-gray-300",children:["To proceed, please type ",(0,b.jsxs)("code",{className:"bg-neutral-900 p-1 rounded-md text-red-400 font-bold",children:["delete/",a.username]})," in the box below."]}),(0,b.jsx)("input",{type:"text",name:"confirmation",placeholder:`delete/${a.username}`,className:"input-glass w-full bg-neutral-900/50 text-center text-lg tracking-wider",value:g,onChange:a=>h(a.target.value)}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,b.jsx)("button",{className:"btn-glass",onClick:d,children:"Cancel"}),(0,b.jsx)("button",{className:"btn-glass bg-red-500/80 text-white",disabled:!w,onClick:()=>n(2),children:"Continue"})]})]}),2===m&&(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("p",{children:"For your security, please enter your password to finalize the deletion."}),(0,b.jsx)("input",{type:"password",name:"password",placeholder:"Enter your password",className:"input-glass w-full",value:e,onChange:a=>f(a.target.value)}),(0,b.jsxs)("div",{className:"flex justify-end gap-4 mt-4",children:[(0,b.jsx)("button",{className:"btn-glass",onClick:()=>n(1),children:"Back"}),(0,b.jsx)("button",{className:`btn-glass text-white ${!e||k?"bg-red-900/50":"bg-red-800 hover:bg-red-700"}`,disabled:!e||k,onClick:s,children:k?"DELETING...":"Permanently Delete My Account"})]})]})]})})}function x(){let[a,h]=(0,c.useState)(null),[t,u]=(0,c.useState)(null),[v,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)({darkMode:!1,simpleMode:!1,accentColor:"#00F0FF",dmPrivacy:"everyone",tagPrivacy:"everyone",pushNotifications:!0,emailNotifications:!1}),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)("idle"),G=(0,q.useRouter)();(0,c.useEffect)(()=>{let a=r.auth.onAuthStateChanged(a=>{if(a){u(a);let b=(0,s.doc)(r.db,"users",a.uid),c=(0,s.onSnapshot)(b,a=>{if(a.exists()){let b=a.data();h({uid:a.id,...b}),z({darkMode:"dark"===localStorage.getItem("theme"),simpleMode:"true"===localStorage.getItem("simpleMode"),accentColor:b.settings?.accentColor||"#00F0FF",dmPrivacy:b.settings?.dmPrivacy||"everyone",tagPrivacy:b.settings?.tagPrivacy||"everyone",pushNotifications:b.settings?.pushNotifications??!0,emailNotifications:b.settings?.emailNotifications??!1})}x(!1)});return()=>c()}G.push("/login")});return()=>a()},[G]);let H=async(a,b)=>{B(!0),z({...y,[a]:b}),"darkMode"===a&&(document.documentElement.classList.toggle("dark",b),localStorage.setItem("theme",b?"dark":"light")),"simpleMode"===a&&(document.documentElement.classList.toggle("simple",b),localStorage.setItem("simpleMode",String(b))),"accentColor"===a&&(localStorage.setItem("accentColor",b),document.documentElement.style.setProperty("--accent-cyan",b),document.documentElement.style.setProperty("--brand-saffron",b));try{if(t){let c=(0,s.doc)(r.db,"users",t.uid);await (0,s.updateDoc)(c,{[`settings.${a}`]:b})}}catch(a){console.error("Failed to save settings:",a)}finally{B(!1)}},I=async()=>{if(t){F("sending");try{await (0,p.sendEmailVerification)(t),F("sent"),setTimeout(()=>F("idle"),3e3)}catch(a){console.error("Error resending verification email:",a),F("idle")}}},J=async()=>{await (0,p.signOut)(r.auth),G.push("/login")};return!v&&a&&t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"w-full max-w-lg mx-auto p-4",children:[(0,b.jsxs)(o.default,{href:"/squad",className:"btn-glass mb-8 inline-flex items-center gap-2",children:[(0,b.jsx)(n.ArrowLeft,{})," Back to Profile"]}),(0,b.jsxs)("h2",{className:"text-2xl font-headline font-bold mb-6 text-accent-cyan flex items-center gap-2",children:[(0,b.jsx)(d.Cog,{})," Settings"]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"bg-white/5 rounded-xl p-4",children:(0,b.jsx)(o.default,{href:"/premium",children:(0,b.jsxs)("div",{className:"w-full p-4 rounded-2xl bg-gradient-to-r from-accent-purple via-accent-pink to-brand-gold cursor-pointer mb-4",children:[(0,b.jsx)("h4",{className:"font-headline font-bold text-white",children:"Manage Premium"}),(0,b.jsx)("p",{className:"text-xs text-white/80",children:"Upgrade or manage your subscription."})]})})}),(0,b.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,b.jsxs)("h3",{className:"flex items-center gap-2 mb-2 font-bold text-accent-cyan",children:[(0,b.jsx)(e.Palette,{})," Theme & UI"]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsx)("span",{children:"Dark Mode"}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:y.darkMode,onChange:a=>H("darkMode",a.target.checked),className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-focus:ring-2 peer-focus:ring-accent-cyan peer-checked:after:translate-x-full after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-cyan"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsx)("span",{children:"Simple Mode (B&W)"}),(0,b.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:y.simpleMode,onChange:a=>H("simpleMode",a.target.checked),className:"sr-only peer"}),(0,b.jsx)("div",{className:"w-11 h-6 bg-gray-600 rounded-full peer peer-focus:ring-2 peer-focus:ring-accent-cyan peer-checked:after:translate-x-full after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-cyan"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsx)("span",{children:"Accent Color"}),(0,b.jsx)("input",{type:"color",value:y.accentColor,onChange:a=>H("accentColor",a.target.value),className:"w-10 h-10 bg-transparent border-none rounded-full cursor-pointer"})]})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,b.jsxs)("h3",{className:"flex items-center gap-2 mb-2 font-bold text-accent-cyan",children:[(0,b.jsx)(f.Lock,{})," Privacy & Security"]}),t?.emailVerified?(0,b.jsxs)("div",{className:"flex items-center justify-between py-2 text-green-400",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(l,{})," Email Verified"]}),(0,b.jsx)(m.CheckCircle,{})]}):(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2 text-yellow-400",children:[(0,b.jsx)(l,{})," Email not verified"]}),(0,b.jsx)("button",{className:"btn-glass text-xs",onClick:I,disabled:"idle"!==E,children:"sending"===E?"Sending...":"sent"===E?"Sent!":"Resend Email"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)(g.MessageCircle,{className:"inline-block mr-2"})," Who can DM you?"]}),(0,b.jsxs)("select",{value:y.dmPrivacy,onChange:a=>H("dmPrivacy",a.target.value),className:"input-glass text-sm",children:[(0,b.jsx)("option",{value:"everyone",children:"Everyone"}),(0,b.jsx)("option",{value:"mutuals",children:"Mutuals"}),(0,b.jsx)("option",{value:"none",children:"No one"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)(k.AtSign,{className:"inline-block mr-2"})," Who can tag you?"]}),(0,b.jsxs)("select",{value:y.tagPrivacy,onChange:a=>H("tagPrivacy",a.target.value),className:"input-glass text-sm",children:[(0,b.jsx)("option",{value:"everyone",children:"Following"}),(0,b.jsx)("option",{value:"following",children:"Following"}),(0,b.jsx)("option",{value:"none",children:"No one"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,b.jsx)("h3",{className:"flex items-center gap-2 mb-2 font-bold text-accent-cyan",children:"Account Actions"}),(0,b.jsxs)("button",{className:"btn-glass bg-red-500/20 text-red-400 hover:bg-red-500/40 hover:text-white w-full mt-4",onClick:()=>D(!0),children:[(0,b.jsx)(j.Trash2,{className:"inline-block mr-2"})," Permanently Delete Account"]})]}),(0,b.jsxs)("button",{className:"btn-glass bg-accent-pink/20 text-accent-pink hover:bg-accent-pink/40 hover:text-white w-full mt-4",onClick:J,children:[(0,b.jsx)(i,{className:"inline-block mr-2"})," Log Out"]})]})]}),C&&(0,b.jsx)(w,{profile:a,onClose:()=>D(!1)})]}):(0,b.jsx)("div",{className:"text-center text-accent-cyan",children:"Loading settings..."})}a.s(["default",()=>x],20788)}];

//# sourceMappingURL=_30f43e8b._.js.map