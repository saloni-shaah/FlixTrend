module.exports=[30032,a=>{"use strict";let b=(0,a.i(70106).default)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);a.s(["MicOff",()=>b],30032)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);a.s(["Phone",()=>b],63519)},97257,a=>{"use strict";a.s(["CallScreen",()=>k],97257);var b=a.i(87924),c=a.i(72131),d=a.i(4975),e=a.i(30032),f=a.i(63519),g=a.i(64791);let h=(0,a.i(70106).default)("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var i=a.i(49094),j=a.i(25408);function k({call:a}){let{pc:k,answerCall:l,handleEndCall:m}=(0,i.useAppState)(),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),v=(0,c.useRef)(null),w=(0,c.useRef)(null),x=j.auth.currentUser,y=x?.uid===a.calleeId,z=!!a.answer;return(0,c.useEffect)(()=>((async()=>{try{let a=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});o(a),v.current&&(v.current.srcObject=a);let b=new MediaStream;q(b),w.current&&(w.current.srcObject=b),k&&(a.getTracks().forEach(b=>{k.getSenders().find(a=>a.track===b)||k.addTrack(b,a)}),k.ontrack=a=>{a.streams[0].getTracks().forEach(a=>{b.addTrack(a)})})}catch(a){console.error("Error accessing media devices:",a)}})(),()=>{n&&n.getTracks().forEach(a=>a.stop())}),[k]),(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col text-white",children:[(0,b.jsx)("video",{ref:w,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),p?.getTracks().length===0&&(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-700 animate-pulse"}),(0,b.jsxs)("p",{className:"mt-4 animate-pulse",children:["Connecting to ",a.calleeName||"user","..."]})]}),(0,b.jsx)("video",{ref:v,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute bottom-6 right-6 w-32 h-48 object-cover rounded-lg border-2 border-accent-cyan"}),y&&!z&&(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-6",children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold animate-pulse",children:["Incoming Call from ",a.callerName,"..."]}),(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsx)("button",{onClick:l,className:"p-4 bg-green-500 rounded-full text-white",children:(0,b.jsx)(f.Phone,{size:32})}),(0,b.jsx)("button",{onClick:m,className:"p-4 bg-red-500 rounded-full text-white",children:(0,b.jsx)(f.Phone,{size:32})})]})]}),(0,b.jsxs)("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-6 bg-black/50 p-4 rounded-full",children:[(0,b.jsx)("button",{onClick:()=>{n&&(n.getAudioTracks().forEach(a=>a.enabled=!a.enabled),s(!r))},className:`p-3 rounded-full ${r?"bg-red-500":"bg-gray-600"}`,children:r?(0,b.jsx)(e.MicOff,{size:24}):(0,b.jsx)(d.Mic,{size:24})}),(0,b.jsx)("button",{onClick:()=>{n&&(n.getVideoTracks().forEach(a=>a.enabled=!a.enabled),u(!t))},className:`p-3 rounded-full ${t?"bg-red-500":"bg-gray-600"}`,children:t?(0,b.jsx)(h,{size:24}):(0,b.jsx)(g.Video,{size:24})}),(0,b.jsx)("button",{onClick:m,className:"p-4 bg-red-500 rounded-full",children:(0,b.jsx)(f.Phone,{size:24})})]})]})}},23312,a=>{"use strict";let b=(0,a.i(70106).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);a.s(["Bell",()=>b],23312)},49094,a=>{"use strict";a.s(["useAppState",()=>f]),a.i(87924);var b=a.i(72131);a.i(69387);var c=a.i(60574),d=a.i(25408);a.i(97257),a.i(23312),a.i(33508),a.i(46271),a.i(62036),(0,c.getFirestore)(d.app);let e=(0,b.createContext)(void 0);function f(){let a=(0,b.useContext)(e);if(void 0===a)throw Error("useAppState must be used within an AppStateProvider");return a}}];

//# sourceMappingURL=_6adeaaa4._.js.map