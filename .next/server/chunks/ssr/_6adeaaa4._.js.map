{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/mic-off.ts","../../../../node_modules/lucide-react/src/icons/phone.ts","../../../../src/components/CallScreen.tsx","../../../../node_modules/lucide-react/src/icons/video-off.ts","../../../../node_modules/lucide-react/src/icons/bell.ts","../../../../src/utils/AppStateContext.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 19v3', key: 'npa21l' }],\n  ['path', { d: 'M15 9.34V5a3 3 0 0 0-5.68-1.33', key: '1gzdoj' }],\n  ['path', { d: 'M16.95 16.95A7 7 0 0 1 5 12v-2', key: 'cqa7eg' }],\n  ['path', { d: 'M18.89 13.23A7 7 0 0 0 19 12v-2', key: '16hl24' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n  ['path', { d: 'M9 9v3a3 3 0 0 0 5.12 2.12', key: 'r2i35w' }],\n];\n\n/**\n * @component @name MicOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMTl2MyIgLz4KICA8cGF0aCBkPSJNMTUgOS4zNFY1YTMgMyAwIDAgMC01LjY4LTEuMzMiIC8+CiAgPHBhdGggZD0iTTE2Ljk1IDE2Ljk1QTcgNyAwIDAgMSA1IDEydi0yIiAvPgogIDxwYXRoIGQ9Ik0xOC44OSAxMy4yM0E3IDcgMCAwIDAgMTkgMTJ2LTIiIC8+CiAgPHBhdGggZD0ibTIgMiAyMCAyMCIgLz4KICA8cGF0aCBkPSJNOSA5djNhMyAzIDAgMCAwIDUuMTIgMi4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/mic-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MicOff = createLucideIcon('mic-off', __iconNode);\n\nexport default MicOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384',\n      key: '9njp5v',\n    },\n  ],\n];\n\n/**\n * @component @name Phone\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMuODMyIDE2LjU2OGExIDEgMCAwIDAgMS4yMTMtLjMwM2wuMzU1LS40NjVBMiAyIDAgMCAxIDE3IDE1aDNhMiAyIDAgMCAxIDIgMnYzYTIgMiAwIDAgMS0yIDJBMTggMTggMCAwIDEgMiA0YTIgMiAwIDAgMSAyLTJoM2EyIDIgMCAwIDEgMiAydjNhMiAyIDAgMCAxLS44IDEuNmwtLjQ2OC4zNTFhMSAxIDAgMCAwLS4yOTIgMS4yMzMgMTQgMTQgMCAwIDAgNi4zOTIgNi4zODQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/phone\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Phone = createLucideIcon('phone', __iconNode);\n\nexport default Phone;\n","\n\"use client\";\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Mic, MicOff, Phone, Video, VideoOff } from 'lucide-react';\nimport { useAppState } from '@/utils/AppStateContext';\nimport { auth } from '@/utils/firebaseClient';\n\nexport function CallScreen({ call }: { call: any }) {\n  // All call logic and state now comes from the central AppStateContext.\n  const { pc, answerCall, handleEndCall } = useAppState();\n  \n  const [localStream, setLocalStream] = useState<MediaStream | null>(null);\n  const [remoteStream, setRemoteStream] = useState<MediaStream | null>(null);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isVideoOff, setIsVideoOff] = useState(false);\n\n  const localVideoRef = useRef<HTMLVideoElement>(null);\n  const remoteVideoRef = useRef<HTMLVideoElement>(null);\n\n  const currentUser = auth.currentUser;\n  const isCallee = currentUser?.uid === call.calleeId;\n  const hasAnswered = !!call.answer;\n\n  useEffect(() => {\n    const startStreams = async () => {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n        setLocalStream(stream);\n        if (localVideoRef.current) {\n          localVideoRef.current.srcObject = stream;\n        }\n\n        const remote = new MediaStream();\n        setRemoteStream(remote);\n        if (remoteVideoRef.current) {\n          remoteVideoRef.current.srcObject = remote;\n        }\n\n        if (pc) {\n          stream.getTracks().forEach((track) => {\n            if (!pc.getSenders().find(s => s.track === track)) {\n              pc.addTrack(track, stream);\n            }\n          });\n\n          pc.ontrack = (event) => {\n            event.streams[0].getTracks().forEach((track) => {\n              remote.addTrack(track);\n            });\n          };\n        }\n      } catch (error) {\n          console.error(\"Error accessing media devices:\", error);\n      }\n    };\n\n    startStreams();\n\n    return () => {\n      if (localStream) {\n        localStream.getTracks().forEach(track => track.stop());\n      }\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pc]);\n\n  const toggleMute = () => {\n    if (localStream) {\n      localStream.getAudioTracks().forEach(track => track.enabled = !track.enabled);\n      setIsMuted(!isMuted);\n    }\n  }\n\n  const toggleVideo = () => {\n    if (localStream) {\n      localStream.getVideoTracks().forEach(track => track.enabled = !track.enabled);\n      setIsVideoOff(!isVideoOff);\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-[100] bg-black flex flex-col text-white\">\n      <video ref={remoteVideoRef} autoPlay playsInline className=\"w-full h-full object-cover\" />\n      \n      {/* Show a placeholder until the remote stream is available */}\n      {remoteStream?.getTracks().length === 0 && (\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center bg-gray-900\">\n              <div className=\"w-24 h-24 rounded-full bg-gray-700 animate-pulse\"></div>\n              <p className=\"mt-4 animate-pulse\">Connecting to {call.calleeName || 'user'}...</p>\n          </div>\n      )}\n\n      <video ref={localVideoRef} autoPlay playsInline muted className=\"absolute bottom-6 right-6 w-32 h-48 object-cover rounded-lg border-2 border-accent-cyan\" />\n      \n      {isCallee && !hasAnswered && (\n        <div className=\"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-6\">\n            <h2 className=\"text-3xl font-bold animate-pulse\">Incoming Call from {call.callerName}...</h2>\n            <div className=\"flex gap-8\">\n                <button onClick={answerCall} className=\"p-4 bg-green-500 rounded-full text-white\"><Phone size={32}/></button>\n                <button onClick={handleEndCall} className=\"p-4 bg-red-500 rounded-full text-white\"><Phone size={32}/></button>\n            </div>\n        </div>\n      )}\n\n      <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-6 bg-black/50 p-4 rounded-full\">\n        <button onClick={toggleMute} className={`p-3 rounded-full ${isMuted ? 'bg-red-500' : 'bg-gray-600'}`}>\n            {isMuted ? <MicOff size={24} /> : <Mic size={24} />}\n        </button>\n        <button onClick={toggleVideo} className={`p-3 rounded-full ${isVideoOff ? 'bg-red-500' : 'bg-gray-600'}`}>\n            {isVideoOff ? <VideoOff size={24} /> : <Video size={24} />}\n        </button>\n        <button onClick={handleEndCall} className=\"p-4 bg-red-500 rounded-full\">\n          <Phone size={24} />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    { d: 'M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196', key: 'w8jjjt' },\n  ],\n  ['path', { d: 'M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2', key: '1xawa7' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n];\n\n/**\n * @component @name VideoOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuNjYgNkgxNGEyIDIgMCAwIDEgMiAydjIuNWw1LjI0OC0zLjA2MkEuNS41IDAgMCAxIDIyIDcuODd2OC4xOTYiIC8+CiAgPHBhdGggZD0iTTE2IDE2YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0yVjhhMiAyIDAgMCAxIDItMmgyIiAvPgogIDxwYXRoIGQ9Im0yIDIgMjAgMjAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/video-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst VideoOff = createLucideIcon('video-off', __iconNode);\n\nexport default VideoOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M10.268 21a2 2 0 0 0 3.464 0', key: 'vwvbt9' }],\n  [\n    'path',\n    {\n      d: 'M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326',\n      key: '11g9vi',\n    },\n  ],\n];\n\n/**\n * @component @name Bell\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuMjY4IDIxYTIgMiAwIDAgMCAzLjQ2NCAwIiAvPgogIDxwYXRoIGQ9Ik0zLjI2MiAxNS4zMjZBMSAxIDAgMCAwIDQgMTdoMTZhMSAxIDAgMCAwIC43NC0xLjY3M0MxOS40MSAxMy45NTYgMTggMTIuNDk5IDE4IDhBNiA2IDAgMCAwIDYgOGMwIDQuNDk5LTEuNDExIDUuOTU2LTIuNzM4IDcuMzI2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/bell\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bell = createLucideIcon('bell', __iconNode);\n\nexport default Bell;\n","\n\"use client\";\nimport React, { createContext, useState, useContext, ReactNode, useEffect, useRef } from 'react';\nimport { getFirestore, doc, onSnapshot, setDoc, serverTimestamp, Unsubscribe, updateDoc, collection, addDoc, getDoc, writeBatch, getDocs, deleteField } from 'firebase/firestore';\nimport { auth, app } from './firebaseClient';\nimport { CallScreen } from '@/components/CallScreen';\nimport { Bell, X } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nconst db = getFirestore(app);\n\n// --- Notification Prompt Component ---\ninterface NotificationPromptProps {\n  onEnable: () => void;\n  onDismiss: () => void;\n}\n\nfunction NotificationPrompt({ onEnable, onDismiss }: NotificationPromptProps) {\n    return (\n        <motion.div \n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: 50 }}\n            className=\"fixed bottom-4 right-4 z-50 bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-4 max-w-sm w-full\"\n        >\n            <div className=\"flex items-start gap-4\">\n                <div className=\"bg-accent-cyan/20 text-accent-cyan p-2 rounded-full\">\n                    <Bell size={24} />\n                </div>\n                <div className=\"flex-1\">\n                    <h4 className=\"font-bold text-white\">Enable Notifications</h4>\n                    <p className=\"text-sm text-gray-300\">Stay updated with the latest activity and never miss a call. Allow us to send you notifications.</p>\n                    <div className=\"mt-4 flex gap-2\">\n                        <button onClick={onEnable} className=\"flex-1 btn-glass bg-accent-cyan text-black text-sm\">Enable</button>\n                        <button onClick={onDismiss} className=\"flex-1 btn-glass text-sm\">Not Now</button>\n                    </div>\n                </div>\n                <button onClick={onDismiss} className=\"text-gray-400 hover:text-white\">\n                    <X size={18} />\n                </button>\n            </div>\n        </motion.div>\n    );\n}\n\n\ninterface Call {\n  id: string;\n  [key: string]: any;\n}\n\ninterface Song {\n  id: string;\n  audioUrl: string;\n  [key: string]: any;\n}\n\ninterface AppState {\n  isCalling: boolean;\n  setIsCalling: (isCalling: boolean) => void;\n  callTarget: any | null;\n  setCallTarget: (target: any | null) => void;\n  activeCall: Call | null;\n  answerCall: () => Promise<void>; \n  handleEndCall: () => Promise<void>;\n  closeCall: () => void;\n  pc: RTCPeerConnection | null;\n  activeSong: Song | null;\n  isPlaying: boolean;\n  playSong: (song: Song, queue?: Song[], index?: number) => void;\n  pauseSong: () => void;\n  toggleSong: () => void;\n  playNext: () => void;\n  playPrevious: () => void;\n  audioPlayer: HTMLAudioElement | null;\n  selectedChat: any | null;\n  setSelectedChat: React.Dispatch<React.SetStateAction<any | null>>;\n  drafts: { [chatId: string]: string };\n  setDraft: (chatId: string, text: string) => void;\n  isScopeVideoPlaying: boolean;\n  setIsScopeVideoPlaying: React.Dispatch<React.SetStateAction<boolean>>;\n}\n\nconst AppStateContext = createContext<AppState | undefined>(undefined);\n\nconst servers = {\n  iceServers: [\n    {\n      urls: ['stun:stun1.l.google.com:19302', 'stun:stun2.l.google.com:19302'],\n    },\n  ],\n  iceCandidatePoolSize: 10,\n};\n\nasync function cleanUpCall(callId: string) {\n    if (!callId) return;\n    const callDocRef = doc(db, 'calls', callId);\n    try {\n        const callDocSnap = await getDoc(callDocRef);\n        if (!callDocSnap.exists()) return;\n        const batch = writeBatch(db);\n        const offerCandidatesRef = collection(callDocRef, 'offerCandidates');\n        const answerCandidatesRef = collection(callDocRef, 'answerCandidates');\n        const offerCandidatesSnap = await getDocs(offerCandidatesRef);\n        offerCandidatesSnap.forEach(doc => batch.delete(doc.ref));\n        const answerCandidatesSnap = await getDocs(answerCandidatesRef);\n        answerCandidatesSnap.forEach(doc => batch.delete(doc.ref));\n        batch.delete(callDocRef);\n        await batch.commit();\n    } catch (error) {\n        console.error(`Error cleaning up call ${callId}:`, error);\n    }\n}\n\n\nexport function AppStateProvider({ children }: { children: ReactNode }) {\n  const [isCalling, setIsCalling] = useState(false);\n  const [callTarget, setCallTarget] = useState<any | null>(null);\n  const [activeCall, setActiveCall] = useState<Call | null>(null);\n  const [pc, setPc] = useState<RTCPeerConnection | null>(null);\n  \n  const [activeSong, setActiveSong] = useState<Song | null>(null);\n  const [songQueue, setSongQueue] = useState<Song[]>([]);\n  const [currentSongIndex, setCurrentSongIndex] = useState<number>(-1);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const audioRef = useRef<HTMLAudioElement | null>(null);\n  const [selectedChat, setSelectedChat] = useState<any | null>(null);\n  const [drafts, setDrafts] = useState<{ [chatId: string]: string }>({});\n  const [isScopeVideoPlaying, setIsScopeVideoPlaying] = useState(false);\n  const [showNotificationPrompt, setShowNotificationPrompt] = useState(false);\n\n\n  useEffect(() => {\n    let callUnsubscribe: Unsubscribe | null = null;\n    let callDocUnsubscribe: Unsubscribe | null = null;\n    let peerConnection: RTCPeerConnection | null = null;\n    let messageUnsubscribe: Unsubscribe | undefined;\n\n    const managePresence = (user: any) => {\n        if (!user) return;\n        const userDocRef = doc(db, 'users', user.uid);\n\n        const onlineData = { status: 'online', lastSeen: serverTimestamp() };\n        const offlineData = { status: 'offline', lastSeen: serverTimestamp() };\n        \n        setDoc(userDocRef, onlineData, { merge: true });\n\n        const onVisibilityChange = () => {\n             if (document.visibilityState === 'hidden') {\n                setDoc(userDocRef, offlineData, { merge: true });\n            } else {\n                setDoc(userDocRef, onlineData, { merge: true });\n            }\n        }\n        \n        window.addEventListener('visibilitychange', onVisibilityChange);\n        window.addEventListener('beforeunload', () => setDoc(userDocRef, offlineData, { merge: true }));\n\n        return () => {\n             window.removeEventListener('visibilitychange', onVisibilityChange);\n        }\n    }\n\n    const authUnsubscribe = auth.onAuthStateChanged(user => {\n      if (callUnsubscribe) callUnsubscribe();\n      if (callDocUnsubscribe) callDocUnsubscribe();\n      if (messageUnsubscribe) messageUnsubscribe();\n      \n      if (user) {\n        const userDocRef = doc(db, 'users', user.uid);\n\n        // -- NOTIFICATION LOGIC --\n        import('./firebaseMessaging').then(async (messagingModule) => {\n            const handlePermissionRequest = async () => {\n                setShowNotificationPrompt(false);\n                await messagingModule.requestNotificationPermission(user.uid);\n            };\n\n            if (typeof window !== \"undefined\" && \"Notification\" in window) {\n                const permission = Notification.permission;\n                const userDoc = await getDoc(userDocRef);\n                const fcmTokenExists = userDoc.exists() && !!userDoc.data()?.fcmToken;\n\n                if (permission === 'granted' && !fcmTokenExists) {\n                    // Permission granted but no token, silently get it.\n                    await messagingModule.requestNotificationPermission(user.uid);\n                } else if (permission === 'default') {\n                    // Not yet asked, show the custom prompt.\n                    setShowNotificationPrompt(true);\n                    // Assign handler to window to be triggered from the component.\n                    (window as any).handleNotificationPermissionRequest = handlePermissionRequest;\n                }\n            }\n            \n            messageUnsubscribe = messagingModule.onForegroundMessage(async (payload) => {\n                console.log('FCM message received in foreground:', payload);\n                const { type, callId } = payload.data || {};\n                if (type === 'incoming_call' && callId) {\n                    await updateDoc(userDocRef, { currentCallId: callId });\n                }\n            });\n        }).catch(err => console.error(\"Failed to load messaging module\", err));\n        // -- END NOTIFICATION LOGIC --\n        \n        managePresence(user);\n        \n        callUnsubscribe = onSnapshot(userDocRef, (snap) => {\n          const data = snap.data();\n          const currentCallId = data?.currentCallId;\n          \n          if (callDocUnsubscribe) callDocUnsubscribe();\n          if(peerConnection) peerConnection.close();\n\n          if (currentCallId) {\n            peerConnection = new RTCPeerConnection(servers);\n            setPc(peerConnection);\n            \n            const callDocRef = doc(db, 'calls', currentCallId);\n            callDocUnsubscribe = onSnapshot(callDocRef, (callSnap) => {\n              if (callSnap.exists()) {\n                setActiveCall({ id: callSnap.id, ...callSnap.data() });\n              } else {\n                closeCall();\n              }\n            });\n          } else {\n            closeCall();\n          }\n        });\n      } else {\n        closeCall();\n      }\n    });\n\n    return () => {\n        authUnsubscribe();\n        if (callUnsubscribe) callUnsubscribe();\n        if (callDocUnsubscribe) callDocUnsubscribe();\n        if (messageUnsubscribe) messageUnsubscribe();\n        if(pc) pc.close();\n        delete (window as any).handleNotificationPermissionRequest;\n    };\n  }, []);\n\n  const answerCall = async () => {\n    if (!pc || !activeCall) return;\n\n    const callDocRef = doc(db, 'calls', activeCall.id);\n    const answerCandidates = collection(callDocRef, 'answerCandidates');\n    const offerCandidates = collection(callDocRef, 'offerCandidates');\n\n    pc.onicecandidate = (event) => {\n      event.candidate && addDoc(answerCandidates, event.candidate.toJSON());\n    };\n\n    const callData = (await getDoc(callDocRef)).data();\n    if (callData?.offer) {\n      await pc.setRemoteDescription(new RTCSessionDescription(callData.offer));\n    }\n\n    const answerDescription = await pc.createAnswer();\n    await pc.setLocalDescription(answerDescription);\n\n    await updateDoc(callDocRef, { answer: { type: answerDescription.type, sdp: answerDescription.sdp } });\n\n    onSnapshot(offerCandidates, (snapshot) => {\n      snapshot.docChanges().forEach((change) => {\n        if (change.type === 'added') {\n          pc.addIceCandidate(new RTCIceCandidate(change.doc.data()));\n        }\n      });\n    });\n  };\n\n  const handleEndCall = async () => {\n      if (!activeCall) return;\n      const user = auth.currentUser;\n      if (!user) return;\n      \n      const callId = activeCall.id;\n      \n      closeCall(); \n\n      const userDocRef = doc(db, 'users', user.uid);\n      await updateDoc(userDocRef, { currentCallId: deleteField() });\n      \n      const otherUserId = user.uid === activeCall.callerId ? activeCall.calleeId : activeCall.callerId;\n      if(otherUserId) {\n          const otherUserDocRef = doc(db, 'users', otherUserId);\n          const otherUserDocSnap = await getDoc(otherUserDocRef);\n          if (otherUserDocSnap.exists()) {\n              await updateDoc(otherUserDocRef, { currentCallId: deleteField() });\n          }\n      }\n\n      await cleanUpCall(callId);\n  };\n  \n  useEffect(() => {\n    return () => {\n        if (audioRef.current) {\n            audioRef.current.pause();\n            audioRef.current = null;\n        }\n    }\n  }, []);\n\n  const startSong = (song: Song) => {\n    if (audioRef.current) {\n      audioRef.current.pause();\n    }\n    const audio = new Audio(song.audioUrl);\n    audioRef.current = audio;\n    audio.play();\n\n    audio.addEventListener('play', () => setIsPlaying(true));\n    audio.addEventListener('pause', () => setIsPlaying(false));\n    audio.addEventListener('ended', playNext);\n\n    setActiveSong(song);\n    setIsPlaying(true);\n  };\n  \n  const playSong = (song: Song, queue: Song[] = [], index: number = -1) => {\n    startSong(song);\n    setSongQueue(queue);\n    setCurrentSongIndex(index);\n  };\n  \n  const pauseSong = () => {\n    if(audioRef.current) {\n        audioRef.current.pause();\n    }\n  };\n  \n  const toggleSong = () => {\n      if (isPlaying) {\n          pauseSong();\n      } else if(audioRef.current) {\n          audioRef.current.play();\n      }\n  };\n\n  const playNext = () => {\n    if (songQueue.length === 0) return;\n    const nextIndex = (currentSongIndex + 1) % songQueue.length;\n    setCurrentSongIndex(nextIndex);\n    startSong(songQueue[nextIndex]);\n  };\n\n  const playPrevious = () => {\n    if (songQueue.length === 0) return;\n    const prevIndex = (currentSongIndex - 1 + songQueue.length) % songQueue.length;\n    setCurrentSongIndex(prevIndex);\n    startSong(songQueue[prevIndex]);\n  };\n\n  const closeCall = () => {\n    if(pc) {\n      pc.close();\n    }\n    setPc(null);\n    setActiveCall(null);\n  };\n\n  const setDraft = (chatId: string, text: string) => {\n    setDrafts(prev => ({...prev, [chatId]: text}));\n  }\n\n  const value = {\n    isCalling,\n    setIsCalling,\n    callTarget,\n    setCallTarget,\n    activeCall,\n    answerCall,\n    handleEndCall,\n    closeCall,\n    pc,\n    activeSong,\n    isPlaying,\n    playSong,\n    pauseSong,\n    toggleSong,\n    playNext,\n    playPrevious,\n    audioPlayer: audioRef.current,\n    selectedChat,\n    setSelectedChat,\n    drafts,\n    setDraft,\n    isScopeVideoPlaying,\n    setIsScopeVideoPlaying,\n  };\n  \n    const handleEnableClick = () => {\n        if ((window as any).handleNotificationPermissionRequest) {\n            (window as any).handleNotificationPermissionRequest();\n        }\n    };\n\n    const handleDismissClick = () => {\n        setShowNotificationPrompt(false);\n    };\n\n\n  return (\n    <AppStateContext.Provider value={value}>\n      {children}\n      {activeCall && <CallScreen call={activeCall} />}\n       <AnimatePresence>\n        {showNotificationPrompt && (\n            <NotificationPrompt \n                onEnable={handleEnableClick}\n                onDismiss={handleDismissClick}\n            />\n        )}\n      </AnimatePresence>\n    </AppStateContext.Provider>\n  );\n}\n\nexport function useAppState() {\n  const context = useContext(AppStateContext);\n  if (context === undefined) {\n    throw new Error('useAppState must be used within an AppStateProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,3,4]}