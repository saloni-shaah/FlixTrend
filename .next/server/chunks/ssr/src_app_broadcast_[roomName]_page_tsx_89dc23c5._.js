module.exports=[44720,a=>{"use strict";let b,c,d,e,f;var g,h,i=a.i(87924),j=a.i(72131),k=a.i(25408),l=a.i(44512);let m=Math.min,n=Math.max,o=Math.round,p=Math.floor,q=a=>({x:a,y:a}),r={left:"right",right:"left",bottom:"top",top:"bottom"},s={start:"end",end:"start"};function t(a,b){return"function"==typeof a?a(b):a}function u(a){return a.split("-")[0]}function v(a){return a.split("-")[1]}function w(a){return"x"===a?"y":"x"}function x(a){return"y"===a?"height":"width"}function y(a){return["top","bottom"].includes(u(a))?"y":"x"}function z(a){return a.replace(/start|end/g,a=>s[a])}function A(a){return a.replace(/left|right|bottom|top/g,a=>r[a])}function B(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function C(a,b,c){let d,{reference:e,floating:f}=a,g=y(b),h=w(y(b)),i=x(h),j=u(b),k="y"===g,l=e.x+e.width/2-f.width/2,m=e.y+e.height/2-f.height/2,n=e[i]/2-f[i]/2;switch(j){case"top":d={x:l,y:e.y-f.height};break;case"bottom":d={x:l,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:m};break;case"left":d={x:e.x-f.width,y:m};break;default:d={x:e.x,y:e.y}}switch(v(b)){case"start":d[h]-=n*(c&&k?-1:1);break;case"end":d[h]+=n*(c&&k?-1:1)}return d}let D=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=C(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){let{name:f,fn:p}=h[c],{x:q,y:r,data:s,reset:t}=await p({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:g,elements:{reference:a,floating:b}});k=q??k,l=r??l,n={...n,[f]:{...n[f],...s}},t&&o<=50&&(o++,"object"==typeof t&&(t.placement&&(m=t.placement),t.rects&&(j=!0===t.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):t.rects),{x:k,y:l}=C(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};async function E(a,b){var c,d;void 0===b&&(b={});let{x:e,y:f,platform:g,rects:h,elements:i,strategy:j}=a,{boundary:k="clippingAncestors",rootBoundary:l="viewport",elementContext:m="floating",altBoundary:n=!1,padding:o=0}=t(b,a),p="number"!=typeof(d=o)?{top:0,right:0,bottom:0,left:0,...d}:{top:d,right:d,bottom:d,left:d},q=i[n?"floating"===m?"reference":"floating":m],r=B(await g.getClippingRect({element:null==(c=await (null==g.isElement?void 0:g.isElement(q)))||c?q:q.contextElement||await (null==g.getDocumentElement?void 0:g.getDocumentElement(i.floating)),boundary:k,rootBoundary:l,strategy:j})),s="floating"===m?{x:e,y:f,width:h.floating.width,height:h.floating.height}:h.reference,u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(i.floating)),v=await (null==g.isElement?void 0:g.isElement(u))&&await (null==g.getScale?void 0:g.getScale(u))||{x:1,y:1},w=B(g.convertOffsetParentRelativeRectToViewportRelativeRect?await g.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:s,offsetParent:u,strategy:j}):s);return{top:(r.top-w.top+p.top)/v.y,bottom:(w.bottom-r.bottom+p.bottom)/v.y,left:(r.left-w.left+p.left)/v.x,right:(w.right-r.right+p.right)/v.x}}async function F(a,b){let{placement:c,platform:d,elements:e}=a,f=await (null==d.isRTL?void 0:d.isRTL(e.floating)),g=u(c),h=v(c),i="y"===y(c),j=["left","top"].includes(g)?-1:1,k=f&&i?-1:1,l=t(b,a),{mainAxis:m,crossAxis:n,alignmentAxis:o}="number"==typeof l?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return h&&"number"==typeof o&&(n="end"===h?-1*o:o),i?{x:n*k,y:m*j}:{x:m*j,y:n*k}}function G(a){return function(a){return!1}(a)?(a.nodeName||"").toLowerCase():"#document"}function H(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function I(a){var b;return null==(b=(function(a){return!1}(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function J(a){return!1}function K(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=P(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!["inline","contents"].includes(e)}function L(a){return[":popover-open",":modal"].some(b=>{try{return a.matches(b)}catch{return!1}})}function M(a){let b=N(),c=a;return["transform","translate","scale","rotate","perspective"].some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||["transform","translate","scale","rotate","perspective","filter"].some(a=>(c.willChange||"").includes(a))||["paint","layout","strict","content"].some(a=>(c.contain||"").includes(a))}function N(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function O(a){return["html","body","#document"].includes(G(a))}function P(a){return H(a).getComputedStyle(a)}function Q(a){return{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function R(a){if("html"===G(a))return a;let b=a.assignedSlot||a.parentNode||!1||I(a);return b}function S(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=R(b);return O(c)?b.ownerDocument?b.ownerDocument.body:b.body:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=H(e);if(f){let a=T(g);return b.concat(g,g.visualViewport||[],K(e)?e:[],a&&c?S(a):[])}return b.concat(e,S(e,[],c))}function T(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function U(a){let b=P(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=!1,f=e?a.offsetWidth:c,g=e?a.offsetHeight:d,h=o(c)!==f||o(d)!==g;return h&&(c=f,d=g),{width:c,height:d,$:h}}function V(a){return 0,a.contextElement}function W(a){let b=V(a);1;return q(1)}let X=q(0);function Y(a){let b=H(a);return N()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:X}function Z(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=V(a),h=q(1);b&&(d||(h=W(a)));let i=(void 0===(e=c)&&(e=!1),d&&(!e||d===H(g))&&e)?Y(g):q(0),j=(f.left+i.x)/h.x,k=(f.top+i.y)/h.y,l=f.width/h.x,m=f.height/h.y;if(g){let a=H(g),b=d,c=a,e=T(c);for(;e&&d&&b!==c;){let a=W(e),b=e.getBoundingClientRect(),d=P(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;j*=a.x,k*=a.y,l*=a.x,m*=a.y,j+=f,k+=g,e=T(c=H(e))}}return B({width:l,height:m,x:j,y:k})}function $(a,b){let c=Q(a).scrollLeft;return b?b.left+c:Z(I(a)).left+c}function _(a,b,c){void 0===c&&(c=!1);let d=a.getBoundingClientRect();return{x:d.left+b.scrollLeft-(c?0:$(a,d)),y:d.top+b.scrollTop}}function aa(a,b,c){var d;let e;if("viewport"===b)e=function(a,b){let c=H(a),d=I(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=N();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b){let b,c,f,g,h,i,j;d=I(a),b=I(d),c=Q(d),f=d.ownerDocument.body,g=n(b.scrollWidth,b.clientWidth,f.scrollWidth,f.clientWidth),h=n(b.scrollHeight,b.clientHeight,f.scrollHeight,f.clientHeight),i=-c.scrollLeft+$(d),j=-c.scrollTop,"rtl"===P(f).direction&&(i+=n(b.clientWidth,f.clientWidth)-g),e={width:g,height:h,x:i,y:j}}else{1;{let c=Y(a);e={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}}return B(e)}function ab(a){return"static"===P(a).position}function ac(a,b){1;return null}function ad(a,b){let c=H(a);if(L(a))return c;1;{let b=R(a);for(;b&&!O(b);){0;b=R(b)}return c}}let ae=async function(a){let b=this.getOffsetParent||ad,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){var d;let e=(d=0,!1),f=I(b),g="fixed"===c,h=Z(a,!0,g,b),i={scrollLeft:0,scrollTop:0},j=q(0);if(e||!e&&!g)if(("body"!==G(b)||K(f))&&(i=Q(b)),e){let a=Z(b,!0,g,b);j.x=a.x+b.clientLeft,j.y=a.y+b.clientTop}else f&&(j.x=$(f));let k=!f||e||g?q(0):_(f,i);return{x:h.left+i.scrollLeft-j.x-k.x,y:h.top+i.scrollTop-j.y-k.y,width:h.width,height:h.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},af={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){var b,c;let{elements:d,rect:e,offsetParent:f,strategy:g}=a,h="fixed"===g,i=I(f),j=!!d&&L(d.floating);if(f===i||j&&h)return e;let k={scrollLeft:0,scrollTop:0},l=q(1),m=q(0),n=(b=0,!1);(n||!n&&!h)&&(("body"!==G(f)||K(i))&&(k=Q(f)),c=0,0);let o=!i||n||h?q(0):_(i,k,!0);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-k.scrollLeft*l.x+m.x+o.x,y:e.y*l.y-k.scrollTop*l.y+m.y+o.y}},getDocumentElement:I,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:d,strategy:e}=a,f=[..."clippingAncestors"===c?L(b)?[]:function(a,b){var c;let d=b.get(a);if(d)return d;let e=S(a,[],!1).filter(a=>{var b;return b=0,!1}),f="fixed"===P(a).position,g=f?R(a):a;return c=0,b.set(a,e),e}(b,this._c):[].concat(c),d],g=f[0],h=f.reduce((a,c)=>{let d=aa(b,c,e);return a.top=n(d.top,a.top),a.right=m(d.right,a.right),a.bottom=m(d.bottom,a.bottom),a.left=n(d.left,a.left),a},aa(b,g,e));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:ad,getElementRects:ae,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=U(a);return{width:b,height:c}},getScale:W,isElement:J,isRTL:function(a){return"rtl"===P(a).direction}};function ag(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}var ah="u">typeof globalThis?globalThis:a.g;function ai(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var aj,ak={exports:{}},al=ak.exports;let am=ai((aj||(aj=1,cG=function(){var a=function(){},b="undefined",c=["trace","debug","info","warn","error"],d={},e=null;function f(a,b){var c=a[b];if("function"==typeof c.bind)return c.bind(a);try{return Function.prototype.bind.call(c,a)}catch{return function(){return Function.prototype.apply.apply(c,[a,arguments])}}}function g(){for(var d=this.getLevel(),e=0;e<c.length;e++){var f=c[e];this[f]=e<d?a:this.methodFactory(f,d,this.name)}if(this.log=this.debug,typeof console===b&&d<this.levels.SILENT)return"No console available for logging"}function h(a){return function(){typeof console!==b&&(g.call(this),this[a].apply(this,arguments))}}function i(c,d,e){var g;return"debug"===(g=c)&&(g="log"),typeof console!==b&&(void 0!==console[g]?f(console,g):void 0!==console.log?f(console,"log"):a)||h.apply(this,arguments)}function j(a,b){var f,h,j,k=this;function l(){}function m(a){var b=a;if("string"==typeof b&&void 0!==k.levels[b.toUpperCase()]&&(b=k.levels[b.toUpperCase()]),"number"==typeof b&&b>=0&&b<=k.levels.SILENT)return b;throw TypeError("log.setLevel() called with invalid level: "+a)}k.name=a,k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=b||i,k.getLevel=function(){return j??h??f},k.setLevel=function(a,b){return j=m(a),!1!==b&&(c[j]||"silent").toUpperCase(),g.call(k)},k.setDefaultLevel=function(a){h=m(a),l()||k.setLevel(a,!1)},k.resetLevel=function(){j=null,g.call(k)},k.enableAll=function(a){k.setLevel(k.levels.TRACE,a)},k.disableAll=function(a){k.setLevel(k.levels.SILENT,a)},k.rebuild=function(){if(e!==k&&(f=m(e.getLevel())),g.call(k),e===k)for(var a in d)d[a].rebuild()},f=m(e?e.getLevel():"WARN");var n=l();null!=n&&(j=m(n)),g.call(k)}return(e=new j).getLogger=function(a){if("symbol"!=typeof a&&"string"!=typeof a||""===a)throw TypeError("You must supply a name when creating a logger.");var b=d[a];return b||(b=d[a]=new j(a,e.methodFactory)),b},e.noConflict=function(){return e},e.getLoggers=function(){return d},e.default=e,e},ak.exports?ak.exports=cG():al.log=cG()),ak.exports));var an=function(a,b){return(an=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)};function ao(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Class extends value "+String(b)+" is not a constructor or null");function c(){this.constructor=a}an(a,b),a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}function ap(a,b){var c,d,e,f={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=h(0),g.throw=h(1),g.return=h(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function h(h){return function(i){var j=[h,i];if(c)throw TypeError("Generator is already executing.");for(;g&&(g=0,j[0]&&(f=0)),f;)try{if(c=1,d&&(e=2&j[0]?d.return:j[0]?d.throw||((e=d.return)&&e.call(d),0):d.next)&&!(e=e.call(d,j[1])).done)return e;switch(d=0,e&&(j=[2&j[0],e.value]),j[0]){case 0:case 1:e=j;break;case 4:return f.label++,{value:j[1],done:!1};case 5:f.label++,d=j[1],j=[0];continue;case 7:j=f.ops.pop(),f.trys.pop();continue;default:if(!(e=(e=f.trys).length>0&&e[e.length-1])&&(6===j[0]||2===j[0])){f=0;continue}if(3===j[0]&&(!e||j[1]>e[0]&&j[1]<e[3])){f.label=j[1];break}if(6===j[0]&&f.label<e[1]){f.label=e[1],e=j;break}if(e&&f.label<e[2]){f.label=e[2],f.ops.push(j);break}e[2]&&f.ops.pop(),f.trys.pop();continue}j=b.call(a,f)}catch(a){j=[6,a],d=0}finally{c=e=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}}function aq(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function ar(a,b){var c="function"==typeof Symbol&&a[Symbol.iterator];if(!c)return a;var d,e,f=c.call(a),g=[];try{for(;(void 0===b||b-- >0)&&!(d=f.next()).done;)g.push(d.value)}catch(a){e={error:a}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(e)throw e.error}}return g}function as(a,b,c){if(c||2==arguments.length)for(var d,e=0,f=b.length;e<f;e++)!d&&e in b||(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function at(a){return this instanceof at?(this.v=a,this):new at(a)}function au(a){return"function"==typeof a}function av(a){var b=a(function(a){Error.call(a),a.stack=Error().stack});return b.prototype=Object.create(Error.prototype),b.prototype.constructor=b,b}var aw=av(function(a){return function(b){a(this),this.message=b?b.length+` errors occurred during unsubscription:
`+b.map(function(a,b){return b+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=b}});function ax(a,b){if(a){var c=a.indexOf(b);0<=c&&a.splice(c,1)}}var ay=function(){var a;function b(a){this.initialTeardown=a,this.closed=!1,this._parentage=null,this._finalizers=null}return b.prototype.unsubscribe=function(){var a,b,c,d,e;if(!this.closed){this.closed=!0;var f=this._parentage;if(f)if(this._parentage=null,Array.isArray(f))try{for(var g=aq(f),h=g.next();!h.done;h=g.next())h.value.remove(this)}catch(b){a={error:b}}finally{try{h&&!h.done&&(b=g.return)&&b.call(g)}finally{if(a)throw a.error}}else f.remove(this);var i=this.initialTeardown;if(au(i))try{i()}catch(a){e=a instanceof aw?a.errors:[a]}var j=this._finalizers;if(j){this._finalizers=null;try{for(var k=aq(j),l=k.next();!l.done;l=k.next()){var m=l.value;try{aB(m)}catch(a){e=e??[],a instanceof aw?e=as(as([],ar(e)),ar(a.errors)):e.push(a)}}}catch(a){c={error:a}}finally{try{l&&!l.done&&(d=k.return)&&d.call(k)}finally{if(c)throw c.error}}}if(e)throw new aw(e)}},b.prototype.add=function(a){var c;if(a&&a!==this)if(this.closed)aB(a);else{if(a instanceof b){if(a.closed||a._hasParent(this))return;a._addParent(this)}(this._finalizers=null!=(c=this._finalizers)?c:[]).push(a)}},b.prototype._hasParent=function(a){var b=this._parentage;return b===a||Array.isArray(b)&&b.includes(a)},b.prototype._addParent=function(a){var b=this._parentage;this._parentage=Array.isArray(b)?(b.push(a),b):b?[b,a]:a},b.prototype._removeParent=function(a){var b=this._parentage;b===a?this._parentage=null:Array.isArray(b)&&ax(b,a)},b.prototype.remove=function(a){var c=this._finalizers;c&&ax(c,a),a instanceof b&&a._removeParent(this)},(a=new b).closed=!0,b.EMPTY=a,b}(),az=ay.EMPTY;function aA(a){return a instanceof ay||a&&"closed"in a&&au(a.remove)&&au(a.add)&&au(a.unsubscribe)}function aB(a){au(a)?a():a.unsubscribe()}var aC=void 0,aD=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return setTimeout.apply(void 0,as([a,b],ar(c)))};function aE(a){aD(function(){throw a})}function aF(){}var aG=function(a){function b(b){var c=a.call(this)||this;return c.isStopped=!1,b?(c.destination=b,aA(b)&&b.add(c)):c.destination=aJ,c}return ao(b,a),b.create=function(a,b,c){return new aI(a,b,c)},b.prototype.next=function(a){this.isStopped||this._next(a)},b.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))},b.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},b.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},b.prototype._next=function(a){this.destination.next(a)},b.prototype._error=function(a){try{this.destination.error(a)}finally{this.unsubscribe()}},b.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},b}(ay),aH=function(){function a(a){this.partialObserver=a}return a.prototype.next=function(a){var b=this.partialObserver;if(b.next)try{b.next(a)}catch(a){aE(a)}},a.prototype.error=function(a){var b=this.partialObserver;if(b.error)try{b.error(a)}catch(a){aE(a)}else aE(a)},a.prototype.complete=function(){var a=this.partialObserver;if(a.complete)try{a.complete()}catch(a){aE(a)}},a}(),aI=function(a){function b(b,c,d){var e=a.call(this)||this;return e.destination=new aH(au(b)||!b?{next:b??void 0,error:c??void 0,complete:d??void 0}:b),e}return ao(b,a),b}(aG),aJ={closed:!0,next:aF,error:function(a){throw a},complete:aF},aK="function"==typeof Symbol&&Symbol.observable||"@@observable";function aL(a){return a}var aM=function(){function a(a){a&&(this._subscribe=a)}return a.prototype.lift=function(b){var c=new a;return c.source=this,c.operator=b,c},a.prototype.subscribe=function(a,b,c){var d,e,f=this,g=!function(a){return a&&a instanceof aG||a&&au(a.next)&&au(a.error)&&au(a.complete)&&aA(a)}(a)?new aI(a,b,c):a;return d=f.operator,e=f.source,g.add(d?d.call(g,e):e?f._subscribe(g):f._trySubscribe(g)),g},a.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(b){a.error(b)}},a.prototype.forEach=function(a,b){var c=this;return new(b=aN(b))(function(b,d){var e=new aI({next:function(b){try{a(b)}catch(a){d(a),e.unsubscribe()}},error:d,complete:b});c.subscribe(e)})},a.prototype._subscribe=function(a){var b;return null==(b=this.source)?void 0:b.subscribe(a)},a.prototype[aK]=function(){return this},a.prototype.pipe=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0===a.length?aL:1===a.length?a[0]:function(b){return a.reduce(function(a,b){return b(a)},b)})(this)},a.prototype.toPromise=function(a){var b=this;return new(a=aN(a))(function(a,c){var d;b.subscribe(function(a){return d=a},function(a){return c(a)},function(){return a(d)})})},a.create=function(b){return new a(b)},a}();function aN(a){var b;return null!=(b=a??aC)?b:Promise}function aO(a){return function(b){if(au(null==b?void 0:b.lift))return b.lift(function(b){try{return a(b,this)}catch(a){this.error(a)}});throw TypeError("Unable to lift unknown Observable type")}}function aP(a,b,c,d,e){return new aQ(a,b,c,d,e)}var aQ=function(a){function b(b,c,d,e,f,g){var h=a.call(this,b)||this;return h.onFinalize=f,h.shouldUnsubscribe=g,h._next=c?function(a){try{c(a)}catch(a){b.error(a)}}:a.prototype._next,h._error=e?function(a){try{e(a)}catch(a){b.error(a)}finally{this.unsubscribe()}}:a.prototype._error,h._complete=d?function(){try{d()}catch(a){b.error(a)}finally{this.unsubscribe()}}:a.prototype._complete,h}return ao(b,a),b.prototype.unsubscribe=function(){var b;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var c=this.closed;a.prototype.unsubscribe.call(this),c||null==(b=this.onFinalize)||b.call(this)}},b}(aG),aR=av(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),aS=function(a){function b(){var b=a.call(this)||this;return b.closed=!1,b.currentObservers=null,b.observers=[],b.isStopped=!1,b.hasError=!1,b.thrownError=null,b}return ao(b,a),b.prototype.lift=function(a){var b=new aT(this,this);return b.operator=a,b},b.prototype._throwIfClosed=function(){if(this.closed)throw new aR},b.prototype.next=function(a){var b,c;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var d=aq(this.currentObservers),e=d.next();!e.done;e=d.next())e.value.next(a)}catch(a){b={error:a}}finally{try{e&&!e.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}}},b.prototype.error=function(a){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=a;for(var b=this.observers;b.length;)b.shift().error(a)}},b.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var a=this.observers;a.length;)a.shift().complete()}},b.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(b.prototype,"observed",{get:function(){var a;return(null==(a=this.observers)?void 0:a.length)>0},enumerable:!1,configurable:!0}),b.prototype._trySubscribe=function(b){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,b)},b.prototype._subscribe=function(a){return this._throwIfClosed(),this._checkFinalizedStatuses(a),this._innerSubscribe(a)},b.prototype._innerSubscribe=function(a){var b=this,c=this.hasError,d=this.isStopped,e=this.observers;return c||d?az:(this.currentObservers=null,e.push(a),new ay(function(){b.currentObservers=null,ax(e,a)}))},b.prototype._checkFinalizedStatuses=function(a){var b=this.hasError,c=this.thrownError,d=this.isStopped;b?a.error(c):d&&a.complete()},b.prototype.asObservable=function(){var a=new aM;return a.source=this,a},b.create=function(a,b){return new aT(a,b)},b}(aM),aT=function(a){function b(b,c){var d=a.call(this)||this;return d.destination=b,d.source=c,d}return ao(b,a),b.prototype.next=function(a){var b,c;null==(c=null==(b=this.destination)?void 0:b.next)||c.call(b,a)},b.prototype.error=function(a){var b,c;null==(c=null==(b=this.destination)?void 0:b.error)||c.call(b,a)},b.prototype.complete=function(){var a,b;null==(b=null==(a=this.destination)?void 0:a.complete)||b.call(a)},b.prototype._subscribe=function(a){var b,c;return null!=(c=null==(b=this.source)?void 0:b.subscribe(a))?c:az},b}(aS),aU=function(a){function b(b){var c=a.call(this)||this;return c._value=b,c}return ao(b,a),Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),b.prototype._subscribe=function(b){var c=a.prototype._subscribe.call(this,b);return c.closed||b.next(this._value),c},b.prototype.getValue=function(){var a=this.hasError,b=this.thrownError,c=this._value;if(a)throw b;return this._throwIfClosed(),c},b.prototype.next=function(b){a.prototype.next.call(this,this._value=b)},b}(aS),aV=function(){return Date.now()},aW=function(a){function b(b,c){return a.call(this)||this}return ao(b,a),b.prototype.schedule=function(a,b){return this},b}(ay),aX=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return setInterval.apply(void 0,as([a,b],ar(c)))},aY=function(a){function b(b,c){var d=a.call(this,b,c)||this;return d.scheduler=b,d.work=c,d.pending=!1,d}return ao(b,a),b.prototype.schedule=function(a,b){if(void 0===b&&(b=0),this.closed)return this;this.state=a;var c,d=this.id,e=this.scheduler;return null!=d&&(this.id=this.recycleAsyncId(e,d,b)),this.pending=!0,this.delay=b,this.id=null!=(c=this.id)?c:this.requestAsyncId(e,this.id,b),this},b.prototype.requestAsyncId=function(a,b,c){return void 0===c&&(c=0),aX(a.flush.bind(a,this),c)},b.prototype.recycleAsyncId=function(a,b,c){if(void 0===c&&(c=0),null!=c&&this.delay===c&&!1===this.pending)return b;null!=b&&clearInterval(b)},b.prototype.execute=function(a,b){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var c=this._execute(a,b);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},b.prototype._execute=function(a,b){var c,d=!1;try{this.work(a)}catch(a){d=!0,c=a||Error("Scheduled action threw falsy error")}if(d)return this.unsubscribe(),c},b.prototype.unsubscribe=function(){if(!this.closed){var b=this.id,c=this.scheduler,d=c.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ax(d,this),null!=b&&(this.id=this.recycleAsyncId(c,b,null)),this.delay=null,a.prototype.unsubscribe.call(this)}},b}(aW),aZ=function(){function a(b,c){void 0===c&&(c=a.now),this.schedulerActionCtor=b,this.now=c}return a.prototype.schedule=function(a,b,c){return void 0===b&&(b=0),new this.schedulerActionCtor(this,a).schedule(c,b)},a.now=aV,a}(),a$=new(function(a){function b(b,c){void 0===c&&(c=aZ.now);var d=a.call(this,b,c)||this;return d.actions=[],d._active=!1,d}return ao(b,a),b.prototype.flush=function(a){var b,c=this.actions;if(this._active)return void c.push(a);this._active=!0;do if(b=a.execute(a.state,a.delay))break;while(a=c.shift())if(this._active=!1,b){for(;a=c.shift();)a.unsubscribe();throw b}},b}(aZ))(aY);function a_(a){var b;return(b=a[a.length-1])&&au(b.schedule)?a.pop():void 0}var a0=function(a){return a&&"number"==typeof a.length&&"function"!=typeof a};function a1(a){return au(null==a?void 0:a.then)}function a2(a){return Symbol.asyncIterator&&au(null==a?void 0:a[Symbol.asyncIterator])}function a3(a){return TypeError("You provided "+(null!==a&&"object"==typeof a?"an invalid object":"'"+a+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var a4="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function a5(a){return au(null==a?void 0:a[a4])}function a6(a){return function(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof at?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}(this,arguments,function(){var b,c,d;return ap(this,function(e){switch(e.label){case 0:b=a.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,at(b.read())];case 3:return d=(c=e.sent()).value,c.done?[4,at(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,at(d)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return b.releaseLock(),[7];case 10:return[2]}})})}function a7(a){return au(null==a?void 0:a.getReader)}function a8(a){if(a instanceof aM)return a;if(null!=a){var b,c,d,e;if(au(a[aK])){return b=a,new aM(function(a){var c=b[aK]();if(au(c.subscribe))return c.subscribe(a);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(a0(a)){return c=a,new aM(function(a){for(var b=0;b<c.length&&!a.closed;b++)a.next(c[b]);a.complete()})}if(a1(a)){return d=a,new aM(function(a){d.then(function(b){a.closed||(a.next(b),a.complete())},function(b){return a.error(b)}).then(null,aE)})}if(a2(a))return a9(a);if(a5(a)){return e=a,new aM(function(a){var b,c;try{for(var d=aq(e),f=d.next();!f.done;f=d.next()){var g=f.value;if(a.next(g),a.closed)return}}catch(a){b={error:a}}finally{try{f&&!f.done&&(c=d.return)&&c.call(d)}finally{if(b)throw b.error}}a.complete()})}if(a7(a))return a9(a6(a))}throw a3(a)}function a9(a){return new aM(function(b){(function(a,b){var c,d,e,f,g,h,i,j;return g=this,h=void 0,i=void 0,j=function(){var g;return ap(this,function(h){switch(h.label){case 0:h.trys.push([0,5,6,11]),c=function(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=aq(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}(a),h.label=1;case 1:return[4,c.next()];case 2:if((d=h.sent()).done)return[3,4];if(g=d.value,b.next(g),b.closed)return[2];h.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return e={error:h.sent()},[3,11];case 6:return h.trys.push([6,,9,10]),d&&!d.done&&(f=c.return)?[4,f.call(c)]:[3,8];case 7:h.sent(),h.label=8;case 8:return[3,10];case 9:if(e)throw e.error;return[7];case 10:return[7];case 11:return b.complete(),[2]}})},new(i||(i=Promise))(function(a,b){function c(a){try{e(j.next(a))}catch(a){b(a)}}function d(a){try{e(j.throw(a))}catch(a){b(a)}}function e(b){var e;b.done?a(b.value):((e=b.value)instanceof i?e:new i(function(a){a(e)})).then(c,d)}e((j=j.apply(g,h||[])).next())})})(a,b).catch(function(a){return b.error(a)})})}function ba(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=!1);var f=b.schedule(function(){c(),e?a.add(this.schedule(null,d)):this.unsubscribe()},d);if(a.add(f),!e)return f}function bb(a,b){return void 0===b&&(b=0),aO(function(c,d){c.subscribe(aP(d,function(c){return ba(d,a,function(){return d.next(c)},b)},function(){return ba(d,a,function(){return d.complete()},b)},function(c){return ba(d,a,function(){return d.error(c)},b)}))})}function bc(a,b){return void 0===b&&(b=0),aO(function(c,d){d.add(a.schedule(function(){return c.subscribe(d)},b))})}function bd(a,b){if(!a)throw Error("Iterable cannot be null");return new aM(function(c){ba(c,b,function(){var d=a[Symbol.asyncIterator]();ba(c,b,function(){d.next().then(function(a){a.done?c.complete():c.next(a.value)})},0,!0)})})}function be(a,b){return b?function(a,b){if(null!=a){if(au(a[aK]))return a8(a).pipe(bc(b),bb(b));if(a0(a))return new aM(function(c){var d=0;return b.schedule(function(){d===a.length?c.complete():(c.next(a[d++]),c.closed||this.schedule())})});if(a1(a))return a8(a).pipe(bc(b),bb(b));if(a2(a))return bd(a,b);if(a5(a))return new aM(function(c){var d;return ba(c,b,function(){d=a[a4](),ba(c,b,function(){var a,b,e;try{b=(a=d.next()).value,e=a.done}catch(a){c.error(a);return}e?c.complete():c.next(b)},0,!0)}),function(){return au(null==d?void 0:d.return)&&d.return()}});if(a7(a))return bd(a6(a),b)}throw a3(a)}(a,b):a8(a)}function bf(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a_(a);return be(a,c)}var bg=av(function(a){return function(b){void 0===b&&(b=null),a(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=b}});function bh(a){throw new bg(a)}function bi(a,b){return aO(function(c,d){var e=0;c.subscribe(aP(d,function(c){d.next(a.call(b,c,e++))}))})}var bj=Array.isArray;function bk(a,b,c){return void 0===c&&(c=1/0),au(b)?bk(function(c,d){return bi(function(a,e){return b(c,a,d,e)})(a8(a(c,d)))},c):("number"==typeof b&&(c=b),aO(function(b,d){var e,f,g,h,i,j,k;return e=c,f=[],g=0,h=0,i=!1,j=function(){!i||f.length||g||d.complete()},k=function(b){g++;var c=!1;a8(a(b,h++)).subscribe(aP(d,function(a){d.next(a)},function(){c=!0},void 0,function(){if(c)try{for(g--;f.length&&g<e;)!function(){var a=f.shift();k(a)}();j()}catch(a){d.error(a)}}))},b.subscribe(aP(d,function(a){return g<e?k(a):f.push(a)},function(){i=!0,j()})),function(){}}))}function bl(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return bk(aL,1)(be(a,a_(a)))}var bm=["addListener","removeListener"],bn=["addEventListener","removeEventListener"],bo=["on","off"];function bp(a,b){return function(c){return function(d){return a[c](b,d)}}}function bq(a,b){return aO(function(c,d){var e=0;c.subscribe(aP(d,function(c){return a.call(b,c,e++)&&d.next(c)}))})}function br(a,b){return a===b}function bs(a,b){var c;return aO((c=arguments.length>=2,function(d,e){var f=c,g=b,h=0;d.subscribe(aP(e,function(b){var c=h++;g=f?a(g,b,c):(f=!0,b),e.next(g)},void 0))}))}function bt(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=a_(a);return aO(function(b,d){(c?bl(a,b,c):bl(a,b)).subscribe(d)})}function bu(a){return aO(function(b,c){a8(a).subscribe(aP(c,function(){return c.complete()},aF)),c.closed||b.subscribe(c)})}var bv=Object.defineProperty,bw=Object.defineProperties,bx=Object.getOwnPropertyDescriptors,by=Object.getOwnPropertySymbols,bz=Object.prototype.hasOwnProperty,bA=Object.prototype.propertyIsEnumerable,bB=(a,b,c)=>b in a?bv(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,bC=(a,b)=>{for(var c in b||(b={}))bz.call(b,c)&&bB(a,c,b[c]);if(by)for(var c of by(b))bA.call(b,c)&&bB(a,c,b[c]);return a},bD=(a,b,c)=>new Promise((d,e)=>{var f=a=>{try{h(c.next(a))}catch(a){e(a)}},g=a=>{try{h(c.throw(a))}catch(a){e(a)}},h=a=>a.done?d(a.value):Promise.resolve(a.value).then(f,g);h((c=c.apply(a,b)).next())});function bE(a){var b,c,d;return!(typeof a>"u")&&(!!(b=a)&&b.hasOwnProperty("participant")&&b.hasOwnProperty("source")&&b.hasOwnProperty("track")&&"u">typeof(null==(c=b.publication)?void 0:c.track)||!!(d=a)&&d.hasOwnProperty("participant")&&d.hasOwnProperty("source")&&d.hasOwnProperty("publication")&&"u">typeof d.publication)}function bF(a){return!!a&&a.hasOwnProperty("participant")&&a.hasOwnProperty("source")&&typeof a.publication>"u"}function bG(a){if("string"==typeof a||"number"==typeof a)return`${a}`;if(bF(a))return`${a.participant.identity}_${a.source}_placeholder`;if(bE(a))return`${a.participant.identity}_${a.publication.source}_${a.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${a}`)}function bH(a,b){return!(typeof b>"u")&&(bE(a)?b.some(b=>b.participant.identity===a.participant.identity&&bE(b)&&b.publication.trackSid===a.publication.trackSid):!!bF(a)&&b.some(b=>b.participant.identity===a.participant.identity&&bF(b)&&b.source===a.source))}var bI=[l.RoomEvent.ConnectionStateChanged,l.RoomEvent.RoomMetadataChanged,l.RoomEvent.ActiveSpeakersChanged,l.RoomEvent.ConnectionQualityChanged,l.RoomEvent.ParticipantConnected,l.RoomEvent.ParticipantDisconnected,l.RoomEvent.ParticipantPermissionsChanged,l.RoomEvent.ParticipantMetadataChanged,l.RoomEvent.ParticipantNameChanged,l.RoomEvent.ParticipantAttributesChanged,l.RoomEvent.TrackMuted,l.RoomEvent.TrackUnmuted,l.RoomEvent.TrackPublished,l.RoomEvent.TrackUnpublished,l.RoomEvent.TrackStreamStateChanged,l.RoomEvent.TrackSubscriptionFailed,l.RoomEvent.TrackSubscriptionPermissionChanged,l.RoomEvent.TrackSubscriptionStatusChanged,l.RoomEvent.LocalTrackPublished,l.RoomEvent.LocalTrackUnpublished],bJ=([...(l.ParticipantEvent.TrackPublished,l.ParticipantEvent.TrackUnpublished,l.ParticipantEvent.TrackMuted,l.ParticipantEvent.TrackUnmuted,l.ParticipantEvent.TrackStreamStateChanged,l.ParticipantEvent.TrackSubscribed,l.ParticipantEvent.TrackUnsubscribed,l.ParticipantEvent.TrackSubscriptionPermissionChanged,l.ParticipantEvent.TrackSubscriptionFailed,l.ParticipantEvent.LocalTrackPublished,l.ParticipantEvent.LocalTrackUnpublished,[l.ParticipantEvent.ConnectionQualityChanged,l.ParticipantEvent.IsSpeakingChanged,l.ParticipantEvent.ParticipantMetadataChanged,l.ParticipantEvent.ParticipantPermissionsChanged,l.ParticipantEvent.TrackMuted,l.ParticipantEvent.TrackUnmuted,l.ParticipantEvent.TrackPublished,l.ParticipantEvent.TrackUnpublished,l.ParticipantEvent.TrackStreamStateChanged,l.ParticipantEvent.TrackSubscriptionFailed,l.ParticipantEvent.TrackSubscriptionPermissionChanged,l.ParticipantEvent.TrackSubscriptionStatusChanged]),l.ParticipantEvent.LocalTrackPublished,l.ParticipantEvent.LocalTrackUnpublished],am.getLogger("lk-components-js"));bJ.setDefaultLevel("WARN");var bK=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}],bL=((c=bL||{}).AgentState="lk.agent.state",c.PublishOnBehalf="lk.publish_on_behalf",c.TranscriptionFinal="lk.transcription_final",c.TranscriptionSegmentId="lk.segment_id",c.TranscribedTrackId="lk.transcribed_track_id",c),bM=[],bN={showChat:!1,unreadMessages:0,showSettings:!1};function bO(a){return"object"==typeof a}function bP(a){return Array.isArray(a)&&a.filter(bO).length>0}function bQ(a,b){var c,d,e,f;return(null!=(d=null==(c=a.joinedAt)?void 0:c.getTime())?d:0)-(null!=(f=null==(e=b.joinedAt)?void 0:e.getTime())?f:0)}function bR(a,b){return Array(Math.max(a.length,b.length)).fill([]).map((c,d)=>[a[d],b[d]])}function bS(a,b,c){return a.filter(a=>!b.map(a=>c(a)).includes(c(a)))}function bT(a){return a.map(a=>"string"==typeof a||"number"==typeof a?`${a}`:bG(a))}function bU(a,b){let c=b.findIndex(b=>bG(b)===bG(a));if(-1===c)throw Error(`Element not part of the array: ${bG(a)} not in ${bT(b)}`);return c}function bV(a,b){return a.reduce((a,c,d)=>d%b==0?[...a,[c]]:[...a.slice(0,-1),[...a.slice(-1)[0],c]],[])}function bW(a){return`lk-${a}`}function bX(a){if(bE(a))return a.publication;{let{source:b,name:c,participant:d}=a;if(b&&c)return d.getTrackPublications().find(a=>a.source===b&&a.trackName===c);if(c)return d.getTrackPublicationByName(c);if(b)return d.getTrackPublication(b);throw Error("At least one of source and name needs to be defined")}}function bY(a,...b){return new aM(c=>{let d=()=>{c.next(a)};return b.forEach(b=>{a.on(b,d)}),()=>{b.forEach(b=>{a.off(b,d)})}}).pipe(bt(a))}function bZ(a,b){return new aM(c=>{let d=(...a)=>{c.next(a)};return a.on(b,d),()=>{a.off(b,d)}})}function b$(a){return bY(a,l.RoomEvent.AudioPlaybackStatusChanged).pipe(bi(a=>({canPlayAudio:a.canPlaybackAudio})))}function b_(a){return bY(a,l.RoomEvent.VideoPlaybackStatusChanged).pipe(bi(a=>({canPlayVideo:a.canPlaybackVideo})))}function b0(a,...b){return new aM(c=>{let d=()=>{c.next(a)};return b.forEach(b=>{a.on(b,d)}),()=>{b.forEach(b=>{a.off(b,d)})}}).pipe(bt(a))}function b1(a){return b0(a,l.ParticipantEvent.TrackMuted,l.ParticipantEvent.TrackUnmuted,l.ParticipantEvent.ParticipantPermissionsChanged,l.ParticipantEvent.TrackPublished,l.ParticipantEvent.TrackUnpublished,l.ParticipantEvent.LocalTrackPublished,l.ParticipantEvent.LocalTrackUnpublished,l.ParticipantEvent.MediaDevicesError,l.ParticipantEvent.TrackSubscriptionStatusChanged).pipe(bi(a=>{let{isMicrophoneEnabled:b,isCameraEnabled:c,isScreenShareEnabled:d}=a,e=a.getTrackPublication(l.Track.Source.Microphone);return{isCameraEnabled:c,isMicrophoneEnabled:b,isScreenShareEnabled:d,cameraTrack:a.getTrackPublication(l.Track.Source.Camera),microphoneTrack:e,participant:a}}))}function b2(a,b){return new aM(c=>{let d=(...a)=>{c.next(a)};return a.on(b,d),()=>{a.off(b,d)}})}function b3(a){var b,c,d,e;return b0(a.participant,l.ParticipantEvent.TrackMuted,l.ParticipantEvent.TrackUnmuted,l.ParticipantEvent.TrackSubscribed,l.ParticipantEvent.TrackUnsubscribed,l.ParticipantEvent.LocalTrackPublished,l.ParticipantEvent.LocalTrackUnpublished).pipe(bi(b=>{var c,d;let e=null!=(c=a.publication)?c:b.getTrackPublication(a.source);return null==(d=null==e?void 0:e.isMuted)||d}),bt(null==(e=null!=(d=null==(b=a.publication)?void 0:b.isMuted)?d:null==(c=a.participant.getTrackPublication(a.source))?void 0:c.isMuted)||e))}function b4(a,b){return bD(this,arguments,function*(a,b,c={}){let{reliable:d,destinationIdentities:e,topic:f}=c;yield a.publishData(b,{destinationIdentities:e,topic:f,reliable:d})})}var b5=new WeakMap,b6=a=>JSON.parse(new TextDecoder().decode(a)),b7=a=>new TextEncoder().encode(JSON.stringify(a));function b8(a,b,c=!0){let d=[a.localParticipant,...Array.from(a.remoteParticipants.values())],e=[];return d.forEach(a=>{b.forEach(b=>{let d=Array.from(a.trackPublications.values()).filter(a=>a.source===b&&(!c||a.track)).map(b=>({participant:a,publication:b,source:b.source}));e.push(...d)})}),{trackReferences:e,participants:d}}var{load:b9,save:ca}=(cH="lk-user-choices",{load:()=>(function(a){if(typeof localStorage>"u")return void bJ.error("Local storage is not available.");try{let b=localStorage.getItem(a);if(!b)return void bJ.warn(`Item with key ${a} does not exist in local storage.`);return JSON.parse(b)}catch(a){bJ.error(`Error getting item from local storage: ${a}`);return}})(cH),save:a=>(function(a,b){if(typeof localStorage>"u")return void bJ.error("Local storage is not available.");try{if(b){let c=Object.fromEntries(Object.entries(b).filter(([,a])=>""!==a));localStorage.setItem(a,JSON.stringify(c))}}catch(a){bJ.error(`Error setting item to local storage: ${a}`)}})(cH,a)});function cb(a,b){if("show_chat"===b.msg)return{...a,showChat:!0,unreadMessages:0};if("hide_chat"===b.msg)return{...a,showChat:!1};if("toggle_chat"!==b.msg)return"unread_msg"===b.msg?{...a,unreadMessages:b.count}:"toggle_settings"===b.msg?{...a,showSettings:!a.showSettings}:{...a};{let b={...a,showChat:!a.showChat};return!0===b.showChat&&(b.unreadMessages=0),b}}function cc(a,b){return"set_pin"===b.msg?[b.trackReference]:"clear_pin"===b.msg?[]:{...a}}let cd=j.createContext(void 0);function ce(){let a=j.useContext(cd);if(!a)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return a}function cf(){return j.useContext(cd)}let cg=j.createContext(void 0);function ch(){return j.useContext(cg)}function ci(a){let b=ch(),c=a??b;if(!c)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return c}let cj=j.createContext(void 0);function ck(){return j.useContext(cj)}function cl(a){let b=ck(),c=ch(),d=a??b??(null==c?void 0:c.participant);if(!d)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return d}let cm=j.createContext(void 0);function cn(){let a=j.useContext(cm);if(!a)throw Error("tried to access room context outside of livekit room component");return a}function co(){return j.useContext(cm)}function cp(a){let b=co(),c=a??b;if(!c)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return c}j.createContext(void 0);let cq=j.createContext(void 0);function cr(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}function cs(...a){let b={...a[0]};for(let c=1;c<a.length;c++){let d=a[c];for(let a in d){let c=b[a],e=d[a];"function"==typeof c&&"function"==typeof e&&"o"===a[0]&&"n"===a[1]&&a.charCodeAt(2)>=65&&90>=a.charCodeAt(2)?b[a]=function(...a){return(...b)=>{for(let c of a)if("function"==typeof c)try{c(...b)}catch(a){console.error(a)}}}(c,e):("className"===a||"UNSAFE_className"===a)&&"string"==typeof c&&"string"==typeof e?b[a]=cr(c,e):b[a]=void 0!==e?e:c}}return b}function ct(a){return void 0!==a}function cu(...a){return cs(...a.filter(ct))}function cv(a,b,c){return j.Children.map(a,d=>j.isValidElement(d)&&j.Children.only(a)?(d.props.className&&(b??(b={}),b.className=cr(d.props.className,b.className),b.style={...d.props.style,...b.style}),j.cloneElement(d,{...b,key:c})):d)}function cw(a,b){return"processor"===a&&b&&"object"==typeof b&&"name"in b?b.name:"e2ee"===a&&b?"e2ee-enabled":b}let cx={connect:!0,audio:!1,video:!1},cy=j.forwardRef(function(a,b){let{room:c,htmlProps:d}=function(a){let{token:b,serverUrl:c,options:d,room:e,connectOptions:f,connect:g,audio:h,video:i,screen:k,onConnected:m,onDisconnected:n,onError:o,onMediaDeviceFailure:p,onEncryptionError:q,simulateParticipants:r,...s}={...cx,...a};d&&e&&bJ.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[t,u]=j.useState(),v=j.useRef(g);j.useEffect(()=>{u(e??new l.Room(d))},[e,JSON.stringify(d,cw)]);let w=j.useMemo(()=>{let{className:a}={className:"lk-room-container"};return cs(s,{className:a})},[s]);return j.useEffect(()=>{if(!t)return;let a=()=>{let a=t.localParticipant;bJ.debug("trying to publish local tracks"),Promise.all([a.setMicrophoneEnabled(!!h,"boolean"!=typeof h?h:void 0),a.setCameraEnabled(!!i,"boolean"!=typeof i?i:void 0),a.setScreenShareEnabled(!!k,"boolean"!=typeof k?k:void 0)]).catch(a=>{bJ.warn(a),null==o||o(a)})},b=(a,b)=>{let c=l.MediaDeviceFailure.getFailure(a);null==p||p(c,b)},c=a=>{null==q||q(a)},d=a=>{null==n||n(a)},e=()=>{null==m||m()};return t.on(l.RoomEvent.SignalConnected,a).on(l.RoomEvent.MediaDevicesError,b).on(l.RoomEvent.EncryptionError,c).on(l.RoomEvent.Disconnected,d).on(l.RoomEvent.Connected,e),()=>{t.off(l.RoomEvent.SignalConnected,a).off(l.RoomEvent.MediaDevicesError,b).off(l.RoomEvent.EncryptionError,c).off(l.RoomEvent.Disconnected,d).off(l.RoomEvent.Connected,e)}},[t,h,i,k,o,q,p,m,n]),j.useEffect(()=>{if(t){if(r)return void t.simulateParticipants({participants:{count:r},publish:{audio:!0,useRealTracks:!0}});if(g){if(v.current=!0,bJ.debug("connecting"),!b)return void bJ.debug("no token yet");if(!c){bJ.warn("no livekit url provided"),null==o||o(Error("no livekit url provided"));return}t.connect(c,b,f).catch(a=>{bJ.warn(a),!0===v.current&&(null==o||o(a))})}else bJ.debug("disconnecting because connect is false"),v.current=!1,t.disconnect()}},[g,b,JSON.stringify(f),t,o,c,r]),j.useEffect(()=>{if(t)return()=>{bJ.info("disconnecting on onmount"),t.disconnect()}},[t]),{room:t,htmlProps:w}}(a);return j.createElement("div",{ref:b,...d},c&&j.createElement(cm.Provider,{value:c},j.createElement(cq.Provider,{value:a.featureFlags},a.children)))}),cz=a=>{let c,d,e,[f,g]=j.useState({width:0,height:0});j.useLayoutEffect(()=>{if(a.current){let{width:b,height:c}=a.current.getBoundingClientRect();g({width:b,height:c})}},[a.current]);let h=j.useCallback(a=>g(a.contentRect),[]);return d=b||(b=void 0),c=j.useRef(h),j.useEffect(()=>{c.current=h}),e=c,j.useLayoutEffect(()=>{let b=!1,c=a.current;if(c)return null==d||d.subscribe(c,f),()=>{b=!0,null==d||d.unsubscribe(c,f)};function f(a,c){b||e.current(a,c)}},[a.current,d,e]),null==d||d.observer,f};function cA(a,b,c=!0){let[d,e]=j.useState(b);return j.useEffect(()=>{c&&e(b)},[a,c]),d}function cB(a){let b=cp(a);return cA(j.useMemo(()=>bZ(b,l.RoomEvent.ConnectionStateChanged).pipe(bi(([a])=>a),bt(b.state)),[b]),b.state)}function cC(a,b={}){var c,d;let e=cl("string"==typeof a?b.participant:a.participant),f="string"==typeof a?{participant:e,source:a}:a,[g,h]=j.useState(!!(null!=(c=f.publication)&&c.isMuted||null!=(d=e.getTrackPublication(f.source))&&d.isMuted));return j.useEffect(()=>{let a=b3(f).subscribe(h);return()=>a.unsubscribe()},[bG(f)]),g}function cD(a,b,c={}){let d,e,f,g,h,i,k,m,n=j.useRef([]),o=j.useRef(-1),p=b!==o.current,q="function"==typeof c.customSortFunction?c.customSortFunction(a):(h=[],i=[],k=[],m=[],a.forEach(a=>{a.participant.isLocal&&a.source===l.Track.Source.Camera?h.push(a):a.source===l.Track.Source.ScreenShare?i.push(a):a.source===l.Track.Source.Camera?k.push(a):m.push(a)}),d=[],e=[],i.forEach(a=>{a.participant.isLocal?d.push(a):e.push(a)}),d.sort((a,b)=>bQ(a.participant,b.participant)),e.sort((a,b)=>bQ(a.participant,b.participant)),[...h,...e,...d,...(f=[],g=[],k.forEach(a=>{a.participant.isLocal?f.push(a):g.push(a)}),g.sort((a,b)=>{var c,d,e,f,g,h,i,j,k;let l;return a.participant.isSpeaking&&b.participant.isSpeaking?(c=a.participant,b.participant.audioLevel-c.audioLevel):a.participant.isSpeaking!==b.participant.isSpeaking?(d=a.participant,e=b.participant,d.isSpeaking===e.isSpeaking?0:d.isSpeaking?-1:1):a.participant.lastSpokeAt!==b.participant.lastSpokeAt?(f=a.participant,g=b.participant,void 0!==f.lastSpokeAt||void 0!==g.lastSpokeAt?(null!=(i=null==(h=g.lastSpokeAt)?void 0:h.getTime())?i:0)-(null!=(k=null==(j=f.lastSpokeAt)?void 0:j.getTime())?k:0):0):bE(a)!==bE(b)?bE(a)?bE(b)?0:-1:+!!bE(b):a.participant.isCameraEnabled!==b.participant.isCameraEnabled?(l=a.participant.isCameraEnabled)!==b.participant.isCameraEnabled?l?-1:1:0:bQ(a.participant,b.participant)}),[...f,...g]),...m]),r=[...q];if(!1===p)try{r=function(a,b,c){var d,e;let f=(d=a,e=b,d.map(a=>e.find(b=>bG(a)===bG(b)||"number"!=typeof a&&bF(a)&&bE(b)&&bF(a)&&bE(b)&&b.participant.identity===a.participant.identity&&b.source===a.source)??a));if(f.length<b.length){let a=bS(b,f,bG);f=[...f,...a]}let g=bV(f,c);if(bR(g,bV(b,c)).forEach(([a,b],d)=>{if(a&&b){var e;let g={dropped:bS(e=bV(f,c)[d],b,bG),added:bS(b,e,bG)};(0!==g.added.length||0!==g.dropped.length)&&(bJ.debug(`Detected visual changes on page: ${d}, current: ${bT(a)}, next: ${bT(b)}`,{changes:g}),g.added.length===g.dropped.length&&bR(g.added,g.dropped).forEach(([a,b])=>{if(a&&b){var c;let d,e;d=bU(a,c=f),e=bU(b,c),c.splice(d,1,b),c.splice(e,1,a),f=c}else throw Error(`For a swap action we need a addition and a removal one is missing: ${a}, ${b}`)}),0===g.added.length&&g.dropped.length>0&&g.dropped.forEach(a=>{var b;let c;c=bU(a,b=f),b.splice(c,1),f=b}),g.added.length>0&&0===g.dropped.length&&g.added.forEach(a=>{f=[...f,a]}))}}),f.length>b.length){let a=bS(f,b,bG);f=f.filter(b=>!a.map(bG).includes(bG(b)))}return f}(n.current,q,b)}catch(a){bJ.error("Error while running updatePages(): ",a)}return p?n.current=q:n.current=r,o.current=b,r}function cE(a=[l.Track.Source.Camera,l.Track.Source.Microphone,l.Track.Source.ScreenShare,l.Track.Source.ScreenShareAudio,l.Track.Source.Unknown],b={}){let c=cp(b.room),[d,e]=j.useState([]),[f,g]=j.useState([]),h=j.useMemo(()=>a.map(a=>bO(a)?a.source:a),[JSON.stringify(a)]);return j.useEffect(()=>{var a,d,f;let i,j,k=(i=null!=(d=(a={additionalRoomEvents:b.updateOnlyOn,onlySubscribed:b.onlySubscribed}).additionalRoomEvents)?d:bI,j=null==(f=a.onlySubscribed)||f,bY(c,...Array.from(new Set([l.RoomEvent.ParticipantConnected,l.RoomEvent.ParticipantDisconnected,l.RoomEvent.ConnectionStateChanged,l.RoomEvent.LocalTrackPublished,l.RoomEvent.LocalTrackUnpublished,l.RoomEvent.TrackPublished,l.RoomEvent.TrackUnpublished,l.RoomEvent.TrackSubscriptionStatusChanged,...i]).values())).pipe(bi(a=>{let b=b8(a,h,j);return bJ.debug(`TrackReference[] was updated. (length ${b.trackReferences.length})`,b),b}),bt(b8(c,h,j)))).subscribe(({trackReferences:a,participants:b})=>{bJ.debug("setting track bundles",a,b),e(a),g(b)});return()=>k.unsubscribe()},[c,JSON.stringify(b.onlySubscribed),JSON.stringify(b.updateOnlyOn),JSON.stringify(a)]),j.useMemo(()=>{if(!bP(a))return d;{let b=function(a,b){let c=new Map;if(bP(a)){let d=a.filter(a=>a.withPlaceholder).map(a=>a.source);b.forEach(a=>{let b=a.getTrackPublications().map(a=>{var b;return null==(b=a.track)?void 0:b.source}).filter(a=>void 0!==a),e=Array.from(function(a,b){let c=new Set(a);for(let a of b)c.delete(a);return c}(new Set(d),new Set(b)));e.length>0&&c.set(a.identity,e)})}return c}(a,f),c=Array.from(d);return f.forEach(a=>{b.has(a.identity)&&(b.get(a.identity)??[]).forEach(b=>{d.find(({participant:c,publication:d})=>a.identity===c.identity&&d.source===b)||(bJ.debug(`Add ${b} placeholder for participant ${a.identity}.`),c.push({participant:a,source:b}))})}),c}},[d,f,a])}let cF={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};bL.AgentState;var cG,cH,cI,cJ={exports:{}};!function(){if(cI)return cJ.exports;cI=1;var a,b="object"==typeof Reflect?Reflect:null,c=b&&"function"==typeof b.apply?b.apply:function(a,b,c){return Function.prototype.apply.call(a,b,c)};a=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:function(a){return Object.getOwnPropertyNames(a)};var d=Number.isNaN||function(a){return a!=a};function e(){e.init.call(this)}cJ.exports=e,cJ.exports.once=function(a,b){return new Promise(function(c,d){var e,f,g;function h(c){a.removeListener(b,i),d(c)}function i(){"function"==typeof a.removeListener&&a.removeListener("error",h),c([].slice.call(arguments))}o(a,b,i,{once:!0}),"error"!==b&&(e=a,f=h,g={once:!0},"function"==typeof e.on&&o(e,"error",f,g))})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var f=10;function g(a){if("function"!=typeof a)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}function h(a){return void 0===a._maxListeners?e.defaultMaxListeners:a._maxListeners}function i(a,b,c,d){var e,f,i;if(g(c),void 0===(f=a._events)?(f=a._events=Object.create(null),a._eventsCount=0):(void 0!==f.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),f=a._events),i=f[b]),void 0===i)i=f[b]=c,++a._eventsCount;else if("function"==typeof i?i=f[b]=d?[c,i]:[i,c]:d?i.unshift(c):i.push(c),(e=h(a))>0&&i.length>e&&!i.warned){i.warned=!0;var j=Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");j.name="MaxListenersExceededWarning",j.emitter=a,j.type=b,j.count=i.length,console&&console.warn&&console.warn(j)}return a}function j(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(a,b,c){var d={fired:!1,wrapFn:void 0,target:a,type:b,listener:c},e=j.bind(d);return e.listener=c,d.wrapFn=e,e}function l(a,b,c){var d=a._events;if(void 0===d)return[];var e=d[b];return void 0===e?[]:"function"==typeof e?c?[e.listener||e]:[e]:c?function(a){for(var b=Array(a.length),c=0;c<b.length;++c)b[c]=a[c].listener||a[c];return b}(e):n(e,e.length)}function m(a){var b=this._events;if(void 0!==b){var c=b[a];if("function"==typeof c)return 1;if(void 0!==c)return c.length}return 0}function n(a,b){for(var c=Array(b),d=0;d<b;++d)c[d]=a[d];return c}function o(a,b,c,d){if("function"==typeof a.on)d.once?a.once(b,c):a.on(b,c);else if("function"==typeof a.addEventListener)a.addEventListener(b,function e(f){d.once&&a.removeEventListener(b,e),c(f)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(a){if("number"!=typeof a||a<0||d(a))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");f=a}}),e.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(a){if("number"!=typeof a||a<0||d(a))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+a+".");return this._maxListeners=a,this},e.prototype.getMaxListeners=function(){return h(this)},e.prototype.emit=function(a){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);var e="error"===a,f=this._events;if(void 0!==f)e=e&&void 0===f.error;else if(!e)return!1;if(e){if(b.length>0&&(g=b[0]),g instanceof Error)throw g;var g,h=Error("Unhandled error."+(g?" ("+g.message+")":""));throw h.context=g,h}var i=f[a];if(void 0===i)return!1;if("function"==typeof i)c(i,this,b);else for(var j=i.length,k=n(i,j),d=0;d<j;++d)c(k[d],this,b);return!0},e.prototype.addListener=function(a,b){return i(this,a,b,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(a,b){return i(this,a,b,!0)},e.prototype.once=function(a,b){return g(b),this.on(a,k(this,a,b)),this},e.prototype.prependOnceListener=function(a,b){return g(b),this.prependListener(a,k(this,a,b)),this},e.prototype.removeListener=function(a,b){var c,d,e,f,h;if(g(b),void 0===(d=this._events)||void 0===(c=d[a]))return this;if(c===b||c.listener===b)0==--this._eventsCount?this._events=Object.create(null):(delete d[a],d.removeListener&&this.emit("removeListener",a,c.listener||b));else if("function"!=typeof c){for(e=-1,f=c.length-1;f>=0;f--)if(c[f]===b||c[f].listener===b){h=c[f].listener,e=f;break}if(e<0)return this;0===e?c.shift():function(a,b){for(;b+1<a.length;b++)a[b]=a[b+1];a.pop()}(c,e),1===c.length&&(d[a]=c[0]),void 0!==d.removeListener&&this.emit("removeListener",a,h||b)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(a){var b,c,d;if(void 0===(c=this._events))return this;if(void 0===c.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==c[a]&&(0==--this._eventsCount?this._events=Object.create(null):delete c[a]),this;if(0==arguments.length){var e,f=Object.keys(c);for(d=0;d<f.length;++d)"removeListener"!==(e=f[d])&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(b=c[a]))this.removeListener(a,b);else if(void 0!==b)for(d=b.length-1;d>=0;d--)this.removeListener(a,b[d]);return this},e.prototype.listeners=function(a){return l(this,a,!0)},e.prototype.rawListeners=function(a){return l(this,a,!1)},e.listenerCount=function(a,b){return"function"==typeof a.listenerCount?a.listenerCount(b):m.call(a,b)},e.prototype.listenerCount=m,e.prototype.eventNames=function(){return this._eventsCount>0?a(this._events):[]},cJ.exports}();var cK=((d=cK||{}).CameraChanged="cameraChanged",d.MicrophoneChanged="microphoneChanged",d.StateChanged="stateChanged",d),cL=((e=cL||{}).ConnectionStateChanged="connectionStateChanged",e.MediaDevicesError="mediaDevicesError",e.EncryptionError="encryptionError",e),cM=((f=cM||{}).MessageReceived="messageReceived",f);let cN=j.forwardRef(function(a,b){let{mergedProps:c}=function({props:a}){let{dispatch:b,state:c}=ce().widget,{className:d}=j.useMemo(()=>({className:[bW("button"),bW("chat-toggle")].join(" ")}),[]);return{mergedProps:j.useMemo(()=>cs(a,{className:d,onClick:()=>{b&&b({msg:"toggle_chat"})},"aria-pressed":null!=c&&c.showChat?"true":"false","data-lk-unread-msgs":c?c.unreadMessages<10?c.unreadMessages.toFixed(0):"9+":"0"}),[a,d,b,c])}}({props:a});return j.createElement("button",{ref:b,...c},a.children)}),cO=j.forwardRef(function(a,b){let c,d,{buttonProps:e}=(d=cB(c=cn()),{buttonProps:j.useMemo(()=>{let{className:b,disconnect:e}={className:bW("disconnect-button"),disconnect:a=>{c.disconnect(a)}};return cs(a,{className:b,onClick:()=>e(a.stopTracks??!0),disabled:d===l.ConnectionState.Disconnected})},[c,a,d])});return j.createElement("button",{ref:b,...e},a.children)}),cP=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...a},j.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),j.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),cQ=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...a},j.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),cR=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...a},j.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),cS=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...a},j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),cT=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),cU=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},j.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),cV=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),cW=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),cX=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),cY=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...a},j.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),j.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),cZ=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...a},j.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),j.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),c$=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...a},j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),c_=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...a},j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("g",{opacity:.25},j.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),c0=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...a},j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("g",{opacity:.25},j.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),j.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),c1=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...a},j.createElement("g",{opacity:.25},j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),j.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),c2=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...a},j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),c3=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...a},j.createElement("g",{fill:"currentColor"},j.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),j.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),c4=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),j.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),c5=a=>j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...a},j.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},j.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),c6=j.forwardRef(function({trackRef:a,...b},c){let d=ch(),{mergedProps:e,inFocus:f}=function({trackRef:a,props:b}){let c=ci(a),d=cf(),{className:e}=j.useMemo(()=>({className:[bW("button"),bW("focus-toggle-button")].join(" ")}),[]),f=j.useMemo(()=>bH(c,null==d?void 0:d.pin.state),[c,null==d?void 0:d.pin.state]);return{mergedProps:j.useMemo(()=>cs(b,{className:e,onClick:a=>{var e,g,h,i,j;null==(e=b.onClick)||e.call(b,a),f?null==(h=null==d?void 0:(g=d.pin).dispatch)||h.call(g,{msg:"clear_pin"}):null==(j=null==d?void 0:(i=d.pin).dispatch)||j.call(i,{msg:"set_pin",trackReference:c})}}),[b,e,c,f,null==d?void 0:d.pin]),inFocus:f}}({trackRef:a??d,props:b});return j.createElement(cd.Consumer,null,a=>void 0!==a&&j.createElement("button",{ref:c,...e},b.children?b.children:f?j.createElement(c5,null):j.createElement(cU,null)))}),c7=j.forwardRef(function({kind:a,initialSelection:b,onActiveDeviceChange:c,onDeviceListChange:d,onDeviceSelectError:e,exactMatch:f,track:g,requestPermissions:h,onError:i,...k},m){let n=co(),o=j.useRef("default"),p=j.useCallback(a=>{n&&n.emit(l.RoomEvent.MediaDevicesError,a),null==i||i(a)},[n,i]),{devices:q,activeDeviceId:r,setActiveMediaDevice:s,className:t}=function({kind:a,room:b,track:c,requestPermissions:d,onError:e}){let f=co(),g=j.useMemo(()=>b??f??new l.Room,[b,f]),h=cA(j.useMemo(()=>(function(a,b,c=!0){return bl(new aM(d=>{l.Room.getLocalDevices(a,c).then(a=>{d.next(a),d.complete()}).catch(a=>{null==b||b(a),d.next([]),d.complete()})}),new aM(d=>{let e=()=>bD(this,null,function*(){try{let b=yield l.Room.getLocalDevices(a,c);d.next(b)}catch(a){null==b||b(a)}});return()=>{var a;null==(a=null==navigator?void 0:navigator.mediaDevices)||a.removeEventListener("devicechange",e)}}))})(a,e,d),[a,d,e]),[]),[i,k]=j.useState((null==g?void 0:g.getActiveDevice(a))??"default"),{className:m,activeDeviceObservable:n,setActiveMediaDevice:o}=j.useMemo(()=>(function(a,b,c){let d=new aU(void 0),e=bZ(b,l.RoomEvent.ActiveDeviceChanged).pipe(bq(([b])=>b===a),bi(([a,b])=>(bJ.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:a,deviceId:b}),b))),f=(c,...e)=>bD(this,[c,...e],function*(c,e={}){var f,g,h;if(b){let i,j=(0,l.getBrowser)();if("audiooutput"===a&&((null==j?void 0:j.name)==="Safari"||(null==j?void 0:j.os)==="iOS"))return void bJ.warn("Switching audio output device is not supported on Safari and iOS.");bJ.debug(`Switching active device of kind "${a}" with id ${c}.`),yield b.switchActiveDevice(a,c,e.exact);let k=null!=(f=b.getActiveDevice(a))?f:c;k!==c&&"default"!==c&&bJ.info(`We tried to select the device with id (${c}), but the browser decided to select the device with id (${k}) instead.`),"audioinput"===a?i=null==(g=b.localParticipant.getTrackPublication(l.Track.Source.Microphone))?void 0:g.track:"videoinput"===a&&(i=null==(h=b.localParticipant.getTrackPublication(l.Track.Source.Camera))?void 0:h.track);let m="default"===c&&!i||"default"===c&&(null==i?void 0:i.mediaStreamTrack.label.startsWith("Default"));d.next(m?c:k)}});return{className:bW("media-device-select"),activeDeviceObservable:e,setActiveMediaDevice:f}})(a,g),[a,g,c]);return j.useEffect(()=>{let a=n.subscribe(a=>{a&&(bJ.info("setCurrentDeviceId",a),k(a))});return()=>{null==a||a.unsubscribe()}},[n]),{devices:h,className:m,activeDeviceId:i,setActiveMediaDevice:o}}({kind:a,room:n,track:g,requestPermissions:h,onError:p});j.useEffect(()=>{void 0!==b&&s(b)},[s]),j.useEffect(()=>{"function"==typeof d&&d(q)},[d,q]),j.useEffect(()=>{r!==o.current&&(null==c||c(r)),o.current=r},[r]);let u=async a=>{try{await s(a,{exact:f??!0})}catch(a){if(a instanceof Error)null==e||e(a);else throw a}},v=j.useMemo(()=>cu(k,{className:t},{className:"lk-list"}),[t,k]),w=!!q.find(a=>a.label.toLowerCase().startsWith("default"));function x(a,b,c){return a===b||!w&&0===c&&"default"===b}return j.createElement("ul",{ref:m,...v},q.map((a,b)=>j.createElement("li",{key:a.deviceId,id:a.deviceId,"data-lk-active":x(a.deviceId,r,b),"aria-selected":x(a.deviceId,r,b),role:"option"},j.createElement("button",{className:"lk-button",onClick:()=>u(a.deviceId)},a.label))))}),c8=j.forwardRef(function({label:a,...b},c){let d=cn(),{mergedProps:e,canPlayAudio:f}=function({room:a,props:b}){let c=cp(a),{className:d,roomAudioPlaybackAllowedObservable:e,handleStartAudioPlayback:f}=j.useMemo(()=>(function(){let a=a=>bD(this,null,function*(){bJ.info("Start Audio for room: ",a),yield a.startAudio()});return{className:bW("start-audio-button"),roomAudioPlaybackAllowedObservable:b$,handleStartAudioPlayback:a}})(),[]),{canPlayAudio:g}=cA(j.useMemo(()=>e(c),[c,e]),{canPlayAudio:c.canPlaybackAudio});return{mergedProps:j.useMemo(()=>cs(b,{className:d,onClick:()=>{f(c)},style:{display:g?"none":"block"}}),[b,d,g,f,c]),canPlayAudio:g}}({room:d,props:b}),{mergedProps:g,canPlayVideo:h}=function({room:a,props:b}){let c=cp(a),{className:d,roomVideoPlaybackAllowedObservable:e,handleStartVideoPlayback:f}=j.useMemo(()=>(function(){let a=a=>bD(this,null,function*(){bJ.info("Start Video for room: ",a),yield a.startVideo()});return{className:bW("start-audio-button"),roomVideoPlaybackAllowedObservable:b_,handleStartVideoPlayback:a}})(),[]),{canPlayVideo:g}=cA(j.useMemo(()=>e(c),[c,e]),{canPlayVideo:c.canPlaybackVideo});return{mergedProps:j.useMemo(()=>cs(b,{className:d,onClick:()=>{f(c)},style:{display:g?"none":"block"}}),[b,d,g,f,c]),canPlayVideo:g}}({room:d,props:e}),{style:i,...k}=g;return i.display=f&&h?"none":"block",j.createElement("button",{ref:c,style:i,...k},a??`Start ${f?"Video":"Audio"}`)});function c9(a,b){switch(a){case l.Track.Source.Microphone:return b?j.createElement(cZ,null):j.createElement(cY,null);case l.Track.Source.Camera:return b?j.createElement(cQ,null):j.createElement(cP,null);case l.Track.Source.ScreenShare:return b?j.createElement(c3,null):j.createElement(c2,null);default:return}}let da=j.forwardRef(function({showIcon:a,...b},c){let{buttonProps:d,enabled:e}=function({source:a,onChange:b,initialState:c,captureOptions:d,publishOptions:e,onDeviceError:f,room:g,...h}){var i;let k=co(),m=j.useMemo(()=>g??k,[g,k]),n=null==(i=null==m?void 0:m.localParticipant)?void 0:i.getTrackPublication(a),o=j.useRef(!1),{toggle:p,className:q,pendingObserver:r,enabledObserver:s}=j.useMemo(()=>m?function(a,b,c,d,e){let{localParticipant:f}=b,g=(a,b)=>{let c=!1;switch(a){case l.Track.Source.Camera:c=b.isCameraEnabled;break;case l.Track.Source.Microphone:c=b.isMicrophoneEnabled;break;case l.Track.Source.ScreenShare:c=b.isScreenShareEnabled}return c},h=b1(f).pipe(bi(b=>g(a,b.participant)),bt(g(a,f))),i=new aS,j=(b,g)=>bD(this,null,function*(){try{switch(g??(g=c),i.next(!0),a){case l.Track.Source.Camera:return yield f.setCameraEnabled(b??!f.isCameraEnabled,g,d),f.isCameraEnabled;case l.Track.Source.Microphone:return yield f.setMicrophoneEnabled(b??!f.isMicrophoneEnabled,g,d),f.isMicrophoneEnabled;case l.Track.Source.ScreenShare:return yield f.setScreenShareEnabled(b??!f.isScreenShareEnabled,g,d),f.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(a){if(e&&a instanceof Error){null==e||e(a);return}throw a}finally{i.next(!1)}});return{className:bW("button"),toggle:j,enabledObserver:h,pendingObserver:i.asObservable()}}(a,m,d,e,f):function(){let a=!1,b=new aS,c=new aS,d=d=>bD(this,null,function*(){c.next(!0),a=d??!a,b.next(a),c.next(!1)});return{className:bW("button"),toggle:d,enabledObserver:b.asObservable(),pendingObserver:c.asObservable()}}(),[m,a,JSON.stringify(d),e]),t=cA(r,!1),u=cA(s,c??!!(null!=n&&n.isEnabled));j.useEffect(()=>{null==b||b(u,o.current),o.current=!1},[u,b]),j.useEffect(()=>{void 0!==c&&(bJ.debug("forcing initial toggle state",a,c),p(c))},[]);let v=j.useMemo(()=>cs(h,{className:q}),[h,q]),w=j.useCallback(a=>{var b;o.current=!0,p().catch(()=>o.current=!1),null==(b=h.onClick)||b.call(h,a)},[h,p]);return{toggle:p,enabled:u,pending:t,track:n,buttonProps:{...v,"aria-pressed":u,"data-lk-source":a,"data-lk-enabled":u,disabled:t,onClick:w}}}(b),[f,g]=j.useState(!1);return j.useEffect(()=>{g(!0)},[]),f&&j.createElement("button",{ref:c,...d},(a??!0)&&c9(b.source,e),b.children)}),db=j.forwardRef(function(a,b){let{className:c,quality:d}=function(a={}){let b=cl(a.participant),{className:c,connectionQualityObserver:d}=j.useMemo(()=>({className:bW("connection-quality"),connectionQualityObserver:b2(b,l.ParticipantEvent.ConnectionQualityChanged).pipe(bi(([a])=>a),bt(b.connectionQuality))}),[b]);return{className:c,quality:cA(d,b.connectionQuality)}}(a),e=j.useMemo(()=>({...cu(a,{className:c}),"data-lk-quality":d}),[d,a,c]);return j.createElement("div",{ref:b,...e},a.children??function(a){switch(a){case l.ConnectionQuality.Excellent:return j.createElement(c$,null);case l.ConnectionQuality.Good:return j.createElement(c_,null);case l.ConnectionQuality.Poor:return j.createElement(c0,null);default:return j.createElement(c1,null)}}(d))}),dc=j.forwardRef(function({participant:a,...b},c){let d=cl(a),{className:e,infoObserver:f}=j.useMemo(()=>({className:"lk-participant-name",infoObserver:d?b0(d,l.ParticipantEvent.ParticipantMetadataChanged,l.ParticipantEvent.ParticipantNameChanged).pipe(bi(({name:a,identity:b,metadata:c})=>({name:a,identity:b,metadata:c})),bt({name:d.name,identity:d.identity,metadata:d.metadata})):void 0}),[d]),{identity:g,name:h}=cA(f,{name:d.name,identity:d.identity,metadata:d.metadata}),i=j.useMemo(()=>cu(b,{className:e,"data-lk-participant-name":h}),[b,e,h]);return j.createElement("span",{ref:c,...i},""!==h?h:g,b.children)}),dd=j.forwardRef(function({trackRef:a,show:b="always",...c},d){let{className:e,isMuted:f}=function(a){var b,c;let d=ci(a),{className:e,mediaMutedObserver:f}=j.useMemo(()=>(function(a){let b="track-muted-indicator-camera";switch(a.source){case l.Track.Source.Camera:b="track-muted-indicator-camera";break;case l.Track.Source.Microphone:b="track-muted-indicator-microphone"}return{className:bW(b),mediaMutedObserver:b3(a)}})(d),[bG(d)]);return{isMuted:cA(f,!!(null!=(b=d.publication)&&b.isMuted||null!=(c=d.participant.getTrackPublication(d.source))&&c.isMuted)),className:e}}(a),g="always"===b||"muted"===b&&f||"unmuted"===b&&!f,h=j.useMemo(()=>cu(c,{className:e}),[e,c]);return g?j.createElement("div",{ref:d,...h,"data-lk-muted":f},c.children??c9(a.source,!f)):null}),de=a=>j.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},j.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),j.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function df(a,b={}){let[c,d]=j.useState(bX(a)),[e,f]=j.useState(null==c?void 0:c.isMuted),[g,h]=j.useState(null==c?void 0:c.isSubscribed),[i,k]=j.useState(null==c?void 0:c.track),[m,n]=j.useState("landscape"),o=j.useRef(),{className:p,trackObserver:q}=j.useMemo(()=>{let b,c;return b=bX(a),c=b1(a.participant).pipe(bi(()=>bX(a)),bt(b)),{className:bW(a.source===l.Track.Source.Camera||a.source===l.Track.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:c}},[a.participant.sid??a.participant.identity,a.source,bE(a)&&a.publication.trackSid]);return j.useEffect(()=>{let a=q.subscribe(a=>{bJ.debug("update track",a),d(a),f(null==a?void 0:a.isMuted),h(null==a?void 0:a.isSubscribed),k(null==a?void 0:a.track)});return()=>null==a?void 0:a.unsubscribe()},[q]),j.useEffect(()=>{var c,d;return i&&(o.current&&i.detach(o.current),null!=(c=b.element)&&c.current&&!(a.participant.isLocal&&(null==i?void 0:i.kind)==="audio")&&i.attach(b.element.current)),o.current=null==(d=b.element)?void 0:d.current,()=>{o.current&&(null==i||i.detach(o.current))}},[i,b.element]),j.useEffect(()=>{var a,b;"number"==typeof(null==(a=null==c?void 0:c.dimensions)?void 0:a.width)&&"number"==typeof(null==(b=null==c?void 0:c.dimensions)?void 0:b.height)&&n(c.dimensions.width>c.dimensions.height?"landscape":"portrait")},[c]),{publication:c,isMuted:e,isSubscribed:g,track:i,elementProps:cu(b.props,{className:p,"data-lk-local-participant":a.participant.isLocal,"data-lk-source":null==c?void 0:c.source,...(null==c?void 0:c.kind)==="video"&&{"data-lk-orientation":m}})}}let dg=ai(function(){if(h)return g;h=1;var a=NaN,b=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,e=/^0o[0-7]+$/i,f=parseInt,i="object"==typeof ah&&ah&&ah.Object===Object&&ah,j="object"==typeof self&&self&&self.Object===Object&&self,k=i||j||Function("return this")(),l=Object.prototype.toString,m=Math.max,n=Math.min,o=function(){return k.Date.now()};function p(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function q(g){if("number"==typeof g)return g;if("symbol"==typeof(h=g)||h&&"object"==typeof h&&"[object Symbol]"==l.call(h))return a;if(p(g)){var h,i="function"==typeof g.valueOf?g.valueOf():g;g=p(i)?i+"":i}if("string"!=typeof g)return 0===g?g:+g;g=g.replace(b,"");var j=d.test(g);return j||e.test(g)?f(g.slice(2),j?2:8):c.test(g)?a:+g}return g=function(a,b,c){var d,e,f,g,h,i,j=0,k=!1,l=!1,r=!0;if("function"!=typeof a)throw TypeError("Expected a function");function s(b){var c=d,f=e;return d=e=void 0,j=b,g=a.apply(f,c)}function t(a){var c=a-i,d=a-j;return void 0===i||c>=b||c<0||l&&d>=f}function u(){var a,c,d,e=o();if(t(e))return v(e);h=setTimeout(u,(a=e-i,c=e-j,d=b-a,l?n(d,f-c):d))}function v(a){return h=void 0,r&&d?s(a):(d=e=void 0,g)}function w(){var a,c=o(),f=t(c);if(d=arguments,e=this,i=c,f){if(void 0===h)return j=a=i,h=setTimeout(u,b),k?s(a):g;if(l)return h=setTimeout(u,b),s(i)}return void 0===h&&(h=setTimeout(u,b)),g}return b=q(b)||0,p(c)&&(k=!!c.leading,f=(l="maxWait"in c)?m(q(c.maxWait)||0,b):f,r="trailing"in c?!!c.trailing:r),w.cancel=function(){void 0!==h&&clearTimeout(h),j=0,d=i=e=h=void 0},w.flush=function(){return void 0===h?g:v(o())},w}}()),dh=j.forwardRef(function({onTrackClick:a,onClick:b,onSubscriptionStatusChanged:c,trackRef:d,manageSubscription:e,...f},g){let h=ci(d),i=j.useRef(null);j.useImperativeHandle(g,()=>i.current);let k=function({threshold:a=0,root:b=null,rootMargin:c="0%",freezeOnceVisible:d=!1,initialIsIntersecting:e=!1,onChange:f}={}){var g;let[h,i]=(0,j.useState)(null),[k,l]=(0,j.useState)(()=>({isIntersecting:e,entry:void 0})),m=(0,j.useRef)();m.current=f;let n=(null==(g=k.entry)?void 0:g.isIntersecting)&&d;(0,j.useEffect)(()=>{if(!h||!("IntersectionObserver"in window)||n)return;let d=new IntersectionObserver(a=>{let b=Array.isArray(d.thresholds)?d.thresholds:[d.thresholds];a.forEach(a=>{let c=a.isIntersecting&&b.some(b=>a.intersectionRatio>=b);l({isIntersecting:c,entry:a}),m.current&&m.current(c,a)})},{threshold:a,root:b,rootMargin:c});return d.observe(h),()=>{d.disconnect()}},[h,JSON.stringify(a),b,c,n,d]);let o=(0,j.useRef)(null);(0,j.useEffect)(()=>{var a;h||null==(a=k.entry)||!a.target||d||n||o.current===k.entry.target||(o.current=k.entry.target,l({isIntersecting:e,entry:void 0}))},[h,k.entry,d,n,e]);let p=[i,!!k.isIntersecting,k.entry];return p.ref=p[0],p.isIntersecting=p[1],p.entry=p[2],p}({root:i.current}),[m]=function(a,b,c){let d=a instanceof Function?a():a,[e,f]=(0,j.useState)(d),g=(0,j.useRef)(d),h=function(a,b=500,c){var d;let e,f=(0,j.useRef)();d=()=>{f.current&&f.current.cancel()},(e=(0,j.useRef)(d)).current=d,(0,j.useEffect)(()=>()=>{e.current()},[]);let g=(0,j.useMemo)(()=>{let d=dg(a,b,c),e=(...a)=>d(...a);return e.cancel=()=>{d.cancel()},e.isPending=()=>!!f.current,e.flush=()=>d.flush(),e},[a,b,c]);return(0,j.useEffect)(()=>{f.current=dg(a,b,c)},[a,b,c]),g}(f,3e3,void 0);return g.current===d||(h(d),g.current=d),[e,h]}(k,0);j.useEffect(()=>{e&&h.publication instanceof l.RemoteTrackPublication&&(null==m?void 0:m.isIntersecting)===!1&&(null==k?void 0:k.isIntersecting)===!1&&h.publication.setSubscribed(!1)},[m,h,e]),j.useEffect(()=>{e&&h.publication instanceof l.RemoteTrackPublication&&(null==k?void 0:k.isIntersecting)===!0&&h.publication.setSubscribed(!0)},[k,h,e]);let{elementProps:n,publication:o,isSubscribed:p}=df(h,{element:i,props:f});return j.useEffect(()=>{null==c||c(!!p)},[p,c]),j.createElement("video",{ref:i,...n,muted:!0,onClick:c=>{null==b||b(c),null==a||a({participant:null==h?void 0:h.participant,track:o})}})}),di=j.forwardRef(function({trackRef:a,onSubscriptionStatusChanged:b,volume:c,...d},e){let f=ci(a),g=j.useRef(null);j.useImperativeHandle(e,()=>g.current);let{elementProps:h,isSubscribed:i,track:k,publication:m}=df(f,{element:g,props:d});return j.useEffect(()=>{null==b||b(!!i)},[i,b]),j.useEffect(()=>{void 0===k||void 0===c||(k instanceof l.RemoteAudioTrack?k.setVolume(c):bJ.warn("Volume can only be set on remote audio tracks."))},[c,k]),j.useEffect(()=>{void 0===m||void 0===d.muted||(m instanceof l.RemoteTrackPublication?m.setEnabled(!d.muted):bJ.warn("Can only call setEnabled on remote track publications."))},[d.muted,m,k]),j.createElement("audio",{ref:g,...h})});function dj(a){let b=!!ck();return a.participant&&!b?j.createElement(cj.Provider,{value:a.participant},a.children):j.createElement(j.Fragment,null,a.children)}function dk(a){let b=!!ch();return a.trackRef&&!b?j.createElement(cg.Provider,{value:a.trackRef},a.children):j.createElement(j.Fragment,null,a.children)}let dl=j.forwardRef(function({trackRef:a,children:b,onParticipantClick:c,disableSpeakingIndicator:d,...e},f){var g,h;let i=ci(a),{elementProps:k}=function({trackRef:a,onParticipantClick:b,disableSpeakingIndicator:c,htmlProps:d}){let e,f=ci(a),g=j.useMemo(()=>{let{className:a}={className:bW("participant-tile")};return cs(d,{className:a,onClick:a=>{var c;if(null==(c=d.onClick)||c.call(d,a),"function"==typeof b){let a=f.publication??f.participant.getTrackPublication(f.source);b({participant:f.participant,track:a})}}})},[d,b,f.publication,f.source,f.participant]),h=f.participant.getTrackPublication(l.Track.Source.Microphone),i=j.useMemo(()=>({participant:f.participant,source:l.Track.Source.Microphone,publication:h}),[h,f.participant]),k=cC(f),m=cC(i),n=(e=cl(f.participant),cA(j.useMemo(()=>b2(e,l.ParticipantEvent.IsSpeakingChanged).pipe(bi(([a])=>a)),[e]),e.isSpeaking)),o=function(a){if(a.publication instanceof l.LocalTrackPublication){let b=a.publication.track;if(b){let{facingMode:a}=(0,l.facingModeFromLocalTrack)(b);return a}}return"undefined"}(f);return{elementProps:{"data-lk-audio-muted":m,"data-lk-video-muted":k,"data-lk-speaking":!0!==c&&n,"data-lk-local-participant":f.participant.isLocal,"data-lk-source":f.source,"data-lk-facing-mode":o,...g}}}({htmlProps:e,disableSpeakingIndicator:d,onParticipantClick:c,trackRef:i}),m=function(a,b={}){let c=cl(a),d=cp(b.room);return cA(j.useMemo(()=>bZ(d,l.RoomEvent.ParticipantEncryptionStatusChanged).pipe(bq(([,a])=>(null==c?void 0:c.identity)===(null==a?void 0:a.identity)||!a&&(null==c?void 0:c.identity)===d.localParticipant.identity),bi(([a])=>a),bt(null!=c&&c.isLocal?c.isE2EEEnabled:!!(null!=c&&c.isEncrypted))),[d,c]),c.isLocal?c.isE2EEEnabled:!!(null!=c&&c.isEncrypted))}(i.participant),n=cf(),o=null==(g=j.useContext(cq))?void 0:g.autoSubscription,p=j.useCallback(a=>{i.source&&!a&&n&&n.pin.dispatch&&bH(i,n.pin.state)&&n.pin.dispatch({msg:"clear_pin"})},[i,n]);return j.createElement("div",{ref:f,style:{position:"relative"},...k},j.createElement(dk,{trackRef:i},j.createElement(dj,{participant:i.participant},b??j.createElement(j.Fragment,null,bE(i)&&((null==(h=i.publication)?void 0:h.kind)==="video"||i.source===l.Track.Source.Camera||i.source===l.Track.Source.ScreenShare)?j.createElement(dh,{trackRef:i,onSubscriptionStatusChanged:p,manageSubscription:o}):bE(i)&&j.createElement(di,{trackRef:i,onSubscriptionStatusChanged:p}),j.createElement("div",{className:"lk-participant-placeholder"},j.createElement(de,null)),j.createElement("div",{className:"lk-participant-metadata"},j.createElement("div",{className:"lk-participant-metadata-item"},i.source===l.Track.Source.Camera?j.createElement(j.Fragment,null,m&&j.createElement(cX,{style:{marginRight:"0.25rem"}}),j.createElement(dd,{trackRef:{participant:i.participant,source:l.Track.Source.Microphone},show:"muted"}),j.createElement(dc,null)):j.createElement(j.Fragment,null,j.createElement(c2,{style:{marginRight:"0.25rem"}}),j.createElement(dc,null,"'s screen"))),j.createElement(db,{className:"lk-participant-metadata-item"}))),j.createElement(c6,{trackRef:i}))))});function dm(a){let b=cu(a,{className:"lk-focus-layout"});return j.createElement("div",{...b},a.children)}function dn({trackRef:a,...b}){return j.createElement(dl,{trackRef:a,...b})}function dp({tracks:a,...b}){return j.createElement(j.Fragment,null,a.map(a=>j.createElement(cg.Provider,{value:a,key:bG(a)},cv(b.children))))}function dq({totalPageCount:a,nextPage:b,prevPage:c,currentPage:d,pagesContainer:e}){let[f,g]=j.useState(!1);return j.useEffect(()=>{let a;return e&&(a=(function(a,b=1e3){var c,d;if(null===a)return bf(!1);let e=(function a(b,c,d,e){if(au(d)&&(e=d,d=void 0),e){return a(b,c,d).pipe((f=e,bi(function(a){return bj(a)?f.apply(void 0,as([],ar(a))):f(a)})))}var f,g,h,i,j=ar(au((g=b).addEventListener)&&au(g.removeEventListener)?bn.map(function(a){return function(e){return b[a](c,e,d)}}):au((h=b).addListener)&&au(h.removeListener)?bm.map(bp(b,c)):au((i=b).on)&&au(i.off)?bo.map(bp(b,c)):[],2),k=j[0],l=j[1];if(!k&&a0(b))return bk(function(b){return a(b,c,d)})(a8(b));if(!k)throw TypeError("Invalid event target");return new aM(function(a){var b=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return a.next(1<b.length?b:b[0])};return k(b),function(){return l(b)}})})(a,"mousemove",{passive:!0}).pipe(bi(()=>!0)),f=e.pipe(function(a,b){var c=a instanceof Date&&!isNaN(a)?{first:a}:"number"==typeof a?{each:a}:a,d=c.first,e=c.each,f=c.with,g=void 0===f?bh:f,h=c.scheduler,i=void 0===h?a$:h,j=c.meta,k=void 0===j?null:j;if(null==d&&null==e)throw TypeError("No timeout provided.");return aO(function(a,b){var c,f,h=null,j=0,l=function(a){f=ba(b,i,function(){try{c.unsubscribe(),a8(g({meta:k,lastValue:h,seen:j})).subscribe(b)}catch(a){b.error(a)}},a)};c=a.subscribe(aP(b,function(a){null==f||f.unsubscribe(),j++,b.next(h=a),e>0&&l(e)},void 0,void 0,function(){null!=f&&f.closed||null==f||f.unsubscribe(),h=null})),j||l(null!=d?"number"==typeof d?d:d-i.now():e)})}({each:b,with:()=>bl(bf(!1),f.pipe(aO(function(a,b){var c=!1,d=aP(b,function(){null==d||d.unsubscribe(),c=!0},aF);a8(e).subscribe(d),a.subscribe(aP(b,function(a){return c&&b.next(a)}))})))}),(void 0===d&&(d=aL),c=c??br,aO(function(a,b){var e,f=!0;a.subscribe(aP(b,function(a){var g=d(a);(f||!c(e,g))&&(f=!1,e=g,b.next(a))}))})));return f})(e.current,2e3).subscribe(g)),()=>{a&&a.unsubscribe()}},[e]),j.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":f},j.createElement("button",{className:"lk-button",onClick:c},j.createElement(cT,null)),j.createElement("span",{className:"lk-pagination-count"},`${d} of ${a}`),j.createElement("button",{className:"lk-button",onClick:b},j.createElement(cT,null)))}let dr=j.forwardRef(function({totalPageCount:a,currentPage:b},c){let d=Array(a).fill("").map((a,c)=>c+1===b?j.createElement("span",{"data-lk-active":!0,key:c}):j.createElement("span",{key:c}));return j.createElement("div",{ref:c,className:"lk-pagination-indicator"},d)});function ds({tracks:a,...b}){let c=j.createRef(),d=j.useMemo(()=>cu(b,{className:"lk-grid-layout"}),[b]),{layout:e}=function(a,b,c={}){let d=c.gridLayouts??bK,{width:e,height:f}=cz(a),g=function a(b,c,d,e){if(b.length<1)throw Error("At least one grid layout definition must be provided.");let f=[...b].map(a=>{var b,c;return{name:`${a.columns}x${a.rows}`,columns:a.columns,rows:a.rows,maxTiles:a.columns*a.rows,minWidth:null!=(b=a.minWidth)?b:0,minHeight:null!=(c=a.minHeight)?c:0,orientation:a.orientation}}).sort((a,b)=>a.maxTiles!==b.maxTiles?a.maxTiles-b.maxTiles:0!==a.minWidth||0!==b.minWidth?a.minWidth-b.minWidth:0!==a.minHeight||0!==b.minHeight?a.minHeight-b.minHeight:0);if(d<=0||e<=0)return f[0];let g=0,h=d/e>1?"landscape":"portrait",i=f.find((a,b,d)=>{g=b;let e=-1!==d.findIndex((c,d)=>{let e=!c.orientation||c.orientation===h,f=c.maxTiles===a.maxTiles;return d>b&&f&&e});return a.maxTiles>=c&&!e});if(void 0===i)if(i=f[f.length-1])bJ.warn(`No layout found for: participantCount: ${c}, width/height: ${d}/${e} fallback to biggest available layout (${i}).`);else throw Error("No layout or fallback layout found.");if((d<i.minWidth||e<i.minHeight)&&g>0){let b=f[g-1];i=a(f.slice(0,g),b.maxTiles,d,e)}return i}(d,b,e,f);return j.useEffect(()=>{a.current&&g&&(a.current.style.setProperty("--lk-col-count",null==g?void 0:g.columns.toString()),a.current.style.setProperty("--lk-row-count",null==g?void 0:g.rows.toString()))},[a,g]),{layout:g,containerWidth:e,containerHeight:f}}(c,a.length),f=function(a,b){let[c,d]=j.useState(1),e=Math.max(Math.ceil(b.length/a),1);c>e&&d(e);let f=c*a,g=f-a,h=a=>{d(b=>"next"===a?b===e?b:b+1:1===b?b:b-1)},i=cD(b,a).slice(g,f);return{totalPageCount:e,nextPage:()=>h("next"),prevPage:()=>h("previous"),setPage:a=>{a>e?d(e):a<1?d(1):d(a)},firstItemIndex:g,lastItemIndex:f,tracks:i,currentPage:c}}(e.maxTiles,a);return function(a,b={}){let c=j.useRef(null),d=j.useRef(null),e=b.minSwipeDistance??50,f=a=>{d.current=null,c.current=a.targetTouches[0].clientX},g=a=>{d.current=a.targetTouches[0].clientX},h=j.useCallback(()=>{if(!c.current||!d.current)return;let a=c.current-d.current,f=a>e,g=a<-e;f&&b.onLeftSwipe&&b.onLeftSwipe(),g&&b.onRightSwipe&&b.onRightSwipe()},[e,b]);j.useEffect(()=>{let b=a.current;return b&&(b.addEventListener("touchstart",f,{passive:!0}),b.addEventListener("touchmove",g,{passive:!0}),b.addEventListener("touchend",h,{passive:!0})),()=>{b&&(b.removeEventListener("touchstart",f),b.removeEventListener("touchmove",g),b.removeEventListener("touchend",h))}},[a,h])}(c,{onLeftSwipe:f.nextPage,onRightSwipe:f.prevPage}),j.createElement("div",{ref:c,"data-lk-pagination":f.totalPageCount>1,...d},j.createElement(dp,{tracks:f.tracks},b.children),a.length>e.maxTiles&&j.createElement(j.Fragment,null,j.createElement(dr,{totalPageCount:f.totalPageCount,currentPage:f.currentPage}),j.createElement(dq,{pagesContainer:c,...f})))}let dt=-(-.6000000000000001*1);function du({tracks:a,orientation:b,...c}){let d,e,f,g,h=j.useRef(null),[i,k]=j.useState(0),{width:l,height:m}=cz(h),n=b||(m>=l?"vertical":"horizontal"),o="vertical"===n?Math.max(l*dt,130):Math.max(1.6*m,140),p=((d=document.createElement("p")).style.width="100%",d.style.height="200px",(e=document.createElement("div")).style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(d),document.body.appendChild(e),f=d.offsetWidth,e.style.overflow="scroll",f===(g=d.offsetWidth)&&(g=e.clientWidth),document.body.removeChild(e),f-g),q=Math.max("vertical"===n?(m-p)/o:(l-p)/o,1),r=Math.round(q);.5>Math.abs(q-i)?r=Math.round(i):i!==q&&k(q);let s=cD(a,r);return j.useLayoutEffect(()=>{h.current&&(h.current.dataset.lkOrientation=n,h.current.style.setProperty("--lk-max-visible-tiles",r.toString()))},[r,n]),j.createElement("aside",{key:n,className:"lk-carousel",ref:h,...c},j.createElement(dp,{tracks:s},c.children))}function dv({value:a,onPinChange:b,onWidgetChange:c,children:d}){let e=function(a){let[b,c]=j.useReducer(cc,bM),[d,e]=j.useReducer(cb,bN);return a??{pin:{dispatch:c,state:b},widget:{dispatch:e,state:d}}}(a);return j.useEffect(()=>{bJ.debug("PinState Updated",{state:e.pin.state}),b&&e.pin.state&&b(e.pin.state)},[e.pin.state,b]),j.useEffect(()=>{bJ.debug("Widget Updated",{widgetState:e.widget.state}),c&&e.widget.state&&c(e.widget.state)},[c,e.widget.state]),j.createElement(cd.Provider,{value:e},d)}function dw({room:a,volume:b,muted:c}){let d=cE([l.Track.Source.Microphone,l.Track.Source.ScreenShareAudio,l.Track.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0,room:a}).filter(a=>!a.participant.isLocal&&a.publication.kind===l.Track.Kind.Audio);return j.createElement("div",{style:{display:"none"}},d.map(a=>j.createElement(di,{key:bG(a),trackRef:a,volume:b,muted:c})))}function dx(a){let b=j.useMemo(()=>cu(a,{className:"lk-toast"}),[a]);return j.createElement("div",{...b},a.children)}let dy=a=>[[Math.floor(a/2)],[-1]],dz=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]);function dA(a){let[b,c]=j.useState(void 0),d=cB(a.room);return j.useEffect(()=>{switch(d){case l.ConnectionState.Reconnecting:c(j.createElement(j.Fragment,null,j.createElement(c4,{className:"lk-spinner"})," Reconnecting"));break;case l.ConnectionState.Connecting:c(j.createElement(j.Fragment,null,j.createElement(c4,{className:"lk-spinner"})," Connecting"));break;case l.ConnectionState.Disconnected:c(j.createElement(j.Fragment,null,"Disconnected"));break;default:c(void 0)}},[d]),b?j.createElement(dx,{className:"lk-toast-connection-state"},b):j.createElement(j.Fragment,null)}let dB=j.forwardRef(function({entry:a,hideName:b=!1,hideTimestamp:c=!1,messageFormatter:d,...e},f){var g,h,i,k;let l=j.useMemo(()=>d?d(a.message):a.message,[a.message,d]),m=!!a.editTimestamp,n=new Date(a.timestamp),o="u">typeof navigator?navigator.language:"en-US",p=(null==(g=a.from)?void 0:g.name)??(null==(h=a.from)?void 0:h.identity);return j.createElement("li",{ref:f,className:"lk-chat-entry",title:n.toLocaleTimeString(o,{timeStyle:"full"}),"data-lk-message-origin":null!=(i=a.from)&&i.isLocal?"local":"remote",...e},(!c||!b||m)&&j.createElement("span",{className:"lk-meta-data"},!b&&j.createElement("strong",{className:"lk-participant-name"},p),(!c||m)&&j.createElement("span",{className:"lk-timestamp"},m&&"edited ",n.toLocaleTimeString(o,{timeStyle:"short"}))),j.createElement("span",{className:"lk-message-body"},l),j.createElement("span",{className:"lk-message-attachements"},null==(k=a.attachedFiles)?void 0:k.map(a=>a.type.startsWith("image/")&&j.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:a.name,src:URL.createObjectURL(a),alt:a.name}))))});function dC({messageFormatter:a,messageDecoder:b,messageEncoder:c,channelTopic:d,...e}){var f;let g,h,i,k,m,n,o=j.useRef(null),p=j.useRef(null),{chatMessages:q,send:r,isSending:s}=(h=cB(g=cp(null==(f=j.useMemo(()=>({messageDecoder:b,messageEncoder:c,channelTopic:d}),[b,c,d]))?void 0:f.room)),i=j.useMemo(()=>h===l.ConnectionState.Disconnected,[h]),m=cA((k=j.useMemo(()=>(function(a,b){var c,d,e,f,g,h;let i=new aS,j=null!=(c=null==b?void 0:b.channelTopic)?c:"lk.chat",k=null!=(d=null==b?void 0:b.channelTopic)?d:"lk-chat-topic",m=!1;b5.has(a)||(m=!0);let n=null!=(e=b5.get(a))?e:new Map,o=null!=(f=n.get(j))?f:new aS;n.set(j,o),b5.set(a,n);let p=null!=(g=null==b?void 0:b.messageDecoder)?g:b6;if(m){a.registerTextStreamHandler(j,(b,c)=>bD(this,null,function*(){let{id:d,timestamp:e}=b.info;be(b).pipe(bs((a,b)=>a+b),bi(b=>({id:d,timestamp:e,message:b,from:a.getParticipantByIdentity(c.identity),type:"chatMessage"}))).subscribe({next:a=>o.next(a)})}));let{messageObservable:b}=function(a,b,c){let d,e=Array.isArray(b)?b:[b];return{messageObservable:bZ(a,l.RoomEvent.DataReceived).pipe(bq(([,,,a])=>void 0===b||void 0!==a&&e.includes(a)),bi(([a,b,,c])=>({payload:a,topic:c,from:b}))),isSendingObservable:new aM(a=>{d=a}),send:(b,...c)=>bD(this,[b,...c],function*(b,c={}){d.next(!0);try{yield b4(a.localParticipant,b,bC({topic:e[0]},c))}finally{d.next(!1)}})}}(a,[k]);b.pipe(bi(a=>{let b=p(a.payload);return!0==b.ignoreLegacy?void 0:bw(bC({},b),bx({type:"chatMessage",from:a.from}))}),bq(a=>!!a),bu(i)).subscribe(o)}let q=o.pipe(bs((a,b)=>{if("id"in b&&a.find(a=>{var c,d;return(null==(c=a.from)?void 0:c.identity)===(null==(d=b.from)?void 0:d.identity)&&a.id===b.id})){let c=a.findIndex(a=>a.id===b.id);if(c>-1){let d=a[c];a[c]=bw(bC({},b),bx({timestamp:d.timestamp,editTimestamp:b.timestamp}))}return[...a]}return[...a,b]},[]),bu(i)),r=new aU(!1),s=null!=(h=null==b?void 0:b.messageEncoder)?h:b7,t=(b,c)=>bD(this,null,function*(){var d,e,f;c||(c={}),null!=c.topic||(c.topic=j),r.next(!0);try{let g,h,i,j,m,n,p={id:(yield a.localParticipant.sendText(b,c)).id,timestamp:Date.now(),message:b},q=(g=bC({},p),h={attachedFiles:c.attachments},bw(g,bx(h))),r=(i=bC({},q),j={type:"chatMessage",from:a.localParticipant,attributes:c.attributes},bw(i,bx(j)));o.next(r);let t=s((m=bC({},p),n={ignoreLegacy:(null==(d=a.serverInfo)?void 0:d.edition)===1||!!(null!=(e=a.serverInfo)&&e.version)&&(0,l.compareVersions)(null==(f=a.serverInfo)?void 0:f.version,"1.8.2")>0},bw(m,bx(n))));try{yield b4(a.localParticipant,t,{reliable:!0,topic:k})}catch(a){bJ.info("could not send message in legacy chat format",a)}return r}finally{r.next(!1)}});return a.once(l.RoomEvent.Disconnected,function(){i.next(),i.complete(),o.complete(),b5.delete(a),a.unregisterTextStreamHandler(j)}),{messageObservable:q,isSendingObservable:r,send:t}})(g,f),[g,f,i])).isSendingObservable,!1),n=cA(k.messageObservable,[]),{send:k.send,chatMessages:n,isSending:m}),t=cf(),u=j.useRef(0);async function v(a){a.preventDefault(),p.current&&""!==p.current.value.trim()&&(await r(p.current.value),p.current.value="",p.current.focus())}return j.useEffect(()=>{var a;o&&(null==(a=o.current)||a.scrollTo({top:o.current.scrollHeight}))},[o,q]),j.useEffect(()=>{var a,b,c,d,e;if(!t||0===q.length)return;if(null!=(a=t.widget.state)&&a.showChat&&q.length>0&&u.current!==(null==(b=q[q.length-1])?void 0:b.timestamp)){u.current=null==(c=q[q.length-1])?void 0:c.timestamp;return}let f=q.filter(a=>!u.current||a.timestamp>u.current).length,{widget:g}=t;f>0&&(null==(d=g.state)?void 0:d.unreadMessages)!==f&&(null==(e=g.dispatch)||e.call(g,{msg:"unread_msg",count:f}))},[q,null==t?void 0:t.widget]),j.createElement("div",{...e,className:"lk-chat"},j.createElement("div",{className:"lk-chat-header"},"Messages",t&&j.createElement(cN,{className:"lk-close-button"},j.createElement(cR,null))),j.createElement("ul",{className:"lk-list lk-chat-messages",ref:o},e.children?q.map((b,c)=>cv(e.children,{entry:b,key:b.id??c,messageFormatter:a})):q.map((b,c,d)=>{let e=c>=1&&d[c-1].from===b.from,f=c>=1&&b.timestamp-d[c-1].timestamp<6e4;return j.createElement(dB,{key:b.id??c,hideName:e,hideTimestamp:!1!==e&&f,entry:b,messageFormatter:a})})),j.createElement("form",{className:"lk-chat-form",onSubmit:v},j.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:s,ref:p,type:"text",placeholder:"Enter a message...",onInput:a=>a.stopPropagation(),onKeyDown:a=>a.stopPropagation(),onKeyUp:a=>a.stopPropagation()}),j.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:s},"Send")))}function dD({kind:a,initialSelection:b,onActiveDeviceChange:c,tracks:d,requestPermissions:e=!1,...f}){let[g,h]=j.useState(!1),[i,k]=j.useState([]),[l,o]=j.useState(!0),[q,r]=j.useState(e),s=(a,b)=>{bJ.debug("handle device change"),h(!1),null==c||c(a,b)},B=j.useRef(null),C=j.useRef(null);j.useLayoutEffect(()=>{g&&r(!0)},[g]),j.useLayoutEffect(()=>{let a;return B.current&&C.current&&(i||l)&&(a=function(a,b,c){return function(a,b,c,d){void 0===d&&(d={});let{ancestorScroll:e=!0,ancestorResize:f=!0,elementResize:g="function"==typeof ResizeObserver,layoutShift:h="function"==typeof IntersectionObserver,animationFrame:i=!1}=d,j=V(a),k=e||f?[...j?S(j):[],...S(b)]:[];k.forEach(a=>{e&&a.addEventListener("scroll",c,{passive:!0}),f&&a.addEventListener("resize",c)});let l=j&&h?function(a,b){let c=null,d,e=I(a);function f(){var a;clearTimeout(d),null==(a=c)||a.disconnect(),c=null}return function g(h,i){void 0===h&&(h=!1),void 0===i&&(i=1),f();let j=a.getBoundingClientRect(),{left:k,top:l,width:o,height:q}=j;if(h||b(),!o||!q)return;let r={rootMargin:-p(l)+"px "+-p(e.clientWidth-(k+o))+"px "+-p(e.clientHeight-(l+q))+"px "+-p(k)+"px",threshold:n(0,m(1,i))||1},s=!0;function t(b){let c=b[0].intersectionRatio;if(c!==i){if(!s)return g();c?g(!1,c):d=setTimeout(()=>{g(!1,1e-7)},1e3)}1!==c||ag(j,a.getBoundingClientRect())||g(),s=!1}try{c=new IntersectionObserver(t,{...r,root:e.ownerDocument})}catch{c=new IntersectionObserver(t,r)}c.observe(a)}(!0),f}(j,c):null,o=-1,q=null;g&&(q=new ResizeObserver(a=>{let[d]=a;d&&d.target===j&&q&&(q.unobserve(b),cancelAnimationFrame(o),o=requestAnimationFrame(()=>{var a;null==(a=q)||a.observe(b)})),c()}),j&&!i&&q.observe(j),q.observe(b));let r,s=i?Z(a):null;return i&&function b(){let d=Z(a);s&&!ag(s,d)&&c(),s=d,r=requestAnimationFrame(b)}(),c(),()=>{var a;k.forEach(a=>{e&&a.removeEventListener("scroll",c),f&&a.removeEventListener("resize",c)}),null==l||l(),null==(a=q)||a.disconnect(),q=null,i&&cancelAnimationFrame(r)}}(a,b,()=>bD(this,null,function*(){var d,e,f;let g,h,i,{x:j,y:k}=yield(f={placement:"top",middleware:[{name:"offset",options:6,async fn(a){var b,c;let{x:d,y:e,placement:f,middlewareData:g}=a,h=await F(a,6);return f===(null==(b=g.offset)?void 0:b.placement)&&null!=(c=g.arrow)&&c.alignmentOffset?{}:{x:d+h.x,y:e+h.y,data:{...h,placement:f}}}},(void 0===d&&(d={}),{name:"flip",options:d,async fn(a){var b,c,e,f,g,h,i,j;let k,l,m,{placement:n,middlewareData:o,rects:p,initialPlacement:q,platform:r,elements:s}=a,{mainAxis:B=!0,crossAxis:C=!0,fallbackPlacements:D,fallbackStrategy:F="bestFit",fallbackAxisSideDirection:G="none",flipAlignment:H=!0,...I}=t(d,a);if(null!=(b=o.arrow)&&b.alignmentOffset)return{};let J=u(n),K=y(q),L=u(q)===q,M=await (null==r.isRTL?void 0:r.isRTL(s.floating)),N=D||(L||!H?[A(q)]:(k=A(q),[z(q),k,z(k)])),O="none"!==G;!D&&O&&N.push(...(l=v(q),m=function(a,b,c){let d=["left","right"],e=["right","left"];switch(a){case"top":case"bottom":return c?b?e:d:b?d:e;case"left":case"right":return b?["top","bottom"]:["bottom","top"];default:return[]}}(u(q),"start"===G,M),l&&(m=m.map(a=>a+"-"+l),H&&(m=m.concat(m.map(z)))),m));let P=[q,...N],Q=await E(a,I),R=[],S=(null==(c=o.flip)?void 0:c.overflows)||[];if(B&&R.push(Q[J]),C){let a,b,c,d,e=(h=n,i=p,void 0===(j=M)&&(j=!1),a=v(h),c=x(b=w(y(h))),d="x"===b?a===(j?"end":"start")?"right":"left":"start"===a?"bottom":"top",i.reference[c]>i.floating[c]&&(d=A(d)),[d,A(d)]);R.push(Q[e[0]],Q[e[1]])}if(S=[...S,{placement:n,overflows:R}],!R.every(a=>a<=0)){let a=((null==(e=o.flip)?void 0:e.index)||0)+1,b=P[a];if(b)return{data:{index:a,overflows:S},reset:{placement:b}};let c=null==(f=S.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:f.placement;if(!c)switch(F){case"bestFit":{let a=null==(g=S.filter(a=>{if(O){let b=y(a.placement);return b===K||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:g[0];a&&(c=a);break}case"initialPlacement":c=q}if(n!==c)return{reset:{placement:c}}}return{}}}),{name:"shift",options:e={padding:5},async fn(a){let{x:b,y:c,placement:d}=a,{mainAxis:f=!0,crossAxis:g=!1,limiter:h={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...i}=t(e,a),j={x:b,y:c},k=await E(a,i),l=y(u(d)),o=w(l),p=j[o],q=j[l];if(f){let a="y"===o?"top":"left",b="y"===o?"bottom":"right",c=p+k[a],d=p-k[b];p=n(c,m(p,d))}if(g){let a="y"===l?"top":"left",b="y"===l?"bottom":"right",c=q+k[a],d=q-k[b];q=n(c,m(q,d))}let r=h.fn({...a,[o]:p,[l]:q});return{...r,data:{x:r.x-b,y:r.y-c,enabled:{[o]:f,[l]:g}}}}}]},g=new Map,i={...(h={platform:af,...f}).platform,_c:g},D(a,b,{...h,platform:i}));null==c||c(j,k)}))}(B.current,C.current,(a,b)=>{C.current&&Object.assign(C.current.style,{left:`${a}px`,top:`${b}px`})})),o(!1),()=>{null==a||a()}},[B,C,i,l]);let G=j.useCallback(a=>{var b;C.current&&a.target!==B.current&&g&&(b=C.current,!b.contains(a.target))&&h(!1)},[g,C,B]);return j.useEffect(()=>(document.addEventListener("click",G),()=>{document.removeEventListener("click",G)}),[G]),j.createElement(j.Fragment,null,j.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":g,...f,onClick:()=>h(!g),ref:B},f.children),!f.disabled&&j.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:g?"visible":"hidden"}},a?j.createElement(c7,{initialSelection:b,onActiveDeviceChange:b=>s(a,b),onDeviceListChange:k,kind:a,track:null==d?void 0:d[a],requestPermissions:q}):j.createElement(j.Fragment,null,j.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),j.createElement(c7,{kind:"audioinput",onActiveDeviceChange:a=>s("audioinput",a),onDeviceListChange:k,track:null==d?void 0:d.audioinput,requestPermissions:q}),j.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),j.createElement(c7,{kind:"videoinput",onActiveDeviceChange:a=>s("videoinput",a),onDeviceListChange:k,track:null==d?void 0:d.videoinput,requestPermissions:q}))))}let dE=j.forwardRef(function(a,b){let{mergedProps:c}=function({props:a}){let{dispatch:b,state:c}=ce().widget,d="lk-button lk-settings-toggle";return{mergedProps:j.useMemo(()=>cs(a,{className:d,onClick:()=>{b&&b({msg:"toggle_settings"})},"aria-pressed":null!=c&&c.showSettings?"true":"false"}),[a,d,b,c])}}({props:a});return j.createElement("button",{ref:b,...c},a.children)});function dF({variation:a,controls:b,saveUserChoices:c=!0,onDeviceError:d,...e}){var f;let g,[h,i]=j.useState(!1),k=cf();j.useEffect(()=>{var a,b;(null==(a=null==k?void 0:k.widget.state)?void 0:a.showChat)!==void 0&&i(null==(b=null==k?void 0:k.widget.state)?void 0:b.showChat)},[null==(f=null==k?void 0:k.widget.state)?void 0:f.showChat]);let m=!function(a){let[b,c]=j.useState(!1);function d(){c(!1)}return j.useEffect(()=>{let b=window.matchMedia(a);return d(),b.addListener?b.addListener(d):b.addEventListener("change",d),()=>{b.removeListener?b.removeListener(d):b.removeEventListener("change",d)}},[a]),b}(`(max-width: ${h?1e3:760}px)`)?"verbose":"minimal";a??(a=m);let n={leave:!0,...b},o=(g=cn(),cA(j.useMemo(()=>{var a;return b2(a=g.localParticipant,l.ParticipantEvent.ParticipantPermissionsChanged).pipe(bi(()=>a.permissions),bt(a.permissions))},[g]),g.localParticipant.permissions));if(o){let a=a=>o.canPublish&&(0===o.canPublishSources.length||o.canPublishSources.includes((a=>{switch(a){case l.Track.Source.Camera:return 1;case l.Track.Source.Microphone:return 2;case l.Track.Source.ScreenShare:return 3;default:return 0}})(a)));n.camera??(n.camera=a(l.Track.Source.Camera)),n.microphone??(n.microphone=a(l.Track.Source.Microphone)),n.screenShare??(n.screenShare=a(l.Track.Source.ScreenShare)),n.chat??(n.chat=o.canPublishData&&(null==b?void 0:b.chat))}else n.camera=!1,n.chat=!1,n.microphone=!1,n.screenShare=!1;let p=j.useMemo(()=>"minimal"===a||"verbose"===a,[a]),q=j.useMemo(()=>"textOnly"===a||"verbose"===a,[a]),r="u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia,[s,t]=j.useState(!1),u=j.useCallback(a=>{t(a)},[t]),v=cu({className:"lk-control-bar"},e),{saveAudioInputEnabled:w,saveVideoInputEnabled:x,saveAudioInputDeviceId:y,saveVideoInputDeviceId:z}=function(a={}){let[b,c]=j.useState(function(a,b=!1){var c,d,e,f,g;let h={videoEnabled:null==(c=null==a?void 0:a.videoEnabled)||c,audioEnabled:null==(d=null==a?void 0:a.audioEnabled)||d,videoDeviceId:null!=(e=null==a?void 0:a.videoDeviceId)?e:"default",audioDeviceId:null!=(f=null==a?void 0:a.audioDeviceId)?f:"default",username:null!=(g=null==a?void 0:a.username)?g:""};if(b)return h;{let a=b9();return bC(bC({},h),a??{})}}(a.defaults,a.preventLoad??!1)),d=j.useCallback(a=>{c(b=>({...b,audioEnabled:a}))},[]),e=j.useCallback(a=>{c(b=>({...b,videoEnabled:a}))},[]),f=j.useCallback(a=>{c(b=>({...b,audioDeviceId:a}))},[]),g=j.useCallback(a=>{c(b=>({...b,videoDeviceId:a}))},[]),h=j.useCallback(a=>{c(b=>({...b,username:a}))},[]);return j.useEffect(()=>{!function(a,b=!1){!0!==b&&ca(a)}(b,a.preventSave??!1)},[b,a.preventSave]),{userChoices:b,saveAudioInputEnabled:d,saveVideoInputEnabled:e,saveAudioInputDeviceId:f,saveVideoInputDeviceId:g,saveUsername:h}}({preventSave:!c}),A=j.useCallback((a,b)=>b?w(a):null,[w]),B=j.useCallback((a,b)=>b?x(a):null,[x]);return j.createElement("div",{...v},n.microphone&&j.createElement("div",{className:"lk-button-group"},j.createElement(da,{source:l.Track.Source.Microphone,showIcon:p,onChange:A,onDeviceError:a=>null==d?void 0:d({source:l.Track.Source.Microphone,error:a})},q&&"Microphone"),j.createElement("div",{className:"lk-button-group-menu"},j.createElement(dD,{kind:"audioinput",onActiveDeviceChange:(a,b)=>y(b??"default")}))),n.camera&&j.createElement("div",{className:"lk-button-group"},j.createElement(da,{source:l.Track.Source.Camera,showIcon:p,onChange:B,onDeviceError:a=>null==d?void 0:d({source:l.Track.Source.Camera,error:a})},q&&"Camera"),j.createElement("div",{className:"lk-button-group-menu"},j.createElement(dD,{kind:"videoinput",onActiveDeviceChange:(a,b)=>z(b??"default")}))),n.screenShare&&r&&j.createElement(da,{source:l.Track.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:p,onChange:u,onDeviceError:a=>null==d?void 0:d({source:l.Track.Source.ScreenShare,error:a})},q&&(s?"Stop screen share":"Share screen")),n.chat&&j.createElement(cN,null,p&&j.createElement(cS,null),q&&"Chat"),n.settings&&j.createElement(dE,null,p&&j.createElement(cV,null),q&&"Settings"),n.leave&&j.createElement(cO,null,p&&j.createElement(cW,null),q&&"Leave"),j.createElement(c8,null))}function dG({chatMessageFormatter:a,chatMessageDecoder:b,chatMessageEncoder:c,SettingsComponent:d,...e}){var f,g,h;let[i,k]=j.useState({showChat:!1,unreadMessages:0,showSettings:!1}),m=j.useRef(null),n=cE([{source:l.Track.Source.Camera,withPlaceholder:!0},{source:l.Track.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[l.RoomEvent.ActiveSpeakersChanged],onlySubscribed:!1}),o=function(){let[a,b]=j.useReducer(cc,bM),[c,d]=j.useReducer(cb,bN);return{pin:{dispatch:b,state:a},widget:{dispatch:d,state:c}}}(),p=n.filter(bE).filter(a=>a.publication.source===l.Track.Source.ScreenShare),q=null==(h=function(a){let b=cf();if(a??(a=b),!a)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return a}(h=o),f=j.useMemo(()=>(null==h?void 0:h.pin.state)!==void 0&&h.pin.state.length>=1?h.pin.state:[],[h.pin.state]))?void 0:f[0],r=n.filter(a=>void 0===a||void 0===q||(bE(a)&&bE(q)?a.publication.trackSid!==q.publication.trackSid:bG(a)!==bG(q)));return j.useEffect(()=>{var a,b,c,d,e,f;if(p.some(a=>a.publication.isSubscribed)&&null===m.current?(bJ.debug("Auto set screen share focus:",{newScreenShareTrack:p[0]}),null==(b=(a=o.pin).dispatch)||b.call(a,{msg:"set_pin",trackReference:p[0]}),m.current=p[0]):m.current&&!p.some(a=>{var b,c;return a.publication.trackSid===(null==(c=null==(b=m.current)?void 0:b.publication)?void 0:c.trackSid)})&&(bJ.debug("Auto clearing screen share focus."),null==(d=(c=o.pin).dispatch)||d.call(c,{msg:"clear_pin"}),m.current=null),q&&!bE(q)){let a=n.find(a=>a.participant.identity===q.participant.identity&&a.source===q.source);a!==q&&bE(a)&&(null==(f=(e=o.pin).dispatch)||f.call(e,{msg:"set_pin",trackReference:a}))}},[p.map(a=>`${a.publication.trackSid}_${a.publication.isSubscribed}`).join(),null==(g=null==q?void 0:q.publication)?void 0:g.trackSid,n]),j.useEffect(()=>{},[]),j.createElement("div",{className:"lk-video-conference",...e},"u">typeof document&&j.createElement(dv,{value:o,onWidgetChange:a=>{bJ.debug("updating widget state",a),k(a)}},j.createElement("div",{className:"lk-video-conference-inner"},q?j.createElement("div",{className:"lk-focus-layout-wrapper"},j.createElement(dm,null,j.createElement(du,{tracks:r},j.createElement(dl,null)),q&&j.createElement(dn,{trackRef:q}))):j.createElement("div",{className:"lk-grid-layout-wrapper"},j.createElement(ds,{tracks:n},j.createElement(dl,null))),j.createElement(dF,{controls:{chat:!0,settings:!!d}})),j.createElement(dC,{style:{display:i.showChat?"grid":"none"},messageFormatter:a,messageEncoder:c,messageDecoder:b}),d&&j.createElement("div",{className:"lk-settings-menu-modal",style:{display:i.showSettings?"block":"none"}},j.createElement(d,null))),j.createElement(dw,null),j.createElement(dA,null))}function dH({params:a}){let[b,c]=(0,j.useState)(k.auth.currentUser),[d,e]=(0,j.useState)(null),[f,g]=(0,j.useState)(null),h=a.roomName?decodeURIComponent(a.roomName):"";return((0,j.useEffect)(()=>{let a=k.auth.onAuthStateChanged(a=>{c(a)});return()=>a()},[]),(0,j.useEffect)(()=>{b&&h&&(async()=>{try{let a=await fetch("/api/livekit-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomName:h,identity:b.uid,name:b.displayName||b.email||"Anonymous",isStreamer:!0})}),c=await a.json();if(c.error||!c.token)throw Error(c.error||"Failed to generate a valid token.");e(c.token)}catch(a){console.error("Failed to get LiveKit token:",a),g(a.message)}})()},[b,h]),f)?(0,i.jsxs)("div",{className:"w-full h-screen flex items-center justify-center bg-black text-red-400 p-4 text-center",children:["Error connecting to broadcast: ",f]}):d?(0,i.jsx)("div",{style:{height:"100vh"},children:(0,i.jsx)(cy,{video:!0,audio:!0,token:d,serverUrl:"wss://flixtrend-vobztfm3.livekit.cloud","data-lk-theme":"default",style:{height:"100%"},children:(0,i.jsx)(dG,{})})}):(0,i.jsx)("div",{className:"w-full h-screen flex items-center justify-center bg-black text-white",children:"Connecting to broadcast..."})}a.s(["default",()=>dH],44720)}];

//# sourceMappingURL=src_app_broadcast_%5BroomName%5D_page_tsx_89dc23c5._.js.map