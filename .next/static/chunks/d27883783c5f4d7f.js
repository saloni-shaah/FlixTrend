(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,35775,e=>{"use strict";let t,n,r,i,o;var a,l,c=e.i(47167),s=e.i(43476),u=e.i(71645),d=e.i(61059),f=e.i(31779);let p=Math.min,h=Math.max,m=Math.round,v=Math.floor,g=e=>({x:e,y:e}),y={left:"right",right:"left",bottom:"top",top:"bottom"},b={start:"end",end:"start"};function w(e,t){return"function"==typeof e?e(t):e}function E(e){return e.split("-")[0]}function k(e){return e.split("-")[1]}function S(e){return"x"===e?"y":"x"}function x(e){return"y"===e?"height":"width"}function C(e){return["top","bottom"].includes(E(e))?"y":"x"}function P(e){return e.replace(/start|end/g,e=>b[e])}function R(e){return e.replace(/left|right|bottom|top/g,e=>y[e])}function T(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function M(e,t,n){let r,{reference:i,floating:o}=e,a=C(t),l=S(C(t)),c=x(l),s=E(t),u="y"===a,d=i.x+i.width/2-o.width/2,f=i.y+i.height/2-o.height/2,p=i[c]/2-o[c]/2;switch(s){case"top":r={x:d,y:i.y-o.height};break;case"bottom":r={x:d,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:f};break;case"left":r={x:i.x-o.width,y:f};break;default:r={x:i.x,y:i.y}}switch(k(t)){case"start":r[l]-=p*(n&&u?-1:1);break;case"end":r[l]+=p*(n&&u?-1:1)}return r}let L=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await (null==a.isRTL?void 0:a.isRTL(t)),s=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=M(s,r,c),f=r,p={},h=0;for(let n=0;n<l.length;n++){let{name:o,fn:m}=l[n],{x:v,y:g,data:y,reset:b}=await m({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:s,platform:a,elements:{reference:e,floating:t}});u=v??u,d=g??d,p={...p,[o]:{...p[o],...y}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(s=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):b.rects),{x:u,y:d}=M(s,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}};async function A(e,t){var n,r;void 0===t&&(t={});let{x:i,y:o,platform:a,rects:l,elements:c,strategy:s}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=w(t,e),m="number"!=typeof(r=h)?{top:0,right:0,bottom:0,left:0,...r}:{top:r,right:r,bottom:r,left:r},v=c[p?"floating"===f?"reference":"floating":f],g=T(await a.getClippingRect({element:null==(n=await (null==a.isElement?void 0:a.isElement(v)))||n?v:v.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(c.floating)),boundary:u,rootBoundary:d,strategy:s})),y="floating"===f?{x:i,y:o,width:l.floating.width,height:l.floating.height}:l.reference,b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(c.floating)),E=await (null==a.isElement?void 0:a.isElement(b))&&await (null==a.getScale?void 0:a.getScale(b))||{x:1,y:1},k=T(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:b,strategy:s}):y);return{top:(g.top-k.top+m.top)/E.y,bottom:(k.bottom-g.bottom+m.bottom)/E.y,left:(g.left-k.left+m.left)/E.x,right:(k.right-g.right+m.right)/E.x}}async function O(e,t){let{placement:n,platform:r,elements:i}=e,o=await (null==r.isRTL?void 0:r.isRTL(i.floating)),a=E(n),l=k(n),c="y"===C(n),s=["left","top"].includes(a)?-1:1,u=o&&c?-1:1,d=w(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&"number"==typeof h&&(p="end"===l?-1*h:h),c?{x:p*u,y:f*s}:{x:f*s,y:p*u}}function N(){return"u">typeof window}function _(e){return j(e)?(e.nodeName||"").toLowerCase():"#document"}function I(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function D(e){var t;return null==(t=(j(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function j(e){return!!N()&&(e instanceof Node||e instanceof I(e).Node)}function F(e){return!!N()&&(e instanceof Element||e instanceof I(e).Element)}function V(e){return!!N()&&(e instanceof HTMLElement||e instanceof I(e).HTMLElement)}function z(e){return!(!N()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof I(e).ShadowRoot)}function U(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=B(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function $(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function W(e){let t=H(),n=F(e)?B(e):e;return["transform","translate","scale","rotate","perspective"].some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function H(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function Z(e){return["html","body","#document"].includes(_(e))}function B(e){return I(e).getComputedStyle(e)}function q(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function J(e){if("html"===_(e))return e;let t=e.assignedSlot||e.parentNode||z(e)&&e.host||D(e);return z(t)?t.host:t}function Q(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let i=function e(t){let n=J(t);return Z(n)?t.ownerDocument?t.ownerDocument.body:t.body:V(n)&&U(n)?n:e(n)}(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=I(i);if(o){let e=K(a);return t.concat(a,a.visualViewport||[],U(i)?i:[],e&&n?Q(e):[])}return t.concat(i,Q(i,[],n))}function K(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Y(e){let t=B(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=V(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,l=m(n)!==o||m(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function X(e){return F(e)?e:e.contextElement}function G(e){let t=X(e);if(!V(t))return g(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Y(t),a=(o?m(n.width):n.width)/r,l=(o?m(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}let ee=g(0);function et(e){let t=I(e);return H()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ee}function en(e,t,n,r){var i;void 0===t&&(t=!1),void 0===n&&(n=!1);let o=e.getBoundingClientRect(),a=X(e),l=g(1);t&&(r?F(r)&&(l=G(r)):l=G(e));let c=(void 0===(i=n)&&(i=!1),r&&(!i||r===I(a))&&i)?et(a):g(0),s=(o.left+c.x)/l.x,u=(o.top+c.y)/l.y,d=o.width/l.x,f=o.height/l.y;if(a){let e=I(a),t=r&&F(r)?I(r):r,n=e,i=K(n);for(;i&&r&&t!==n;){let e=G(i),t=i.getBoundingClientRect(),r=B(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;s*=e.x,u*=e.y,d*=e.x,f*=e.y,s+=o,u+=a,i=K(n=I(i))}}return T({width:d,height:f,x:s,y:u})}function er(e,t){let n=q(e).scrollLeft;return t?t.left+n:en(D(e)).left+n}function ei(e,t,n){void 0===n&&(n=!1);let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:er(e,r)),y:r.top+t.scrollTop}}function eo(e,t,n){var r;let i;if("viewport"===t)i=function(e,t){let n=I(e),r=D(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(i){o=i.width,a=i.height;let e=H();(!e||e&&"fixed"===t)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:l,y:c}}(e,n);else if("document"===t){let t,n,o,a,l,c,s;r=D(e),t=D(r),n=q(r),o=r.ownerDocument.body,a=h(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),l=h(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),c=-n.scrollLeft+er(r),s=-n.scrollTop,"rtl"===B(o).direction&&(c+=h(t.clientWidth,o.clientWidth)-a),i={width:a,height:l,x:c,y:s}}else if(F(t)){let e,r,o,a,l,c;r=(e=en(t,!0,"fixed"===n)).top+t.clientTop,o=e.left+t.clientLeft,a=V(t)?G(t):g(1),l=t.clientWidth*a.x,c=t.clientHeight*a.y,i={width:l,height:c,x:o*a.x,y:r*a.y}}else{let n=et(e);i={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return T(i)}function ea(e){return"static"===B(e).position}function el(e,t){if(!V(e)||"fixed"===B(e).position)return null;if(t)return t(e);let n=e.offsetParent;return D(e)===n&&(n=n.ownerDocument.body),n}function ec(e,t){let n=I(e);if($(e))return n;if(!V(e)){let t=J(e);for(;t&&!Z(t);){if(F(t)&&!ea(t))return t;t=J(t)}return n}let r=el(e,t);for(;r&&["table","td","th"].includes(_(r))&&ea(r);)r=el(r,t);return r&&Z(r)&&ea(r)&&!W(r)?n:r||function(e){let t=J(e);for(;V(t)&&!Z(t);){if(W(t))return t;if($(t))break;t=J(t)}return null}(e)||n}let es=async function(e){let t=this.getOffsetParent||ec,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=V(t),i=D(t),o="fixed"===n,a=en(e,!0,o,t),l={scrollLeft:0,scrollTop:0},c=g(0);if(r||!r&&!o)if(("body"!==_(t)||U(i))&&(l=q(t)),r){let e=en(t,!0,o,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&(c.x=er(i));let s=!i||r||o?g(0):ei(i,l);return{x:a.left+l.scrollLeft-c.x-s.x,y:a.top+l.scrollTop-c.y-s.y,width:a.width,height:a.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},eu={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,o="fixed"===i,a=D(r),l=!!t&&$(t.floating);if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},s=g(1),u=g(0),d=V(r);if((d||!d&&!o)&&(("body"!==_(r)||U(a))&&(c=q(r)),V(r))){let e=en(r);s=G(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=!a||d||o?g(0):ei(a,c,!0);return{width:n.width*s.x,height:n.height*s.y,x:n.x*s.x-c.scrollLeft*s.x+u.x+f.x,y:n.y*s.y-c.scrollTop*s.y+u.y+f.y}},getDocumentElement:D,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,o=[..."clippingAncestors"===n?$(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=Q(e,[],!1).filter(e=>F(e)&&"body"!==_(e)),i=null,o="fixed"===B(e).position,a=o?J(e):e;for(;F(a)&&!Z(a);){let t=B(a),n=W(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||U(a)&&!n&&function e(t,n){let r=J(t);return!(r===n||!F(r)||Z(r))&&("fixed"===B(r).position||e(r,n))}(e,a))?r=r.filter(e=>e!==a):i=t,a=J(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((e,n)=>{let r=eo(t,n,i);return e.top=h(r.top,e.top),e.right=p(r.right,e.right),e.bottom=p(r.bottom,e.bottom),e.left=h(r.left,e.left),e},eo(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:ec,getElementRects:es,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=Y(e);return{width:t,height:n}},getScale:G,isElement:F,isRTL:function(e){return"rtl"===B(e).direction}};function ed(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}var ef="u">typeof globalThis?globalThis:"u">typeof window?window:e.g;function ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eh,em={exports:{}},ev=em.exports;let eg=ep((eh||(eh=1,nj=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},o=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),i=0;i<r.length;i++){var o=r[i];this[o]=i<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function s(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(r,i,o){var c;return"debug"===(c=r)&&(c="log"),typeof console!==t&&("trace"===c&&n?l:void 0!==console[c]?a(console,c):void 0!==console.log?a(console,"log"):e)||s.apply(this,arguments)}function d(e,n){var a,l,s,d=this,f="loglevel";function p(){var e;if(!(typeof window===t||!f)){try{e=window.localStorage[f]}catch{}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(f),i=n.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return s??l??a},d.setLevel=function(e,n){return s=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(!(typeof window===t||!f)){try{window.localStorage[f]=n;return}catch{}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch{}}}(s),c.call(d)},d.setDefaultLevel=function(e){l=h(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){s=null,function(){if(!(typeof window===t||!f)){try{window.localStorage.removeItem(f)}catch{}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(a=h(o.getLevel())),c.call(d),o===d)for(var e in i)i[e].rebuild()},a=h(o?o.getLevel():"WARN");var m=p();null!=m&&(s=h(m)),c.call(d)}(o=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,o.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=f),o},o.getLoggers=function(){return i},o.default=o,o},em.exports?em.exports=nj():ev.log=nj()),em.exports));var ey=function(e,t){return(ey=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function eb(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ey(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function ew(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(c){var s=[l,c];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function eE(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ek(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function eS(e,t,n){if(n||2==arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function ex(e){return this instanceof ex?(this.v=e,this):new ex(e)}function eC(e){return"function"==typeof e}function eP(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var eR=eP(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(e,t){return t+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function eT(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var eM=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=eE(o),l=a.next();!l.done;l=a.next())l.value.remove(this)}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(eC(c))try{c()}catch(e){i=e instanceof eR?e.errors:[e]}var s=this._finalizers;if(s){this._finalizers=null;try{for(var u=eE(s),d=u.next();!d.done;d=u.next()){var f=d.value;try{eO(f)}catch(e){i=i??[],e instanceof eR?i=eS(eS([],ek(i)),ek(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new eR(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)eO(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&eT(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&eT(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}(),eL=eM.EMPTY;function eA(e){return e instanceof eM||e&&"closed"in e&&eC(e.remove)&&eC(e.add)&&eC(e.unsubscribe)}function eO(e){eC(e)?e():e.unsubscribe()}var eN=void 0,e_=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,eS([e,t],ek(n)))};function eI(e){e_(function(){throw e})}function eD(){}var ej=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,eA(t)&&t.add(n)):n.destination=ez,n}return eb(t,e),t.create=function(e,t,n){return new eV(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(eM),eF=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){eI(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){eI(e)}else eI(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){eI(e)}},e}(),eV=function(e){function t(t,n,r){var i=e.call(this)||this;return i.destination=new eF(eC(t)||!t?{next:t??void 0,error:n??void 0,complete:r??void 0}:t),i}return eb(t,e),t}(ej),ez={closed:!0,next:eD,error:function(e){throw e},complete:eD},eU="function"==typeof Symbol&&Symbol.observable||"@@observable";function e$(e){return e}var eW=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i,o=this,a=!function(e){return e&&e instanceof ej||e&&eC(e.next)&&eC(e.error)&&eC(e.complete)&&eA(e)}(e)?new eV(e,t,n):e;return r=o.operator,i=o.source,a.add(r?r.call(a,i):i?o._subscribe(a):o._trySubscribe(a)),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=eH(t))(function(t,r){var i=new eV({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[eU]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?e$:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=eH(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function eH(e){var t;return null!=(t=e??eN)?t:Promise}function eZ(e){return function(t){if(eC(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function eB(e,t,n,r,i){return new eq(e,t,n,r,i)}var eq=function(e){function t(t,n,r,i,o,a){var l=e.call(this,t)||this;return l.onFinalize=o,l.shouldUnsubscribe=a,l._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,l._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,l}return eb(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(ej),eJ=eP(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),eQ=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return eb(t,e),t.prototype.lift=function(e){var t=new eK(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new eJ},t.prototype.next=function(e){var t,n;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var r=eE(this.currentObservers),i=r.next();!i.done;i=r.next())i.value.next(e)}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},t.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var t=this.observers;t.length;)t.shift().error(e)}},t.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this.hasError,r=this.isStopped,i=this.observers;return n||r?eL:(this.currentObservers=null,i.push(e),new eM(function(){t.currentObservers=null,eT(i,e)}))},t.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,n=this.thrownError,r=this.isStopped;t?e.error(n):r&&e.complete()},t.prototype.asObservable=function(){var e=new eW;return e.source=this,e},t.create=function(e,t){return new eK(e,t)},t}(eW),eK=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return eb(t,e),t.prototype.next=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.next)||n.call(t,e)},t.prototype.error=function(e){var t,n;null==(n=null==(t=this.destination)?void 0:t.error)||n.call(t,e)},t.prototype.complete=function(){var e,t;null==(t=null==(e=this.destination)?void 0:e.complete)||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!=(n=null==(t=this.source)?void 0:t.subscribe(e))?n:eL},t}(eQ),eY=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return eb(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n.closed||t.next(this._value),n},t.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,n=this._value;if(e)throw t;return this._throwIfClosed(),n},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(eQ),eX=function(){return Date.now()},eG=function(e){function t(t,n){return e.call(this)||this}return eb(t,e),t.prototype.schedule=function(e,t){return this},t}(eM),e0=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,eS([e,t],ek(n)))},e5=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return eb(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n,r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!=(n=this.id)?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),e0(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,eT(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(eG),e1=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=eX,e}(),e2=new(function(e){function t(t,n){void 0===n&&(n=e1.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return eb(t,e),t.prototype.flush=function(e){var t,n=this.actions;if(this._active)return void n.push(e);this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=n.shift())if(this._active=!1,t){for(;e=n.shift();)e.unsubscribe();throw t}},t}(e1))(e5);function e7(e){var t;return(t=e[e.length-1])&&eC(t.schedule)?e.pop():void 0}var e6=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function e4(e){return eC(null==e?void 0:e.then)}function e9(e){return Symbol.asyncIterator&&eC(null==e?void 0:e[Symbol.asyncIterator])}function e3(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var e8="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function te(e){return eC(null==e?void 0:e[e8])}function tt(e){return function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,s)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||l(e,t)})},t&&(r[e]=t(r[e])))}function l(e,t){try{var n;(n=i[e](t)).value instanceof ex?Promise.resolve(n.value.v).then(c,s):u(o[0][2],n)}catch(e){u(o[0][3],e)}}function c(e){l("next",e)}function s(e){l("throw",e)}function u(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function(){var t,n,r;return ew(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,ex(t.read())];case 3:return r=(n=i.sent()).value,n.done?[4,ex(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,ex(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function tn(e){return eC(null==e?void 0:e.getReader)}function tr(e){if(e instanceof eW)return e;if(null!=e){var t,n,r,i;if(eC(e[eU])){return t=e,new eW(function(e){var n=t[eU]();if(eC(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(e6(e)){return n=e,new eW(function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}if(e4(e)){return r=e,new eW(function(e){r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,eI)})}if(e9(e))return ti(e);if(te(e)){return i=e,new eW(function(e){var t,n;try{for(var r=eE(i),o=r.next();!o.done;o=r.next()){var a=o.value;if(e.next(a),e.closed)return}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()})}if(tn(e))return ti(tt(e))}throw e3(e)}function ti(e){return new eW(function(t){(function(e,t){var n,r,i,o,a,l,c,s;return a=this,l=void 0,c=void 0,s=function(){var a;return ew(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=eE(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var o,a,l;o=r,a=i,l=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:l})},a)})}}}(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:l.sent()},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})},new(c||(c=Promise))(function(e,t){function n(e){try{i(s.next(e))}catch(e){t(e)}}function r(e){try{i(s.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):((i=t.value)instanceof c?i:new c(function(e){e(i)})).then(n,r)}i((s=s.apply(a,l||[])).next())})})(e,t).catch(function(e){return t.error(e)})})}function to(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function ta(e,t){return void 0===t&&(t=0),eZ(function(n,r){n.subscribe(eB(r,function(n){return to(r,e,function(){return r.next(n)},t)},function(){return to(r,e,function(){return r.complete()},t)},function(n){return to(r,e,function(){return r.error(n)},t)}))})}function tl(e,t){return void 0===t&&(t=0),eZ(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function tc(e,t){if(!e)throw Error("Iterable cannot be null");return new eW(function(n){to(n,t,function(){var r=e[Symbol.asyncIterator]();to(n,t,function(){r.next().then(function(e){e.done?n.complete():n.next(e.value)})},0,!0)})})}function ts(e,t){return t?function(e,t){if(null!=e){if(eC(e[eU]))return tr(e).pipe(tl(t),ta(t));if(e6(e))return new eW(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})});if(e4(e))return tr(e).pipe(tl(t),ta(t));if(e9(e))return tc(e,t);if(te(e))return new eW(function(n){var r;return to(n,t,function(){r=e[e8](),to(n,t,function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(e){n.error(e);return}i?n.complete():n.next(t)},0,!0)}),function(){return eC(null==r?void 0:r.return)&&r.return()}});if(tn(e))return tc(tt(e),t)}throw e3(e)}(e,t):tr(e)}function tu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e7(e);return ts(e,n)}var td=eP(function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}});function tf(e){throw new td(e)}function tp(e,t){return eZ(function(n,r){var i=0;n.subscribe(eB(r,function(n){r.next(e.call(t,n,i++))}))})}var th=Array.isArray;function tm(e,t,n){return void 0===n&&(n=1/0),eC(t)?tm(function(n,r){return tp(function(e,i){return t(n,e,r,i)})(tr(e(n,r)))},n):("number"==typeof t&&(n=t),eZ(function(t,r){var i,o,a,l,c,s,u;return i=n,o=[],a=0,l=0,c=!1,s=function(){!c||o.length||a||r.complete()},u=function(t){a++;var n=!1;tr(e(t,l++)).subscribe(eB(r,function(e){r.next(e)},function(){n=!0},void 0,function(){if(n)try{for(a--;o.length&&a<i;)!function(){var e=o.shift();u(e)}();s()}catch(e){r.error(e)}}))},t.subscribe(eB(r,function(e){return a<i?u(e):o.push(e)},function(){c=!0,s()})),function(){}}))}function tv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tm(e$,1)(ts(e,e7(e)))}var tg=["addListener","removeListener"],ty=["addEventListener","removeEventListener"],tb=["on","off"];function tw(e,t){return function(n){return function(r){return e[n](t,r)}}}function tE(e,t){return eZ(function(n,r){var i=0;n.subscribe(eB(r,function(n){return e.call(t,n,i++)&&r.next(n)}))})}function tk(e,t){return e===t}function tS(e,t){var n;return eZ((n=arguments.length>=2,function(r,i){var o=n,a=t,l=0;r.subscribe(eB(i,function(t){var n=l++;a=o?e(a,t,n):(o=!0,t),i.next(a)},void 0))}))}function tx(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e7(e);return eZ(function(t,r){(n?tv(e,t,n):tv(e,t)).subscribe(r)})}function tC(e){return eZ(function(t,n){tr(e).subscribe(eB(n,function(){return n.complete()},eD)),n.closed||t.subscribe(n)})}var tP=Object.defineProperty,tR=Object.defineProperties,tT=Object.getOwnPropertyDescriptors,tM=Object.getOwnPropertySymbols,tL=Object.prototype.hasOwnProperty,tA=Object.prototype.propertyIsEnumerable,tO=(e,t,n)=>t in e?tP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tN=(e,t)=>{for(var n in t||(t={}))tL.call(t,n)&&tO(e,n,t[n]);if(tM)for(var n of tM(t))tA.call(t,n)&&tO(e,n,t[n]);return e},t_=(e,t,n)=>new Promise((r,i)=>{var o=e=>{try{l(n.next(e))}catch(e){i(e)}},a=e=>{try{l(n.throw(e))}catch(e){i(e)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);l((n=n.apply(e,t)).next())});function tI(e){var t,n,r;return!(typeof e>"u")&&(!!(t=e)&&t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&"u">typeof(null==(n=t.publication)?void 0:n.track)||!!(r=e)&&r.hasOwnProperty("participant")&&r.hasOwnProperty("source")&&r.hasOwnProperty("publication")&&"u">typeof r.publication)}function tD(e){return!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u"}function tj(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(tD(e))return`${e.participant.identity}_${e.source}_placeholder`;if(tI(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}function tF(e,t){return!(typeof t>"u")&&(tI(e)?t.some(t=>t.participant.identity===e.participant.identity&&tI(t)&&t.publication.trackSid===e.publication.trackSid):!!tD(e)&&t.some(t=>t.participant.identity===e.participant.identity&&tD(t)&&t.source===e.source))}var tV=[f.RoomEvent.ConnectionStateChanged,f.RoomEvent.RoomMetadataChanged,f.RoomEvent.ActiveSpeakersChanged,f.RoomEvent.ConnectionQualityChanged,f.RoomEvent.ParticipantConnected,f.RoomEvent.ParticipantDisconnected,f.RoomEvent.ParticipantPermissionsChanged,f.RoomEvent.ParticipantMetadataChanged,f.RoomEvent.ParticipantNameChanged,f.RoomEvent.ParticipantAttributesChanged,f.RoomEvent.TrackMuted,f.RoomEvent.TrackUnmuted,f.RoomEvent.TrackPublished,f.RoomEvent.TrackUnpublished,f.RoomEvent.TrackStreamStateChanged,f.RoomEvent.TrackSubscriptionFailed,f.RoomEvent.TrackSubscriptionPermissionChanged,f.RoomEvent.TrackSubscriptionStatusChanged,f.RoomEvent.LocalTrackPublished,f.RoomEvent.LocalTrackUnpublished],tz=([...(f.ParticipantEvent.TrackPublished,f.ParticipantEvent.TrackUnpublished,f.ParticipantEvent.TrackMuted,f.ParticipantEvent.TrackUnmuted,f.ParticipantEvent.TrackStreamStateChanged,f.ParticipantEvent.TrackSubscribed,f.ParticipantEvent.TrackUnsubscribed,f.ParticipantEvent.TrackSubscriptionPermissionChanged,f.ParticipantEvent.TrackSubscriptionFailed,f.ParticipantEvent.LocalTrackPublished,f.ParticipantEvent.LocalTrackUnpublished,[f.ParticipantEvent.ConnectionQualityChanged,f.ParticipantEvent.IsSpeakingChanged,f.ParticipantEvent.ParticipantMetadataChanged,f.ParticipantEvent.ParticipantPermissionsChanged,f.ParticipantEvent.TrackMuted,f.ParticipantEvent.TrackUnmuted,f.ParticipantEvent.TrackPublished,f.ParticipantEvent.TrackUnpublished,f.ParticipantEvent.TrackStreamStateChanged,f.ParticipantEvent.TrackSubscriptionFailed,f.ParticipantEvent.TrackSubscriptionPermissionChanged,f.ParticipantEvent.TrackSubscriptionStatusChanged]),f.ParticipantEvent.LocalTrackPublished,f.ParticipantEvent.LocalTrackUnpublished],eg.getLogger("lk-components-js"));tz.setDefaultLevel("WARN");var tU=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}],t$=((n=t$||{}).AgentState="lk.agent.state",n.PublishOnBehalf="lk.publish_on_behalf",n.TranscriptionFinal="lk.transcription_final",n.TranscriptionSegmentId="lk.segment_id",n.TranscribedTrackId="lk.transcribed_track_id",n),tW=[],tH={showChat:!1,unreadMessages:0,showSettings:!1};function tZ(e){return"object"==typeof e}function tB(e){return Array.isArray(e)&&e.filter(tZ).length>0}function tq(e,t){var n,r,i,o;return(null!=(r=null==(n=e.joinedAt)?void 0:n.getTime())?r:0)-(null!=(o=null==(i=t.joinedAt)?void 0:i.getTime())?o:0)}function tJ(e,t){return Array(Math.max(e.length,t.length)).fill([]).map((n,r)=>[e[r],t[r]])}function tQ(e,t,n){return e.filter(e=>!t.map(e=>n(e)).includes(n(e)))}function tK(e){return e.map(e=>"string"==typeof e||"number"==typeof e?`${e}`:tj(e))}function tY(e,t){let n=t.findIndex(t=>tj(t)===tj(e));if(-1===n)throw Error(`Element not part of the array: ${tj(e)} not in ${tK(t)}`);return n}function tX(e,t){return e.reduce((e,n,r)=>r%t==0?[...e,[n]]:[...e.slice(0,-1),[...e.slice(-1)[0],n]],[])}function tG(e){return`lk-${e}`}function t0(e){if(tI(e))return e.publication;{let{source:t,name:n,participant:r}=e;if(t&&n)return r.getTrackPublications().find(e=>e.source===t&&e.trackName===n);if(n)return r.getTrackPublicationByName(n);if(t)return r.getTrackPublication(t);throw Error("At least one of source and name needs to be defined")}}function t5(e,...t){return new eW(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tx(e))}function t1(e,t){return new eW(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function t2(e){return t5(e,f.RoomEvent.AudioPlaybackStatusChanged).pipe(tp(e=>({canPlayAudio:e.canPlaybackAudio})))}function t7(e){return t5(e,f.RoomEvent.VideoPlaybackStatusChanged).pipe(tp(e=>({canPlayVideo:e.canPlaybackVideo})))}function t6(e,...t){return new eW(n=>{let r=()=>{n.next(e)};return t.forEach(t=>{e.on(t,r)}),()=>{t.forEach(t=>{e.off(t,r)})}}).pipe(tx(e))}function t4(e){return t6(e,f.ParticipantEvent.TrackMuted,f.ParticipantEvent.TrackUnmuted,f.ParticipantEvent.ParticipantPermissionsChanged,f.ParticipantEvent.TrackPublished,f.ParticipantEvent.TrackUnpublished,f.ParticipantEvent.LocalTrackPublished,f.ParticipantEvent.LocalTrackUnpublished,f.ParticipantEvent.MediaDevicesError,f.ParticipantEvent.TrackSubscriptionStatusChanged).pipe(tp(e=>{let{isMicrophoneEnabled:t,isCameraEnabled:n,isScreenShareEnabled:r}=e,i=e.getTrackPublication(f.Track.Source.Microphone);return{isCameraEnabled:n,isMicrophoneEnabled:t,isScreenShareEnabled:r,cameraTrack:e.getTrackPublication(f.Track.Source.Camera),microphoneTrack:i,participant:e}}))}function t9(e,t){return new eW(n=>{let r=(...e)=>{n.next(e)};return e.on(t,r),()=>{e.off(t,r)}})}function t3(e){var t,n,r,i;return t6(e.participant,f.ParticipantEvent.TrackMuted,f.ParticipantEvent.TrackUnmuted,f.ParticipantEvent.TrackSubscribed,f.ParticipantEvent.TrackUnsubscribed,f.ParticipantEvent.LocalTrackPublished,f.ParticipantEvent.LocalTrackUnpublished).pipe(tp(t=>{var n,r;let i=null!=(n=e.publication)?n:t.getTrackPublication(e.source);return null==(r=null==i?void 0:i.isMuted)||r}),tx(null==(i=null!=(r=null==(t=e.publication)?void 0:t.isMuted)?r:null==(n=e.participant.getTrackPublication(e.source))?void 0:n.isMuted)||i))}function t8(e,t){return t_(this,arguments,function*(e,t,n={}){let{reliable:r,destinationIdentities:i,topic:o}=n;yield e.publishData(t,{destinationIdentities:i,topic:o,reliable:r})})}var ne=new WeakMap,nt=e=>JSON.parse(new TextDecoder().decode(e)),nn=e=>new TextEncoder().encode(JSON.stringify(e));function nr(e,t,n=!0){let r=[e.localParticipant,...Array.from(e.remoteParticipants.values())],i=[];return r.forEach(e=>{t.forEach(t=>{let r=Array.from(e.trackPublications.values()).filter(e=>e.source===t&&(!n||e.track)).map(t=>({participant:e,publication:t,source:t.source}));i.push(...r)})}),{trackReferences:i,participants:r}}var{load:ni,save:no}=(nF="lk-user-choices",{load:()=>(function(e){if(typeof localStorage>"u")return void tz.error("Local storage is not available.");try{let t=localStorage.getItem(e);if(!t)return void tz.warn(`Item with key ${e} does not exist in local storage.`);return JSON.parse(t)}catch(e){tz.error(`Error getting item from local storage: ${e}`);return}})(nF),save:e=>(function(e,t){if(typeof localStorage>"u")return void tz.error("Local storage is not available.");try{if(t){let n=Object.fromEntries(Object.entries(t).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(n))}}catch(e){tz.error(`Error setting item to local storage: ${e}`)}})(nF,e)});function na(e,t){if("show_chat"===t.msg)return{...e,showChat:!0,unreadMessages:0};if("hide_chat"===t.msg)return{...e,showChat:!1};if("toggle_chat"!==t.msg)return"unread_msg"===t.msg?{...e,unreadMessages:t.count}:"toggle_settings"===t.msg?{...e,showSettings:!e.showSettings}:{...e};{let t={...e,showChat:!e.showChat};return!0===t.showChat&&(t.unreadMessages=0),t}}function nl(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:{...e}}let nc=u.createContext(void 0);function ns(){let e=u.useContext(nc);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function nu(){return u.useContext(nc)}let nd=u.createContext(void 0);function nf(){return u.useContext(nd)}function np(e){let t=nf(),n=e??t;if(!n)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}let nh=u.createContext(void 0);function nm(){return u.useContext(nh)}function nv(e){let t=nm(),n=nf(),r=e??t??(null==n?void 0:n.participant);if(!r)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return r}let ng=u.createContext(void 0);function ny(){let e=u.useContext(ng);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function nb(){return u.useContext(ng)}function nw(e){let t=nb(),n=e??t;if(!n)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}u.createContext(void 0);let nE=u.createContext(void 0);function nk(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}(e))&&(r&&(r+=" "),r+=t);return r}function nS(...e){let t={...e[0]};for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],i=r[e];"function"==typeof n&&"function"==typeof i&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)if("function"==typeof n)try{n(...t)}catch(e){console.error(e)}}}(n,i):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof i?t[e]=nk(n,i):t[e]=void 0!==i?i:n}}return t}function nx(e){return void 0!==e}function nC(...e){return nS(...e.filter(nx))}function nP(e,t,n){return u.Children.map(e,r=>u.isValidElement(r)&&u.Children.only(e)?(r.props.className&&(t??(t={}),t.className=nk(r.props.className,t.className),t.style={...r.props.style,...t.style}),u.cloneElement(r,{...t,key:n})):r)}function nR(e,t){return"processor"===e&&t&&"object"==typeof t&&"name"in t?t.name:"e2ee"===e&&t?"e2ee-enabled":t}let nT={connect:!0,audio:!1,video:!1},nM=u.forwardRef(function(e,t){let{room:n,htmlProps:r}=function(e){let{token:t,serverUrl:n,options:r,room:i,connectOptions:o,connect:a,audio:l,video:c,screen:s,onConnected:d,onDisconnected:p,onError:h,onMediaDeviceFailure:m,onEncryptionError:v,simulateParticipants:g,...y}={...nT,...e};r&&i&&tz.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[b,w]=u.useState(),E=u.useRef(a);u.useEffect(()=>{w(i??new f.Room(r))},[i,JSON.stringify(r,nR)]);let k=u.useMemo(()=>{let{className:e}={className:"lk-room-container"};return nS(y,{className:e})},[y]);return u.useEffect(()=>{if(!b)return;let e=()=>{let e=b.localParticipant;tz.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!l,"boolean"!=typeof l?l:void 0),e.setCameraEnabled(!!c,"boolean"!=typeof c?c:void 0),e.setScreenShareEnabled(!!s,"boolean"!=typeof s?s:void 0)]).catch(e=>{tz.warn(e),null==h||h(e)})},t=(e,t)=>{let n=f.MediaDeviceFailure.getFailure(e);null==m||m(n,t)},n=e=>{null==v||v(e)},r=e=>{null==p||p(e)},i=()=>{null==d||d()};return b.on(f.RoomEvent.SignalConnected,e).on(f.RoomEvent.MediaDevicesError,t).on(f.RoomEvent.EncryptionError,n).on(f.RoomEvent.Disconnected,r).on(f.RoomEvent.Connected,i),()=>{b.off(f.RoomEvent.SignalConnected,e).off(f.RoomEvent.MediaDevicesError,t).off(f.RoomEvent.EncryptionError,n).off(f.RoomEvent.Disconnected,r).off(f.RoomEvent.Connected,i)}},[b,l,c,s,h,v,m,d,p]),u.useEffect(()=>{if(b){if(g)return void b.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});if(a){if(E.current=!0,tz.debug("connecting"),!t)return void tz.debug("no token yet");if(!n){tz.warn("no livekit url provided"),null==h||h(Error("no livekit url provided"));return}b.connect(n,t,o).catch(e=>{tz.warn(e),!0===E.current&&(null==h||h(e))})}else tz.debug("disconnecting because connect is false"),E.current=!1,b.disconnect()}},[a,t,JSON.stringify(o),b,h,n,g]),u.useEffect(()=>{if(b)return()=>{tz.info("disconnecting on onmount"),b.disconnect()}},[b]),{room:b,htmlProps:k}}(e);return u.createElement("div",{ref:t,...r},n&&u.createElement(ng.Provider,{value:n},u.createElement(nE.Provider,{value:e.featureFlags},e.children)))}),nL=e=>{let n,r,i,[o,a]=u.useState({width:0,height:0});u.useLayoutEffect(()=>{if(e.current){let{width:t,height:n}=e.current.getBoundingClientRect();a({width:t,height:n})}},[e.current]);let l=u.useCallback(e=>a(e.contentRect),[]);return r=t||(t=function(){let e=!1,t=[],n=new Map;if(typeof window>"u")return;let r=new ResizeObserver((r,i)=>{t=t.concat(r),e||window.requestAnimationFrame(()=>{let r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);let o=n.get(t[e].target);null==o||o.forEach(n=>n(t[e],i))}t=[],e=!1}),e=!0});return{observer:r,subscribe(e,t){r.observe(e);let i=n.get(e)??[];i.push(t),n.set(e,i)},unsubscribe(e,t){let i=n.get(e)??[];if(1===i.length){r.unobserve(e),n.delete(e);return}let o=i.indexOf(t);-1!==o&&i.splice(o,1),n.set(e,i)}}}()),n=u.useRef(l),u.useEffect(()=>{n.current=l}),i=n,u.useLayoutEffect(()=>{let t=!1,n=e.current;if(n)return null==r||r.subscribe(n,o),()=>{t=!0,null==r||r.unsubscribe(n,o)};function o(e,n){t||i.current(e,n)}},[e.current,r,i]),null==r||r.observer,o};function nA(e,t,n=!0){let[r,i]=u.useState(t);return u.useEffect(()=>{if(n&&i(t),typeof window>"u"||!e)return;let r=e.subscribe(i);return()=>r.unsubscribe()},[e,n]),r}function nO(e){let t=nw(e);return nA(u.useMemo(()=>t1(t,f.RoomEvent.ConnectionStateChanged).pipe(tp(([e])=>e),tx(t.state)),[t]),t.state)}function nN(e,t={}){var n,r;let i=nv("string"==typeof e?t.participant:e.participant),o="string"==typeof e?{participant:i,source:e}:e,[a,l]=u.useState(!!(null!=(n=o.publication)&&n.isMuted||null!=(r=i.getTrackPublication(o.source))&&r.isMuted));return u.useEffect(()=>{let e=t3(o).subscribe(l);return()=>e.unsubscribe()},[tj(o)]),a}function n_(e,t,n={}){let r,i,o,a,l,c,s,d,p=u.useRef([]),h=u.useRef(-1),m=t!==h.current,v="function"==typeof n.customSortFunction?n.customSortFunction(e):(l=[],c=[],s=[],d=[],e.forEach(e=>{e.participant.isLocal&&e.source===f.Track.Source.Camera?l.push(e):e.source===f.Track.Source.ScreenShare?c.push(e):e.source===f.Track.Source.Camera?s.push(e):d.push(e)}),r=[],i=[],c.forEach(e=>{e.participant.isLocal?r.push(e):i.push(e)}),r.sort((e,t)=>tq(e.participant,t.participant)),i.sort((e,t)=>tq(e.participant,t.participant)),[...l,...i,...r,...(o=[],a=[],s.forEach(e=>{e.participant.isLocal?o.push(e):a.push(e)}),a.sort((e,t)=>{var n,r,i,o,a,l,c,s,u;let d;return e.participant.isSpeaking&&t.participant.isSpeaking?(n=e.participant,t.participant.audioLevel-n.audioLevel):e.participant.isSpeaking!==t.participant.isSpeaking?(r=e.participant,i=t.participant,r.isSpeaking===i.isSpeaking?0:r.isSpeaking?-1:1):e.participant.lastSpokeAt!==t.participant.lastSpokeAt?(o=e.participant,a=t.participant,void 0!==o.lastSpokeAt||void 0!==a.lastSpokeAt?(null!=(c=null==(l=a.lastSpokeAt)?void 0:l.getTime())?c:0)-(null!=(u=null==(s=o.lastSpokeAt)?void 0:s.getTime())?u:0):0):tI(e)!==tI(t)?tI(e)?tI(t)?0:-1:+!!tI(t):e.participant.isCameraEnabled!==t.participant.isCameraEnabled?(d=e.participant.isCameraEnabled)!==t.participant.isCameraEnabled?d?-1:1:0:tq(e.participant,t.participant)}),[...o,...a]),...d]),g=[...v];if(!1===m)try{g=function(e,t,n){var r,i;let o=(r=e,i=t,r.map(e=>i.find(t=>tj(e)===tj(t)||"number"!=typeof e&&tD(e)&&tI(t)&&tD(e)&&tI(t)&&t.participant.identity===e.participant.identity&&t.source===e.source)??e));if(o.length<t.length){let e=tQ(t,o,tj);o=[...o,...e]}let a=tX(o,n);if(tJ(a,tX(t,n)).forEach(([e,t],r)=>{if(e&&t){var i;let a={dropped:tQ(i=tX(o,n)[r],t,tj),added:tQ(t,i,tj)};(0!==a.added.length||0!==a.dropped.length)&&(tz.debug(`Detected visual changes on page: ${r}, current: ${tK(e)}, next: ${tK(t)}`,{changes:a}),a.added.length===a.dropped.length&&tJ(a.added,a.dropped).forEach(([e,t])=>{if(e&&t){var n;let r,i;r=tY(e,n=o),i=tY(t,n),n.splice(r,1,t),n.splice(i,1,e),o=n}else throw Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${t}`)}),0===a.added.length&&a.dropped.length>0&&a.dropped.forEach(e=>{var t;let n;n=tY(e,t=o),t.splice(n,1),o=t}),a.added.length>0&&0===a.dropped.length&&a.added.forEach(e=>{o=[...o,e]}))}}),o.length>t.length){let e=tQ(o,t,tj);o=o.filter(t=>!e.map(tj).includes(tj(t)))}return o}(p.current,v,t)}catch(e){tz.error("Error while running updatePages(): ",e)}return m?p.current=v:p.current=g,h.current=t,g}function nI(e=[f.Track.Source.Camera,f.Track.Source.Microphone,f.Track.Source.ScreenShare,f.Track.Source.ScreenShareAudio,f.Track.Source.Unknown],t={}){let n=nw(t.room),[r,i]=u.useState([]),[o,a]=u.useState([]),l=u.useMemo(()=>e.map(e=>tZ(e)?e.source:e),[JSON.stringify(e)]);return u.useEffect(()=>{var e,r,o;let c,s,u=(c=null!=(r=(e={additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).additionalRoomEvents)?r:tV,s=null==(o=e.onlySubscribed)||o,t5(n,...Array.from(new Set([f.RoomEvent.ParticipantConnected,f.RoomEvent.ParticipantDisconnected,f.RoomEvent.ConnectionStateChanged,f.RoomEvent.LocalTrackPublished,f.RoomEvent.LocalTrackUnpublished,f.RoomEvent.TrackPublished,f.RoomEvent.TrackUnpublished,f.RoomEvent.TrackSubscriptionStatusChanged,...c]).values())).pipe(tp(e=>{let t=nr(e,l,s);return tz.debug(`TrackReference[] was updated. (length ${t.trackReferences.length})`,t),t}),tx(nr(n,l,s)))).subscribe(({trackReferences:e,participants:t})=>{tz.debug("setting track bundles",e,t),i(e),a(t)});return()=>u.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),u.useMemo(()=>{if(!tB(e))return r;{let t=function(e,t){let n=new Map;if(tB(e)){let r=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),i=Array.from(function(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}(new Set(r),new Set(t)));i.length>0&&n.set(e.identity,i)})}return n}(e,o),n=Array.from(r);return o.forEach(e=>{t.has(e.identity)&&(t.get(e.identity)??[]).forEach(t=>{r.find(({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)||(tz.debug(`Add ${t} placeholder for participant ${e.identity}.`),n.push({participant:e,source:t}))})}),n}},[r,o,e])}let nD={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};t$.AgentState;var nj,nF,nV,nz={exports:{}};!function(){if(nV)return nz.exports;nV=1;var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}nz.exports=i,nz.exports.once=function(e,t){return new Promise(function(n,r){var i,o,a;function l(n){e.removeListener(t,c),r(n)}function c(){"function"==typeof e.removeListener&&e.removeListener("error",l),n([].slice.call(arguments))}h(e,t,c,{once:!0}),"error"!==t&&(i=e,o=l,a={once:!0},"function"==typeof i.on&&h(i,"error",o,a))})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),c=o[t]),void 0===c)c=o[t]=n,++e._eventsCount;else if("function"==typeof c?c=o[t]=r?[n,c]:[c,n]:r?c.unshift(n):c.push(n),(i=l(e))>0&&c.length>i&&!c.warned){c.warned=!0;var s=Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=c.length,console&&console.warn&&console.warn(s)}return e}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=s.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var a,l=Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else for(var s=c.length,u=p(c,s),r=0;r<s;++r)n(u[r],this,t);return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,o,l;if(a(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){l=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,l||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},nz.exports}();var nU=((r=nU||{}).CameraChanged="cameraChanged",r.MicrophoneChanged="microphoneChanged",r.StateChanged="stateChanged",r),n$=((i=n$||{}).ConnectionStateChanged="connectionStateChanged",i.MediaDevicesError="mediaDevicesError",i.EncryptionError="encryptionError",i),nW=((o=nW||{}).MessageReceived="messageReceived",o);let nH=u.forwardRef(function(e,t){let{mergedProps:n}=function({props:e}){let{dispatch:t,state:n}=ns().widget,{className:r}=u.useMemo(()=>({className:[tG("button"),tG("chat-toggle")].join(" ")}),[]);return{mergedProps:u.useMemo(()=>nS(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":null!=n&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}({props:e});return u.createElement("button",{ref:t,...n},e.children)}),nZ=u.forwardRef(function(e,t){let n,r,{buttonProps:i}=(r=nO(n=ny()),{buttonProps:u.useMemo(()=>{let{className:t,disconnect:i}={className:tG("disconnect-button"),disconnect:e=>{n.disconnect(e)}};return nS(e,{className:t,onClick:()=>i(e.stopTracks??!0),disabled:r===f.ConnectionState.Disconnected})},[n,e,r])});return u.createElement("button",{ref:t,...i},e.children)}),nB=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},u.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),u.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),nq=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},u.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),nJ=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 24 24",...e},u.createElement("path",{fill:"#FFF",d:"M4.99 3.99a1 1 0 0 0-.697 1.717L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 1 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 0 0-.727-1.717 1 1 0 0 0-.687.303L12 10.586 5.707 4.293a1 1 0 0 0-.717-.303z"})),nQ=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),nK=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),nY=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},u.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),nX=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M8.961.894C8.875-.298 7.125-.298 7.04.894c-.066.912-1.246 1.228-1.76.472-.67-.99-2.186-.115-1.664.96.399.824-.465 1.688-1.288 1.289-1.076-.522-1.95.994-.961 1.665.756.513.44 1.693-.472 1.759-1.192.086-1.192 1.836 0 1.922.912.066 1.228 1.246.472 1.76-.99.67-.115 2.186.96 1.664.824-.399 1.688.465 1.289 1.288-.522 1.076.994 1.95 1.665.961.513-.756 1.693-.44 1.759.472.086 1.192 1.836 1.192 1.922 0 .066-.912 1.246-1.228 1.76-.472.67.99 2.186.115 1.664-.96-.399-.824.465-1.688 1.288-1.289 1.076.522 1.95-.994.961-1.665-.756-.513-.44-1.693.472-1.759 1.192-.086 1.192-1.836 0-1.922-.912-.066-1.228-1.246-.472-1.76.99-.67.115-2.186-.96-1.664-.824.399-1.688-.465-1.289-1.288.522-1.076-.994-1.95-1.665-.961-.513.756-1.693.44-1.759-.472ZM8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10Z",clipRule:"evenodd"})),nG=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),n0=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),n5=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},u.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),u.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),n1=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},u.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),u.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),n2=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),n7=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("g",{opacity:.25},u.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),n6=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor",...e},u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("g",{opacity:.25},u.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),u.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),n4=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",...e},u.createElement("g",{opacity:.25},u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),u.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),n9=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),n3=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none",...e},u.createElement("g",{fill:"currentColor"},u.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),u.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),n8=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 8 0Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 12a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 8 12Z",clipRule:"evenodd",opacity:.7}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 1.072a.75.75 0 0 1 .274 1.024l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 12 1.072Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 11.464a.75.75 0 0 1 .274 1.025l-1.25 2.165a.75.75 0 0 1-1.299-.75l1.25-2.165A.75.75 0 0 1 6 11.464Z",clipRule:"evenodd",opacity:.6}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 4a.75.75 0 0 1-.274 1.025l-2.165 1.25a.75.75 0 1 1-.75-1.3l2.165-1.25A.75.75 0 0 1 14.928 4Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 10a.75.75 0 0 1-.275 1.024l-2.165 1.25a.75.75 0 0 1-.75-1.298l2.165-1.25A.75.75 0 0 1 4.536 10Z",clipRule:"evenodd",opacity:.5}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16 8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 16 8Z",clipRule:"evenodd"}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 8a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 8Z",clipRule:"evenodd",opacity:.4}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.928 12a.75.75 0 0 1-1.024.274l-2.165-1.25a.75.75 0 0 1 .75-1.299l2.165 1.25A.75.75 0 0 1 14.928 12Z",clipRule:"evenodd",opacity:.9}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.536 6a.75.75 0 0 1-1.025.275l-2.165-1.25a.75.75 0 1 1 .75-1.3l2.165 1.25A.75.75 0 0 1 4.536 6Z",clipRule:"evenodd",opacity:.3}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 14.928a.75.75 0 0 1-1.024-.274l-1.25-2.165a.75.75 0 0 1 1.298-.75l1.25 2.165A.75.75 0 0 1 12 14.928Z",clipRule:"evenodd",opacity:.8}),u.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M6 4.536a.75.75 0 0 1-1.024-.275l-1.25-2.165a.75.75 0 1 1 1.299-.75l1.25 2.165A.75.75 0 0 1 6 4.536Z",clipRule:"evenodd",opacity:.2})),re=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e},u.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},u.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),rt=u.forwardRef(function({trackRef:e,...t},n){let r=nf(),{mergedProps:i,inFocus:o}=function({trackRef:e,props:t}){let n=np(e),r=nu(),{className:i}=u.useMemo(()=>({className:[tG("button"),tG("focus-toggle-button")].join(" ")}),[]),o=u.useMemo(()=>tF(n,null==r?void 0:r.pin.state),[n,null==r?void 0:r.pin.state]);return{mergedProps:u.useMemo(()=>nS(t,{className:i,onClick:e=>{var i,a,l,c,s;null==(i=t.onClick)||i.call(t,e),o?null==(l=null==r?void 0:(a=r.pin).dispatch)||l.call(a,{msg:"clear_pin"}):null==(s=null==r?void 0:(c=r.pin).dispatch)||s.call(c,{msg:"set_pin",trackReference:n})}}),[t,i,n,o,null==r?void 0:r.pin]),inFocus:o}}({trackRef:e??r,props:t});return u.createElement(nc.Consumer,null,e=>void 0!==e&&u.createElement("button",{ref:n,...i},t.children?t.children:o?u.createElement(re,null):u.createElement(nY,null)))}),rn=u.forwardRef(function({kind:e,initialSelection:t,onActiveDeviceChange:n,onDeviceListChange:r,onDeviceSelectError:i,exactMatch:o,track:a,requestPermissions:l,onError:c,...s},d){let p=nb(),h=u.useRef("default"),m=u.useCallback(e=>{p&&p.emit(f.RoomEvent.MediaDevicesError,e),null==c||c(e)},[p,c]),{devices:v,activeDeviceId:g,setActiveMediaDevice:y,className:b}=function({kind:e,room:t,track:n,requestPermissions:r,onError:i}){let o=nb(),a=u.useMemo(()=>t??o??new f.Room,[t,o]),l=nA(u.useMemo(()=>(function(e,t,n=!0){return tv(new eW(r=>{f.Room.getLocalDevices(e,n).then(e=>{r.next(e),r.complete()}).catch(e=>{null==t||t(e),r.next([]),r.complete()})}),new eW(r=>{var i;let o=()=>t_(this,null,function*(){try{let t=yield f.Room.getLocalDevices(e,n);r.next(t)}catch(e){null==t||t(e)}});if("u">typeof window){if(!window.isSecureContext)throw Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(i=null==navigator?void 0:navigator.mediaDevices)||i.addEventListener("devicechange",o)}return()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",o)}}))})(e,i,r),[e,r,i]),[]),[c,s]=u.useState((null==a?void 0:a.getActiveDevice(e))??"default"),{className:d,activeDeviceObservable:p,setActiveMediaDevice:h}=u.useMemo(()=>(function(e,t,n){let r=new eY(void 0),i=t1(t,f.RoomEvent.ActiveDeviceChanged).pipe(tE(([t])=>t===e),tp(([e,t])=>(tz.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:t}),t))),o=(n,...i)=>t_(this,[n,...i],function*(n,i={}){var o,a,l;if(t){let c,s=(0,f.getBrowser)();if("audiooutput"===e&&((null==s?void 0:s.name)==="Safari"||(null==s?void 0:s.os)==="iOS"))return void tz.warn("Switching audio output device is not supported on Safari and iOS.");tz.debug(`Switching active device of kind "${e}" with id ${n}.`),yield t.switchActiveDevice(e,n,i.exact);let u=null!=(o=t.getActiveDevice(e))?o:n;u!==n&&"default"!==n&&tz.info(`We tried to select the device with id (${n}), but the browser decided to select the device with id (${u}) instead.`),"audioinput"===e?c=null==(a=t.localParticipant.getTrackPublication(f.Track.Source.Microphone))?void 0:a.track:"videoinput"===e&&(c=null==(l=t.localParticipant.getTrackPublication(f.Track.Source.Camera))?void 0:l.track);let d="default"===n&&!c||"default"===n&&(null==c?void 0:c.mediaStreamTrack.label.startsWith("Default"));r.next(d?n:u)}});return{className:tG("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}})(e,a),[e,a,n]);return u.useEffect(()=>{let e=p.subscribe(e=>{e&&(tz.info("setCurrentDeviceId",e),s(e))});return()=>{null==e||e.unsubscribe()}},[p]),{devices:l,className:d,activeDeviceId:c,setActiveMediaDevice:h}}({kind:e,room:p,track:a,requestPermissions:l,onError:m});u.useEffect(()=>{void 0!==t&&y(t)},[y]),u.useEffect(()=>{"function"==typeof r&&r(v)},[r,v]),u.useEffect(()=>{g!==h.current&&(null==n||n(g)),h.current=g},[g]);let w=async e=>{try{await y(e,{exact:o??!0})}catch(e){if(e instanceof Error)null==i||i(e);else throw e}},E=u.useMemo(()=>nC(s,{className:b},{className:"lk-list"}),[b,s]),k=!!v.find(e=>e.label.toLowerCase().startsWith("default"));function S(e,t,n){return e===t||!k&&0===n&&"default"===t}return u.createElement("ul",{ref:d,...E},v.map((e,t)=>u.createElement("li",{key:e.deviceId,id:e.deviceId,"data-lk-active":S(e.deviceId,g,t),"aria-selected":S(e.deviceId,g,t),role:"option"},u.createElement("button",{className:"lk-button",onClick:()=>w(e.deviceId)},e.label))))}),rr=u.forwardRef(function({label:e,...t},n){let r=ny(),{mergedProps:i,canPlayAudio:o}=function({room:e,props:t}){let n=nw(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=u.useMemo(()=>(function(){let e=e=>t_(this,null,function*(){tz.info("Start Audio for room: ",e),yield e.startAudio()});return{className:tG("start-audio-button"),roomAudioPlaybackAllowedObservable:t2,handleStartAudioPlayback:e}})(),[]),{canPlayAudio:a}=nA(u.useMemo(()=>i(n),[n,i]),{canPlayAudio:n.canPlaybackAudio});return{mergedProps:u.useMemo(()=>nS(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayAudio:a}}({room:r,props:t}),{mergedProps:a,canPlayVideo:l}=function({room:e,props:t}){let n=nw(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=u.useMemo(()=>(function(){let e=e=>t_(this,null,function*(){tz.info("Start Video for room: ",e),yield e.startVideo()});return{className:tG("start-audio-button"),roomVideoPlaybackAllowedObservable:t7,handleStartVideoPlayback:e}})(),[]),{canPlayVideo:a}=nA(u.useMemo(()=>i(n),[n,i]),{canPlayVideo:n.canPlaybackVideo});return{mergedProps:u.useMemo(()=>nS(t,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[t,r,a,o,n]),canPlayVideo:a}}({room:r,props:i}),{style:c,...s}=a;return c.display=o&&l?"none":"block",u.createElement("button",{ref:n,style:c,...s},e??`Start ${o?"Video":"Audio"}`)});function ri(e,t){switch(e){case f.Track.Source.Microphone:return t?u.createElement(n1,null):u.createElement(n5,null);case f.Track.Source.Camera:return t?u.createElement(nq,null):u.createElement(nB,null);case f.Track.Source.ScreenShare:return t?u.createElement(n3,null):u.createElement(n9,null);default:return}}let ro=u.forwardRef(function({showIcon:e,...t},n){let{buttonProps:r,enabled:i}=function({source:e,onChange:t,initialState:n,captureOptions:r,publishOptions:i,onDeviceError:o,room:a,...l}){var c;let s=nb(),d=u.useMemo(()=>a??s,[a,s]),p=null==(c=null==d?void 0:d.localParticipant)?void 0:c.getTrackPublication(e),h=u.useRef(!1),{toggle:m,className:v,pendingObserver:g,enabledObserver:y}=u.useMemo(()=>d?function(e,t,n,r,i){let{localParticipant:o}=t,a=(e,t)=>{let n=!1;switch(e){case f.Track.Source.Camera:n=t.isCameraEnabled;break;case f.Track.Source.Microphone:n=t.isMicrophoneEnabled;break;case f.Track.Source.ScreenShare:n=t.isScreenShareEnabled}return n},l=t4(o).pipe(tp(t=>a(e,t.participant)),tx(a(e,o))),c=new eQ,s=(t,a)=>t_(this,null,function*(){try{switch(a??(a=n),c.next(!0),e){case f.Track.Source.Camera:return yield o.setCameraEnabled(t??!o.isCameraEnabled,a,r),o.isCameraEnabled;case f.Track.Source.Microphone:return yield o.setMicrophoneEnabled(t??!o.isMicrophoneEnabled,a,r),o.isMicrophoneEnabled;case f.Track.Source.ScreenShare:return yield o.setScreenShareEnabled(t??!o.isScreenShareEnabled,a,r),o.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(e){if(i&&e instanceof Error){null==i||i(e);return}throw e}finally{c.next(!1)}});return{className:tG("button"),toggle:s,enabledObserver:l,pendingObserver:c.asObservable()}}(e,d,r,i,o):function(){let e=!1,t=new eQ,n=new eQ,r=r=>t_(this,null,function*(){n.next(!0),e=r??!e,t.next(e),n.next(!1)});return{className:tG("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}(),[d,e,JSON.stringify(r),i]),b=nA(g,!1),w=nA(y,n??!!(null!=p&&p.isEnabled));u.useEffect(()=>{null==t||t(w,h.current),h.current=!1},[w,t]),u.useEffect(()=>{void 0!==n&&(tz.debug("forcing initial toggle state",e,n),m(n))},[]);let E=u.useMemo(()=>nS(l,{className:v}),[l,v]),k=u.useCallback(e=>{var t;h.current=!0,m().catch(()=>h.current=!1),null==(t=l.onClick)||t.call(l,e)},[l,m]);return{toggle:m,enabled:w,pending:b,track:p,buttonProps:{...E,"aria-pressed":w,"data-lk-source":e,"data-lk-enabled":w,disabled:b,onClick:k}}}(t),[o,a]=u.useState(!1);return u.useEffect(()=>{a(!0)},[]),o&&u.createElement("button",{ref:n,...r},(e??!0)&&ri(t.source,i),t.children)}),ra=u.forwardRef(function(e,t){let{className:n,quality:r}=function(e={}){let t=nv(e.participant),{className:n,connectionQualityObserver:r}=u.useMemo(()=>({className:tG("connection-quality"),connectionQualityObserver:t9(t,f.ParticipantEvent.ConnectionQualityChanged).pipe(tp(([e])=>e),tx(t.connectionQuality))}),[t]);return{className:n,quality:nA(r,t.connectionQuality)}}(e),i=u.useMemo(()=>({...nC(e,{className:n}),"data-lk-quality":r}),[r,e,n]);return u.createElement("div",{ref:t,...i},e.children??function(e){switch(e){case f.ConnectionQuality.Excellent:return u.createElement(n2,null);case f.ConnectionQuality.Good:return u.createElement(n7,null);case f.ConnectionQuality.Poor:return u.createElement(n6,null);default:return u.createElement(n4,null)}}(r))}),rl=u.forwardRef(function({participant:e,...t},n){let r=nv(e),{className:i,infoObserver:o}=u.useMemo(()=>({className:"lk-participant-name",infoObserver:r?t6(r,f.ParticipantEvent.ParticipantMetadataChanged,f.ParticipantEvent.ParticipantNameChanged).pipe(tp(({name:e,identity:t,metadata:n})=>({name:e,identity:t,metadata:n})),tx({name:r.name,identity:r.identity,metadata:r.metadata})):void 0}),[r]),{identity:a,name:l}=nA(o,{name:r.name,identity:r.identity,metadata:r.metadata}),c=u.useMemo(()=>nC(t,{className:i,"data-lk-participant-name":l}),[t,i,l]);return u.createElement("span",{ref:n,...c},""!==l?l:a,t.children)}),rc=u.forwardRef(function({trackRef:e,show:t="always",...n},r){let{className:i,isMuted:o}=function(e){var t,n;let r=np(e),{className:i,mediaMutedObserver:o}=u.useMemo(()=>(function(e){let t="track-muted-indicator-camera";switch(e.source){case f.Track.Source.Camera:t="track-muted-indicator-camera";break;case f.Track.Source.Microphone:t="track-muted-indicator-microphone"}return{className:tG(t),mediaMutedObserver:t3(e)}})(r),[tj(r)]);return{isMuted:nA(o,!!(null!=(t=r.publication)&&t.isMuted||null!=(n=r.participant.getTrackPublication(r.source))&&n.isMuted)),className:i}}(e),a="always"===t||"muted"===t&&o||"unmuted"===t&&!o,l=u.useMemo(()=>nC(n,{className:i}),[i,n]);return a?u.createElement("div",{ref:r,...l,"data-lk-muted":o},n.children??ri(e.source,!o)):null}),rs=e=>u.createElement("svg",{width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),u.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function ru(e,t={}){let[n,r]=u.useState(t0(e)),[i,o]=u.useState(null==n?void 0:n.isMuted),[a,l]=u.useState(null==n?void 0:n.isSubscribed),[c,s]=u.useState(null==n?void 0:n.track),[d,p]=u.useState("landscape"),h=u.useRef(),{className:m,trackObserver:v}=u.useMemo(()=>{let t,n;return t=t0(e),n=t4(e.participant).pipe(tp(()=>t0(e)),tx(t)),{className:tG(e.source===f.Track.Source.Camera||e.source===f.Track.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}},[e.participant.sid??e.participant.identity,e.source,tI(e)&&e.publication.trackSid]);return u.useEffect(()=>{let e=v.subscribe(e=>{tz.debug("update track",e),r(e),o(null==e?void 0:e.isMuted),l(null==e?void 0:e.isSubscribed),s(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[v]),u.useEffect(()=>{var n,r;return c&&(h.current&&c.detach(h.current),null!=(n=t.element)&&n.current&&!(e.participant.isLocal&&(null==c?void 0:c.kind)==="audio")&&c.attach(t.element.current)),h.current=null==(r=t.element)?void 0:r.current,()=>{h.current&&(null==c||c.detach(h.current))}},[c,t.element]),u.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==n?void 0:n.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==n?void 0:n.dimensions)?void 0:t.height)&&p(n.dimensions.width>n.dimensions.height?"landscape":"portrait")},[n]),{publication:n,isMuted:i,isSubscribed:a,track:c,elementProps:nC(t.props,{className:m,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==n?void 0:n.source,...(null==n?void 0:n.kind)==="video"&&{"data-lk-orientation":d}})}}let rd=ep(function(){if(l)return a;l=1;var e=NaN,t=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt,c="object"==typeof ef&&ef&&ef.Object===Object&&ef,s="object"==typeof self&&self&&self.Object===Object&&self,u=c||s||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,h=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(a){if("number"==typeof a)return a;if("symbol"==typeof(l=a)||l&&"object"==typeof l&&"[object Symbol]"==d.call(l))return e;if(m(a)){var l,c="function"==typeof a.valueOf?a.valueOf():a;a=m(c)?c+"":c}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(t,"");var s=r.test(a);return s||i.test(a)?o(a.slice(2),s?2:8):n.test(a)?e:+a}return a=function(e,t,n){var r,i,o,a,l,c,s=0,u=!1,d=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function y(t){var n=r,o=i;return r=i=void 0,s=t,a=e.apply(o,n)}function b(e){var n=e-c,r=e-s;return void 0===c||n>=t||n<0||d&&r>=o}function w(){var e,n,r,i=h();if(b(i))return E(i);l=setTimeout(w,(e=i-c,n=i-s,r=t-e,d?p(r,o-n):r))}function E(e){return l=void 0,g&&r?y(e):(r=i=void 0,a)}function k(){var e,n=h(),o=b(n);if(r=arguments,i=this,c=n,o){if(void 0===l)return s=e=c,l=setTimeout(w,t),u?y(e):a;if(d)return l=setTimeout(w,t),y(c)}return void 0===l&&(l=setTimeout(w,t)),a}return t=v(t)||0,m(n)&&(u=!!n.leading,o=(d="maxWait"in n)?f(v(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==l&&clearTimeout(l),s=0,r=c=i=l=void 0},k.flush=function(){return void 0===l?a:E(h())},k}}()),rf=u.forwardRef(function({onTrackClick:e,onClick:t,onSubscriptionStatusChanged:n,trackRef:r,manageSubscription:i,...o},a){let l=np(r),c=u.useRef(null);u.useImperativeHandle(a,()=>c.current);let s=function({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:i=!1,onChange:o}={}){var a;let[l,c]=(0,u.useState)(null),[s,d]=(0,u.useState)(()=>({isIntersecting:i,entry:void 0})),f=(0,u.useRef)();f.current=o;let p=(null==(a=s.entry)?void 0:a.isIntersecting)&&r;(0,u.useEffect)(()=>{if(!l||!("IntersectionObserver"in window)||p)return;let r=new IntersectionObserver(e=>{let t=Array.isArray(r.thresholds)?r.thresholds:[r.thresholds];e.forEach(e=>{let n=e.isIntersecting&&t.some(t=>e.intersectionRatio>=t);d({isIntersecting:n,entry:e}),f.current&&f.current(n,e)})},{threshold:e,root:t,rootMargin:n});return r.observe(l),()=>{r.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);let h=(0,u.useRef)(null);(0,u.useEffect)(()=>{var e;l||null==(e=s.entry)||!e.target||r||p||h.current===s.entry.target||(h.current=s.entry.target,d({isIntersecting:i,entry:void 0}))},[l,s.entry,r,p,i]);let m=[c,!!s.isIntersecting,s.entry];return m.ref=m[0],m.isIntersecting=m[1],m.entry=m[2],m}({root:c.current}),[d]=function(e,t,n){let r=e instanceof Function?e():e,[i,o]=(0,u.useState)(r),a=(0,u.useRef)(r),l=function(e,t=500,n){var r;let i,o=(0,u.useRef)();r=()=>{o.current&&o.current.cancel()},(i=(0,u.useRef)(r)).current=r,(0,u.useEffect)(()=>()=>{i.current()},[]);let a=(0,u.useMemo)(()=>{let r=rd(e,t,n),i=(...e)=>r(...e);return i.cancel=()=>{r.cancel()},i.isPending=()=>!!o.current,i.flush=()=>r.flush(),i},[e,t,n]);return(0,u.useEffect)(()=>{o.current=rd(e,t,n)},[e,t,n]),a}(o,3e3,void 0);return a.current===r||(l(r),a.current=r),[i,l]}(s,0);u.useEffect(()=>{i&&l.publication instanceof f.RemoteTrackPublication&&(null==d?void 0:d.isIntersecting)===!1&&(null==s?void 0:s.isIntersecting)===!1&&l.publication.setSubscribed(!1)},[d,l,i]),u.useEffect(()=>{i&&l.publication instanceof f.RemoteTrackPublication&&(null==s?void 0:s.isIntersecting)===!0&&l.publication.setSubscribed(!0)},[s,l,i]);let{elementProps:p,publication:h,isSubscribed:m}=ru(l,{element:c,props:o});return u.useEffect(()=>{null==n||n(!!m)},[m,n]),u.createElement("video",{ref:c,...p,muted:!0,onClick:n=>{null==t||t(n),null==e||e({participant:null==l?void 0:l.participant,track:h})}})}),rp=u.forwardRef(function({trackRef:e,onSubscriptionStatusChanged:t,volume:n,...r},i){let o=np(e),a=u.useRef(null);u.useImperativeHandle(i,()=>a.current);let{elementProps:l,isSubscribed:c,track:s,publication:d}=ru(o,{element:a,props:r});return u.useEffect(()=>{null==t||t(!!c)},[c,t]),u.useEffect(()=>{void 0===s||void 0===n||(s instanceof f.RemoteAudioTrack?s.setVolume(n):tz.warn("Volume can only be set on remote audio tracks."))},[n,s]),u.useEffect(()=>{void 0===d||void 0===r.muted||(d instanceof f.RemoteTrackPublication?d.setEnabled(!r.muted):tz.warn("Can only call setEnabled on remote track publications."))},[r.muted,d,s]),u.createElement("audio",{ref:a,...l})});function rh(e){let t=!!nm();return e.participant&&!t?u.createElement(nh.Provider,{value:e.participant},e.children):u.createElement(u.Fragment,null,e.children)}function rm(e){let t=!!nf();return e.trackRef&&!t?u.createElement(nd.Provider,{value:e.trackRef},e.children):u.createElement(u.Fragment,null,e.children)}let rv=u.forwardRef(function({trackRef:e,children:t,onParticipantClick:n,disableSpeakingIndicator:r,...i},o){var a,l;let c=np(e),{elementProps:s}=function({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){let i,o=np(e),a=u.useMemo(()=>{let{className:e}={className:tG("participant-tile")};return nS(r,{className:e,onClick:e=>{var n;if(null==(n=r.onClick)||n.call(r,e),"function"==typeof t){let e=o.publication??o.participant.getTrackPublication(o.source);t({participant:o.participant,track:e})}}})},[r,t,o.publication,o.source,o.participant]),l=o.participant.getTrackPublication(f.Track.Source.Microphone),c=u.useMemo(()=>({participant:o.participant,source:f.Track.Source.Microphone,publication:l}),[l,o.participant]),s=nN(o),d=nN(c),p=(i=nv(o.participant),nA(u.useMemo(()=>t9(i,f.ParticipantEvent.IsSpeakingChanged).pipe(tp(([e])=>e)),[i]),i.isSpeaking)),h=function(e){if(e.publication instanceof f.LocalTrackPublication){let t=e.publication.track;if(t){let{facingMode:e}=(0,f.facingModeFromLocalTrack)(t);return e}}return"undefined"}(o);return{elementProps:{"data-lk-audio-muted":d,"data-lk-video-muted":s,"data-lk-speaking":!0!==n&&p,"data-lk-local-participant":o.participant.isLocal,"data-lk-source":o.source,"data-lk-facing-mode":h,...a}}}({htmlProps:i,disableSpeakingIndicator:r,onParticipantClick:n,trackRef:c}),d=function(e,t={}){let n=nv(e),r=nw(t.room);return nA(u.useMemo(()=>t1(r,f.RoomEvent.ParticipantEncryptionStatusChanged).pipe(tE(([,e])=>(null==n?void 0:n.identity)===(null==e?void 0:e.identity)||!e&&(null==n?void 0:n.identity)===r.localParticipant.identity),tp(([e])=>e),tx(null!=n&&n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))),[r,n]),n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted))}(c.participant),p=nu(),h=null==(a=u.useContext(nE))?void 0:a.autoSubscription,m=u.useCallback(e=>{c.source&&!e&&p&&p.pin.dispatch&&tF(c,p.pin.state)&&p.pin.dispatch({msg:"clear_pin"})},[c,p]);return u.createElement("div",{ref:o,style:{position:"relative"},...s},u.createElement(rm,{trackRef:c},u.createElement(rh,{participant:c.participant},t??u.createElement(u.Fragment,null,tI(c)&&((null==(l=c.publication)?void 0:l.kind)==="video"||c.source===f.Track.Source.Camera||c.source===f.Track.Source.ScreenShare)?u.createElement(rf,{trackRef:c,onSubscriptionStatusChanged:m,manageSubscription:h}):tI(c)&&u.createElement(rp,{trackRef:c,onSubscriptionStatusChanged:m}),u.createElement("div",{className:"lk-participant-placeholder"},u.createElement(rs,null)),u.createElement("div",{className:"lk-participant-metadata"},u.createElement("div",{className:"lk-participant-metadata-item"},c.source===f.Track.Source.Camera?u.createElement(u.Fragment,null,d&&u.createElement(n0,{style:{marginRight:"0.25rem"}}),u.createElement(rc,{trackRef:{participant:c.participant,source:f.Track.Source.Microphone},show:"muted"}),u.createElement(rl,null)):u.createElement(u.Fragment,null,u.createElement(n9,{style:{marginRight:"0.25rem"}}),u.createElement(rl,null,"'s screen"))),u.createElement(ra,{className:"lk-participant-metadata-item"}))),u.createElement(rt,{trackRef:c}))))});function rg(e){let t=nC(e,{className:"lk-focus-layout"});return u.createElement("div",{...t},e.children)}function ry({trackRef:e,...t}){return u.createElement(rv,{trackRef:e,...t})}function rb({tracks:e,...t}){return u.createElement(u.Fragment,null,e.map(e=>u.createElement(nd.Provider,{value:e,key:tj(e)},nP(t.children))))}function rw({totalPageCount:e,nextPage:t,prevPage:n,currentPage:r,pagesContainer:i}){let[o,a]=u.useState(!1);return u.useEffect(()=>{let e;return i&&(e=(function(e,t=1e3){var n,r;if(null===e)return tu(!1);let i=(function e(t,n,r,i){if(eC(r)&&(i=r,r=void 0),i){return e(t,n,r).pipe((o=i,tp(function(e){return th(e)?o.apply(void 0,eS([],ek(e))):o(e)})))}var o,a,l,c,s=ek(eC((a=t).addEventListener)&&eC(a.removeEventListener)?ty.map(function(e){return function(i){return t[e](n,i,r)}}):eC((l=t).addListener)&&eC(l.removeListener)?tg.map(tw(t,n)):eC((c=t).on)&&eC(c.off)?tb.map(tw(t,n)):[],2),u=s[0],d=s[1];if(!u&&e6(t))return tm(function(t){return e(t,n,r)})(tr(t));if(!u)throw TypeError("Invalid event target");return new eW(function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return u(t),function(){return d(t)}})})(e,"mousemove",{passive:!0}).pipe(tp(()=>!0)),o=i.pipe(function(e,t){var n=e instanceof Date&&!isNaN(e)?{first:e}:"number"==typeof e?{each:e}:e,r=n.first,i=n.each,o=n.with,a=void 0===o?tf:o,l=n.scheduler,c=void 0===l?e2:l,s=n.meta,u=void 0===s?null:s;if(null==r&&null==i)throw TypeError("No timeout provided.");return eZ(function(e,t){var n,o,l=null,s=0,d=function(e){o=to(t,c,function(){try{n.unsubscribe(),tr(a({meta:u,lastValue:l,seen:s})).subscribe(t)}catch(e){t.error(e)}},e)};n=e.subscribe(eB(t,function(e){null==o||o.unsubscribe(),s++,t.next(l=e),i>0&&d(i)},void 0,void 0,function(){null!=o&&o.closed||null==o||o.unsubscribe(),l=null})),s||d(null!=r?"number"==typeof r?r:r-c.now():i)})}({each:t,with:()=>tv(tu(!1),o.pipe(eZ(function(e,t){var n=!1,r=eB(t,function(){null==r||r.unsubscribe(),n=!0},eD);tr(i).subscribe(r),e.subscribe(eB(t,function(e){return n&&t.next(e)}))})))}),(void 0===r&&(r=e$),n=n??tk,eZ(function(e,t){var i,o=!0;e.subscribe(eB(t,function(e){var a=r(e);(o||!n(i,a))&&(o=!1,i=a,t.next(e))}))})));return o})(i.current,2e3).subscribe(a)),()=>{e&&e.unsubscribe()}},[i]),u.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":o},u.createElement("button",{className:"lk-button",onClick:n},u.createElement(nK,null)),u.createElement("span",{className:"lk-pagination-count"},`${r} of ${e}`),u.createElement("button",{className:"lk-button",onClick:t},u.createElement(nK,null)))}let rE=u.forwardRef(function({totalPageCount:e,currentPage:t},n){let r=Array(e).fill("").map((e,n)=>n+1===t?u.createElement("span",{"data-lk-active":!0,key:n}):u.createElement("span",{key:n}));return u.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function rk({tracks:e,...t}){let n=u.createRef(),r=u.useMemo(()=>nC(t,{className:"lk-grid-layout"}),[t]),{layout:i}=function(e,t,n={}){let r=n.gridLayouts??tU,{width:i,height:o}=nL(e),a=function e(t,n,r,i){if(t.length<1)throw Error("At least one grid layout definition must be provided.");let o=[...t].map(e=>{var t,n;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:null!=(t=e.minWidth)?t:0,minHeight:null!=(n=e.minHeight)?n:0,orientation:e.orientation}}).sort((e,t)=>e.maxTiles!==t.maxTiles?e.maxTiles-t.maxTiles:0!==e.minWidth||0!==t.minWidth?e.minWidth-t.minWidth:0!==e.minHeight||0!==t.minHeight?e.minHeight-t.minHeight:0);if(r<=0||i<=0)return o[0];let a=0,l=r/i>1?"landscape":"portrait",c=o.find((e,t,r)=>{a=t;let i=-1!==r.findIndex((n,r)=>{let i=!n.orientation||n.orientation===l,o=n.maxTiles===e.maxTiles;return r>t&&o&&i});return e.maxTiles>=n&&!i});if(void 0===c)if(c=o[o.length-1])tz.warn(`No layout found for: participantCount: ${n}, width/height: ${r}/${i} fallback to biggest available layout (${c}).`);else throw Error("No layout or fallback layout found.");if((r<c.minWidth||i<c.minHeight)&&a>0){let t=o[a-1];c=e(o.slice(0,a),t.maxTiles,r,i)}return c}(r,t,i,o);return u.useEffect(()=>{e.current&&a&&(e.current.style.setProperty("--lk-col-count",null==a?void 0:a.columns.toString()),e.current.style.setProperty("--lk-row-count",null==a?void 0:a.rows.toString()))},[e,a]),{layout:a,containerWidth:i,containerHeight:o}}(n,e.length),o=function(e,t){let[n,r]=u.useState(1),i=Math.max(Math.ceil(t.length/e),1);n>i&&r(i);let o=n*e,a=o-e,l=e=>{r(t=>"next"===e?t===i?t:t+1:1===t?t:t-1)},c=n_(t,e).slice(a,o);return{totalPageCount:i,nextPage:()=>l("next"),prevPage:()=>l("previous"),setPage:e=>{e>i?r(i):e<1?r(1):r(e)},firstItemIndex:a,lastItemIndex:o,tracks:c,currentPage:n}}(i.maxTiles,e);return function(e,t={}){let n=u.useRef(null),r=u.useRef(null),i=t.minSwipeDistance??50,o=e=>{r.current=null,n.current=e.targetTouches[0].clientX},a=e=>{r.current=e.targetTouches[0].clientX},l=u.useCallback(()=>{if(!n.current||!r.current)return;let e=n.current-r.current,o=e>i,a=e<-i;o&&t.onLeftSwipe&&t.onLeftSwipe(),a&&t.onRightSwipe&&t.onRightSwipe()},[i,t]);u.useEffect(()=>{let t=e.current;return t&&(t.addEventListener("touchstart",o,{passive:!0}),t.addEventListener("touchmove",a,{passive:!0}),t.addEventListener("touchend",l,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",o),t.removeEventListener("touchmove",a),t.removeEventListener("touchend",l))}},[e,l])}(n,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),u.createElement("div",{ref:n,"data-lk-pagination":o.totalPageCount>1,...r},u.createElement(rb,{tracks:o.tracks},t.children),e.length>i.maxTiles&&u.createElement(u.Fragment,null,u.createElement(rE,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),u.createElement(rw,{pagesContainer:n,...o})))}let rS=-(-.6000000000000001*1);function rx({tracks:e,orientation:t,...n}){let r,i,o,a,l=u.useRef(null),[c,s]=u.useState(0),{width:d,height:f}=nL(l),p=t||(f>=d?"vertical":"horizontal"),h="vertical"===p?Math.max(d*rS,130):Math.max(1.6*f,140),m=((r=document.createElement("p")).style.width="100%",r.style.height="200px",(i=document.createElement("div")).style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.visibility="hidden",i.style.width="200px",i.style.height="150px",i.style.overflow="hidden",i.appendChild(r),document.body.appendChild(i),o=r.offsetWidth,i.style.overflow="scroll",o===(a=r.offsetWidth)&&(a=i.clientWidth),document.body.removeChild(i),o-a),v=Math.max("vertical"===p?(f-m)/h:(d-m)/h,1),g=Math.round(v);.5>Math.abs(v-c)?g=Math.round(c):c!==v&&s(v);let y=n_(e,g);return u.useLayoutEffect(()=>{l.current&&(l.current.dataset.lkOrientation=p,l.current.style.setProperty("--lk-max-visible-tiles",g.toString()))},[g,p]),u.createElement("aside",{key:p,className:"lk-carousel",ref:l,...n},u.createElement(rb,{tracks:y},n.children))}function rC({value:e,onPinChange:t,onWidgetChange:n,children:r}){let i=function(e){let[t,n]=u.useReducer(nl,tW),[r,i]=u.useReducer(na,tH);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}(e);return u.useEffect(()=>{tz.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),u.useEffect(()=>{tz.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),u.createElement(nc.Provider,{value:i},r)}function rP({room:e,volume:t,muted:n}){let r=nI([f.Track.Source.Microphone,f.Track.Source.ScreenShareAudio,f.Track.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0,room:e}).filter(e=>!e.participant.isLocal&&e.publication.kind===f.Track.Kind.Audio);return u.createElement("div",{style:{display:"none"}},r.map(e=>u.createElement(rp,{key:tj(e),trackRef:e,volume:t,muted:n})))}function rR(e){let t=u.useMemo(()=>nC(e,{className:"lk-toast"}),[e]);return u.createElement("div",{...t},e.children)}let rT=e=>[[Math.floor(e/2)],[-1]],rM=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]);function rL(e){let[t,n]=u.useState(void 0),r=nO(e.room);return u.useEffect(()=>{switch(r){case f.ConnectionState.Reconnecting:n(u.createElement(u.Fragment,null,u.createElement(n8,{className:"lk-spinner"})," Reconnecting"));break;case f.ConnectionState.Connecting:n(u.createElement(u.Fragment,null,u.createElement(n8,{className:"lk-spinner"})," Connecting"));break;case f.ConnectionState.Disconnected:n(u.createElement(u.Fragment,null,"Disconnected"));break;default:n(void 0)}},[r]),t?u.createElement(rR,{className:"lk-toast-connection-state"},t):u.createElement(u.Fragment,null)}let rA=u.forwardRef(function({entry:e,hideName:t=!1,hideTimestamp:n=!1,messageFormatter:r,...i},o){var a,l,c,s;let d=u.useMemo(()=>r?r(e.message):e.message,[e.message,r]),f=!!e.editTimestamp,p=new Date(e.timestamp),h="u">typeof navigator?navigator.language:"en-US",m=(null==(a=e.from)?void 0:a.name)??(null==(l=e.from)?void 0:l.identity);return u.createElement("li",{ref:o,className:"lk-chat-entry",title:p.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":null!=(c=e.from)&&c.isLocal?"local":"remote",...i},(!n||!t||f)&&u.createElement("span",{className:"lk-meta-data"},!t&&u.createElement("strong",{className:"lk-participant-name"},m),(!n||f)&&u.createElement("span",{className:"lk-timestamp"},f&&"edited ",p.toLocaleTimeString(h,{timeStyle:"short"}))),u.createElement("span",{className:"lk-message-body"},d),u.createElement("span",{className:"lk-message-attachements"},null==(s=e.attachedFiles)?void 0:s.map(e=>e.type.startsWith("image/")&&u.createElement("img",{style:{maxWidth:"300px",maxHeight:"300px"},key:e.name,src:URL.createObjectURL(e),alt:e.name}))))});function rO({messageFormatter:e,messageDecoder:t,messageEncoder:n,channelTopic:r,...i}){var o;let a,l,c,s,d,p,h=u.useRef(null),m=u.useRef(null),{chatMessages:v,send:g,isSending:y}=(l=nO(a=nw(null==(o=u.useMemo(()=>({messageDecoder:t,messageEncoder:n,channelTopic:r}),[t,n,r]))?void 0:o.room)),c=u.useMemo(()=>l===f.ConnectionState.Disconnected,[l]),d=nA((s=u.useMemo(()=>(function(e,t){var n,r,i,o,a,l;let c=new eQ,s=null!=(n=null==t?void 0:t.channelTopic)?n:"lk.chat",u=null!=(r=null==t?void 0:t.channelTopic)?r:"lk-chat-topic",d=!1;ne.has(e)||(d=!0);let p=null!=(i=ne.get(e))?i:new Map,h=null!=(o=p.get(s))?o:new eQ;p.set(s,h),ne.set(e,p);let m=null!=(a=null==t?void 0:t.messageDecoder)?a:nt;if(d){e.registerTextStreamHandler(s,(t,n)=>t_(this,null,function*(){let{id:r,timestamp:i}=t.info;ts(t).pipe(tS((e,t)=>e+t),tp(t=>({id:r,timestamp:i,message:t,from:e.getParticipantByIdentity(n.identity),type:"chatMessage"}))).subscribe({next:e=>h.next(e)})}));let{messageObservable:t}=function(e,t,n){let r,i=Array.isArray(t)?t:[t];return{messageObservable:t1(e,f.RoomEvent.DataReceived).pipe(tE(([,,,e])=>void 0===t||void 0!==e&&i.includes(e)),tp(([e,t,,n])=>({payload:e,topic:n,from:t}))),isSendingObservable:new eW(e=>{r=e}),send:(t,...n)=>t_(this,[t,...n],function*(t,n={}){r.next(!0);try{yield t8(e.localParticipant,t,tN({topic:i[0]},n))}finally{r.next(!1)}})}}(e,[u]);t.pipe(tp(e=>{let t=m(e.payload);return!0==t.ignoreLegacy?void 0:tR(tN({},t),tT({type:"chatMessage",from:e.from}))}),tE(e=>!!e),tC(c)).subscribe(h)}let v=h.pipe(tS((e,t)=>{if("id"in t&&e.find(e=>{var n,r;return(null==(n=e.from)?void 0:n.identity)===(null==(r=t.from)?void 0:r.identity)&&e.id===t.id})){let n=e.findIndex(e=>e.id===t.id);if(n>-1){let r=e[n];e[n]=tR(tN({},t),tT({timestamp:r.timestamp,editTimestamp:t.timestamp}))}return[...e]}return[...e,t]},[]),tC(c)),g=new eY(!1),y=null!=(l=null==t?void 0:t.messageEncoder)?l:nn,b=(t,n)=>t_(this,null,function*(){var r,i,o;n||(n={}),null!=n.topic||(n.topic=s),g.next(!0);try{let a,l,c,s,d,p,m={id:(yield e.localParticipant.sendText(t,n)).id,timestamp:Date.now(),message:t},v=(a=tN({},m),l={attachedFiles:n.attachments},tR(a,tT(l))),g=(c=tN({},v),s={type:"chatMessage",from:e.localParticipant,attributes:n.attributes},tR(c,tT(s)));h.next(g);let b=y((d=tN({},m),p={ignoreLegacy:(null==(r=e.serverInfo)?void 0:r.edition)===1||!!(null!=(i=e.serverInfo)&&i.version)&&(0,f.compareVersions)(null==(o=e.serverInfo)?void 0:o.version,"1.8.2")>0},tR(d,tT(p))));try{yield t8(e.localParticipant,b,{reliable:!0,topic:u})}catch(e){tz.info("could not send message in legacy chat format",e)}return g}finally{g.next(!1)}});return e.once(f.RoomEvent.Disconnected,function(){c.next(),c.complete(),h.complete(),ne.delete(e),e.unregisterTextStreamHandler(s)}),{messageObservable:v,isSendingObservable:g,send:b}})(a,o),[a,o,c])).isSendingObservable,!1),p=nA(s.messageObservable,[]),{send:s.send,chatMessages:p,isSending:d}),b=nu(),w=u.useRef(0);async function E(e){e.preventDefault(),m.current&&""!==m.current.value.trim()&&(await g(m.current.value),m.current.value="",m.current.focus())}return u.useEffect(()=>{var e;h&&(null==(e=h.current)||e.scrollTo({top:h.current.scrollHeight}))},[h,v]),u.useEffect(()=>{var e,t,n,r,i;if(!b||0===v.length)return;if(null!=(e=b.widget.state)&&e.showChat&&v.length>0&&w.current!==(null==(t=v[v.length-1])?void 0:t.timestamp)){w.current=null==(n=v[v.length-1])?void 0:n.timestamp;return}let o=v.filter(e=>!w.current||e.timestamp>w.current).length,{widget:a}=b;o>0&&(null==(r=a.state)?void 0:r.unreadMessages)!==o&&(null==(i=a.dispatch)||i.call(a,{msg:"unread_msg",count:o}))},[v,null==b?void 0:b.widget]),u.createElement("div",{...i,className:"lk-chat"},u.createElement("div",{className:"lk-chat-header"},"Messages",b&&u.createElement(nH,{className:"lk-close-button"},u.createElement(nJ,null))),u.createElement("ul",{className:"lk-list lk-chat-messages",ref:h},i.children?v.map((t,n)=>nP(i.children,{entry:t,key:t.id??n,messageFormatter:e})):v.map((t,n,r)=>{let i=n>=1&&r[n-1].from===t.from,o=n>=1&&t.timestamp-r[n-1].timestamp<6e4;return u.createElement(rA,{key:t.id??n,hideName:i,hideTimestamp:!1!==i&&o,entry:t,messageFormatter:e})})),u.createElement("form",{className:"lk-chat-form",onSubmit:E},u.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:y,ref:m,type:"text",placeholder:"Enter a message...",onInput:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),onKeyUp:e=>e.stopPropagation()}),u.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:y},"Send")))}function rN({kind:e,initialSelection:t,onActiveDeviceChange:n,tracks:r,requestPermissions:i=!1,...o}){let[a,l]=u.useState(!1),[c,s]=u.useState([]),[d,f]=u.useState(!0),[m,g]=u.useState(i),y=(e,t)=>{tz.debug("handle device change"),l(!1),null==n||n(e,t)},b=u.useRef(null),T=u.useRef(null);u.useLayoutEffect(()=>{a&&g(!0)},[a]),u.useLayoutEffect(()=>{let e;return b.current&&T.current&&(c||d)&&(e=function(e,t,n){return function(e,t,n,r){void 0===r&&(r={});let{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,s=X(e),u=i||o?[...s?Q(s):[],...Q(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});let d=s&&l?function(e,t){let n=null,r,i=D(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return function a(l,c){void 0===l&&(l=!1),void 0===c&&(c=1),o();let s=e.getBoundingClientRect(),{left:u,top:d,width:f,height:m}=s;if(l||t(),!f||!m)return;let g={rootMargin:-v(d)+"px "+-v(i.clientWidth-(u+f))+"px "+-v(i.clientHeight-(d+m))+"px "+-v(u)+"px",threshold:h(0,p(1,c))||1},y=!0;function b(t){let n=t[0].intersectionRatio;if(n!==c){if(!y)return a();n?a(!1,n):r=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==n||ed(s,e.getBoundingClientRect())||a(),y=!1}try{n=new IntersectionObserver(b,{...g,root:i.ownerDocument})}catch{n=new IntersectionObserver(b,g)}n.observe(e)}(!0),o}(s,n):null,f=-1,m=null;a&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===s&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),s&&!c&&m.observe(s),m.observe(t));let g,y=c?en(e):null;return c&&function t(){let r=en(e);y&&!ed(y,r)&&n(),y=r,g=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=m)||e.disconnect(),m=null,c&&cancelAnimationFrame(g)}}(e,t,()=>t_(this,null,function*(){var r,i,o;let a,l,c,{x:s,y:u}=yield(o={placement:"top",middleware:[{name:"offset",options:6,async fn(e){var t,n;let{x:r,y:i,placement:o,middlewareData:a}=e,l=await O(e,6);return o===(null==(t=a.offset)?void 0:t.placement)&&null!=(n=a.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:i+l.y,data:{...l,placement:o}}}},(void 0===r&&(r={}),{name:"flip",options:r,async fn(e){var t,n,i,o,a,l,c,s;let u,d,f,{placement:p,middlewareData:h,rects:m,initialPlacement:v,platform:g,elements:y}=e,{mainAxis:b=!0,crossAxis:T=!0,fallbackPlacements:M,fallbackStrategy:L="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:N=!0,..._}=w(r,e);if(null!=(t=h.arrow)&&t.alignmentOffset)return{};let I=E(p),D=C(v),j=E(v)===v,F=await (null==g.isRTL?void 0:g.isRTL(y.floating)),V=M||(j||!N?[R(v)]:(u=R(v),[P(v),u,P(u)])),z="none"!==O;!M&&z&&V.push(...(d=k(v),f=function(e,t,n){let r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(E(v),"start"===O,F),d&&(f=f.map(e=>e+"-"+d),N&&(f=f.concat(f.map(P)))),f));let U=[v,...V],$=await A(e,_),W=[],H=(null==(n=h.flip)?void 0:n.overflows)||[];if(b&&W.push($[I]),T){let e,t,n,r,i=(l=p,c=m,void 0===(s=F)&&(s=!1),e=k(l),n=x(t=S(C(l))),r="x"===t?e===(s?"end":"start")?"right":"left":"start"===e?"bottom":"top",c.reference[n]>c.floating[n]&&(r=R(r)),[r,R(r)]);W.push($[i[0]],$[i[1]])}if(H=[...H,{placement:p,overflows:W}],!W.every(e=>e<=0)){let e=((null==(i=h.flip)?void 0:i.index)||0)+1,t=U[e];if(t)return{data:{index:e,overflows:H},reset:{placement:t}};let n=null==(o=H.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:o.placement;if(!n)switch(L){case"bestFit":{let e=null==(a=H.filter(e=>{if(z){let t=C(e.placement);return t===D||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:a[0];e&&(n=e);break}case"initialPlacement":n=v}if(p!==n)return{reset:{placement:n}}}return{}}}),{name:"shift",options:i={padding:5},async fn(e){let{x:t,y:n,placement:r}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=w(i,e),s={x:t,y:n},u=await A(e,c),d=C(E(r)),f=S(d),m=s[f],v=s[d];if(o){let e="y"===f?"top":"left",t="y"===f?"bottom":"right",n=m+u[e],r=m-u[t];m=h(n,p(m,r))}if(a){let e="y"===d?"top":"left",t="y"===d?"bottom":"right",n=v+u[e],r=v-u[t];v=h(n,p(v,r))}let g=l.fn({...e,[f]:m,[d]:v});return{...g,data:{x:g.x-t,y:g.y-n,enabled:{[f]:o,[d]:a}}}}}]},a=new Map,c={...(l={platform:eu,...o}).platform,_c:a},L(e,t,{...l,platform:c}));null==n||n(s,u)}))}(b.current,T.current,(e,t)=>{T.current&&Object.assign(T.current.style,{left:`${e}px`,top:`${t}px`})})),f(!1),()=>{null==e||e()}},[b,T,c,d]);let M=u.useCallback(e=>{var t;T.current&&e.target!==b.current&&a&&(t=T.current,!t.contains(e.target))&&l(!1)},[a,T,b]);return u.useEffect(()=>(document.addEventListener("click",M),()=>{document.removeEventListener("click",M)}),[M]),u.createElement(u.Fragment,null,u.createElement("button",{className:"lk-button lk-button-menu","aria-pressed":a,...o,onClick:()=>l(!a),ref:b},o.children),!o.disabled&&u.createElement("div",{className:"lk-device-menu",ref:T,style:{visibility:a?"visible":"hidden"}},e?u.createElement(rn,{initialSelection:t,onActiveDeviceChange:t=>y(e,t),onDeviceListChange:s,kind:e,track:null==r?void 0:r[e],requestPermissions:m}):u.createElement(u.Fragment,null,u.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),u.createElement(rn,{kind:"audioinput",onActiveDeviceChange:e=>y("audioinput",e),onDeviceListChange:s,track:null==r?void 0:r.audioinput,requestPermissions:m}),u.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),u.createElement(rn,{kind:"videoinput",onActiveDeviceChange:e=>y("videoinput",e),onDeviceListChange:s,track:null==r?void 0:r.videoinput,requestPermissions:m}))))}let r_=u.forwardRef(function(e,t){let{mergedProps:n}=function({props:e}){let{dispatch:t,state:n}=ns().widget,r="lk-button lk-settings-toggle";return{mergedProps:u.useMemo(()=>nS(e,{className:r,onClick:()=>{t&&t({msg:"toggle_settings"})},"aria-pressed":null!=n&&n.showSettings?"true":"false"}),[e,r,t,n])}}({props:e});return u.createElement("button",{ref:t,...n},e.children)});function rI({variation:e,controls:t,saveUserChoices:n=!0,onDeviceError:r,...i}){var o;let a,[l,c]=u.useState(!1),s=nu();u.useEffect(()=>{var e,t;(null==(e=null==s?void 0:s.widget.state)?void 0:e.showChat)!==void 0&&c(null==(t=null==s?void 0:s.widget.state)?void 0:t.showChat)},[null==(o=null==s?void 0:s.widget.state)?void 0:o.showChat]);let d=!function(e){let t=e=>"u">typeof window&&window.matchMedia(e).matches,[n,r]=u.useState(t(e));function i(){r(t(e))}return u.useEffect(()=>{let t=window.matchMedia(e);return i(),t.addListener?t.addListener(i):t.addEventListener("change",i),()=>{t.removeListener?t.removeListener(i):t.removeEventListener("change",i)}},[e]),n}(`(max-width: ${l?1e3:760}px)`)?"verbose":"minimal";e??(e=d);let p={leave:!0,...t},h=(a=ny(),nA(u.useMemo(()=>{var e;return t9(e=a.localParticipant,f.ParticipantEvent.ParticipantPermissionsChanged).pipe(tp(()=>e.permissions),tx(e.permissions))},[a]),a.localParticipant.permissions));if(h){let e=e=>h.canPublish&&(0===h.canPublishSources.length||h.canPublishSources.includes((e=>{switch(e){case f.Track.Source.Camera:return 1;case f.Track.Source.Microphone:return 2;case f.Track.Source.ScreenShare:return 3;default:return 0}})(e)));p.camera??(p.camera=e(f.Track.Source.Camera)),p.microphone??(p.microphone=e(f.Track.Source.Microphone)),p.screenShare??(p.screenShare=e(f.Track.Source.ScreenShare)),p.chat??(p.chat=h.canPublishData&&(null==t?void 0:t.chat))}else p.camera=!1,p.chat=!1,p.microphone=!1,p.screenShare=!1;let m=u.useMemo(()=>"minimal"===e||"verbose"===e,[e]),v=u.useMemo(()=>"textOnly"===e||"verbose"===e,[e]),g="u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia,[y,b]=u.useState(!1),w=u.useCallback(e=>{b(e)},[b]),E=nC({className:"lk-control-bar"},i),{saveAudioInputEnabled:k,saveVideoInputEnabled:S,saveAudioInputDeviceId:x,saveVideoInputDeviceId:C}=function(e={}){let[t,n]=u.useState(function(e,t=!1){var n,r,i,o,a;let l={videoEnabled:null==(n=null==e?void 0:e.videoEnabled)||n,audioEnabled:null==(r=null==e?void 0:e.audioEnabled)||r,videoDeviceId:null!=(i=null==e?void 0:e.videoDeviceId)?i:"default",audioDeviceId:null!=(o=null==e?void 0:e.audioDeviceId)?o:"default",username:null!=(a=null==e?void 0:e.username)?a:""};if(t)return l;{let e=ni();return tN(tN({},l),e??{})}}(e.defaults,e.preventLoad??!1)),r=u.useCallback(e=>{n(t=>({...t,audioEnabled:e}))},[]),i=u.useCallback(e=>{n(t=>({...t,videoEnabled:e}))},[]),o=u.useCallback(e=>{n(t=>({...t,audioDeviceId:e}))},[]),a=u.useCallback(e=>{n(t=>({...t,videoDeviceId:e}))},[]),l=u.useCallback(e=>{n(t=>({...t,username:e}))},[]);return u.useEffect(()=>{!function(e,t=!1){!0!==t&&no(e)}(t,e.preventSave??!1)},[t,e.preventSave]),{userChoices:t,saveAudioInputEnabled:r,saveVideoInputEnabled:i,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:l}}({preventSave:!n}),P=u.useCallback((e,t)=>t?k(e):null,[k]),R=u.useCallback((e,t)=>t?S(e):null,[S]);return u.createElement("div",{...E},p.microphone&&u.createElement("div",{className:"lk-button-group"},u.createElement(ro,{source:f.Track.Source.Microphone,showIcon:m,onChange:P,onDeviceError:e=>null==r?void 0:r({source:f.Track.Source.Microphone,error:e})},v&&"Microphone"),u.createElement("div",{className:"lk-button-group-menu"},u.createElement(rN,{kind:"audioinput",onActiveDeviceChange:(e,t)=>x(t??"default")}))),p.camera&&u.createElement("div",{className:"lk-button-group"},u.createElement(ro,{source:f.Track.Source.Camera,showIcon:m,onChange:R,onDeviceError:e=>null==r?void 0:r({source:f.Track.Source.Camera,error:e})},v&&"Camera"),u.createElement("div",{className:"lk-button-group-menu"},u.createElement(rN,{kind:"videoinput",onActiveDeviceChange:(e,t)=>C(t??"default")}))),p.screenShare&&g&&u.createElement(ro,{source:f.Track.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:m,onChange:w,onDeviceError:e=>null==r?void 0:r({source:f.Track.Source.ScreenShare,error:e})},v&&(y?"Stop screen share":"Share screen")),p.chat&&u.createElement(nH,null,m&&u.createElement(nQ,null),v&&"Chat"),p.settings&&u.createElement(r_,null,m&&u.createElement(nX,null),v&&"Settings"),p.leave&&u.createElement(nZ,null,m&&u.createElement(nG,null),v&&"Leave"),u.createElement(rr,null))}function rD({chatMessageFormatter:e,chatMessageDecoder:t,chatMessageEncoder:n,SettingsComponent:r,...i}){var o,a,l;let[s,d]=u.useState({showChat:!1,unreadMessages:0,showSettings:!1}),p=u.useRef(null),h=nI([{source:f.Track.Source.Camera,withPlaceholder:!0},{source:f.Track.Source.ScreenShare,withPlaceholder:!1}],{updateOnlyOn:[f.RoomEvent.ActiveSpeakersChanged],onlySubscribed:!1}),m=function(){let[e,t]=u.useReducer(nl,tW),[n,r]=u.useReducer(na,tH);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}(),v=h.filter(tI).filter(e=>e.publication.source===f.Track.Source.ScreenShare),g=null==(l=function(e){let t=nu();if(e??(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(l=m),o=u.useMemo(()=>(null==l?void 0:l.pin.state)!==void 0&&l.pin.state.length>=1?l.pin.state:[],[l.pin.state]))?void 0:o[0],y=h.filter(e=>void 0===e||void 0===g||(tI(e)&&tI(g)?e.publication.trackSid!==g.publication.trackSid:tj(e)!==tj(g)));return u.useEffect(()=>{var e,t,n,r,i,o;if(v.some(e=>e.publication.isSubscribed)&&null===p.current?(tz.debug("Auto set screen share focus:",{newScreenShareTrack:v[0]}),null==(t=(e=m.pin).dispatch)||t.call(e,{msg:"set_pin",trackReference:v[0]}),p.current=v[0]):p.current&&!v.some(e=>{var t,n;return e.publication.trackSid===(null==(n=null==(t=p.current)?void 0:t.publication)?void 0:n.trackSid)})&&(tz.debug("Auto clearing screen share focus."),null==(r=(n=m.pin).dispatch)||r.call(n,{msg:"clear_pin"}),p.current=null),g&&!tI(g)){let e=h.find(e=>e.participant.identity===g.participant.identity&&e.source===g.source);e!==g&&tI(e)&&(null==(o=(i=m.pin).dispatch)||o.call(i,{msg:"set_pin",trackReference:e}))}},[v.map(e=>`${e.publication.trackSid}_${e.publication.isSubscribed}`).join(),null==(a=null==g?void 0:g.publication)?void 0:a.trackSid,h]),u.useEffect(()=>{!function(e){var t,n;if("u">typeof window&&"u">typeof c.default&&((null==(t=null==c.default?void 0:c.default.env)?void 0:t.NODE_ENV)==="dev"||(null==(n=null==c.default?void 0:c.default.env)?void 0:n.NODE_ENV)==="development")){let e=document.querySelector(".lk-room-container");e&&!getComputedStyle(e).getPropertyValue("--lk-has-imported-styles")&&tz.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}()},[]),u.createElement("div",{className:"lk-video-conference",...i},"u">typeof document&&u.createElement(rC,{value:m,onWidgetChange:e=>{tz.debug("updating widget state",e),d(e)}},u.createElement("div",{className:"lk-video-conference-inner"},g?u.createElement("div",{className:"lk-focus-layout-wrapper"},u.createElement(rg,null,u.createElement(rx,{tracks:y},u.createElement(rv,null)),g&&u.createElement(ry,{trackRef:g}))):u.createElement("div",{className:"lk-grid-layout-wrapper"},u.createElement(rk,{tracks:h},u.createElement(rv,null))),u.createElement(rI,{controls:{chat:!0,settings:!!r}})),u.createElement(rO,{style:{display:s.showChat?"grid":"none"},messageFormatter:e,messageEncoder:n,messageDecoder:t}),r&&u.createElement("div",{className:"lk-settings-menu-modal",style:{display:s.showSettings?"block":"none"}},u.createElement(r,null))),u.createElement(rP,null),u.createElement(rL,null))}function rj({params:e}){let[t,n]=(0,u.useState)(d.auth.currentUser),[r,i]=(0,u.useState)(null),[o,a]=(0,u.useState)(null),l=e.roomName?decodeURIComponent(e.roomName):"";return((0,u.useEffect)(()=>{let e=d.auth.onAuthStateChanged(e=>{n(e)});return()=>e()},[]),(0,u.useEffect)(()=>{t&&l&&(async()=>{try{let e=await fetch("/api/livekit-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomName:l,identity:t.uid,name:t.displayName||t.email||"Anonymous",isStreamer:!0})}),n=await e.json();if(n.error||!n.token)throw Error(n.error||"Failed to generate a valid token.");i(n.token)}catch(e){console.error("Failed to get LiveKit token:",e),a(e.message)}})()},[t,l]),o)?(0,s.jsxs)("div",{className:"w-full h-screen flex items-center justify-center bg-black text-red-400 p-4 text-center",children:["Error connecting to broadcast: ",o]}):r?(0,s.jsx)("div",{style:{height:"100vh"},children:(0,s.jsx)(nM,{video:!0,audio:!0,token:r,serverUrl:"wss://flixtrend-vobztfm3.livekit.cloud","data-lk-theme":"default",style:{height:"100%"},children:(0,s.jsx)(rD,{})})}):(0,s.jsx)("div",{className:"w-full h-screen flex items-center justify-center bg-black text-white",children:"Connecting to broadcast..."})}e.s(["default",()=>rj],35775)}]);