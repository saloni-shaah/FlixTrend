(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57389,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.i(36180);var r=e.i(98925),a=e.i(61059),l=e.i(22016);let n=(0,r.getFirestore)(a.app);function o({notification:e}){let[a,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(e.fromUserId){let t=(0,r.doc)(n,"users",e.fromUserId),s=await (0,r.getDoc)(t);s.exists()&&o(s.data())}})()},[e.fromUserId]);let{message:i,linkPath:c}=(e=>{let s,r=a?.username||e.fromUsername,l="/";switch(e.type){case"like":s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-bold",children:r})," liked your post."]}),e.postId&&(l=`/post/${e.postId}`);break;case"comment":s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-bold",children:r}),' commented: "',e.postContent,'"']}),e.postId&&(l=`/post/${e.postId}`);break;case"follow":s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-bold",children:r})," started following you."]}),e.fromUserId&&(l=`/squad/${e.fromUserId}`);break;case"missed_call":s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-bold",children:r})," tried to call you."]}),e.fromUserId&&(l=`/squad/${e.fromUserId}`);break;default:s="New notification"}return{message:s,linkPath:l}})(e),d=a?.avatar_url,f=a?.name?.charAt(0)||a?.username?.charAt(0)||"?";return(0,t.jsxs)(l.default,{href:c,className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-all cursor-pointer",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-accent-pink to-accent-green overflow-hidden flex-shrink-0 flex items-center justify-center",children:d?(0,t.jsx)("img",{src:d,alt:"avatar",className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"font-bold text-white",children:f.toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1 text-sm",children:[i,(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.createdAt?.toDate().toLocaleString()})]})]})}function i({onClose:e}){let[l,i]=(0,s.useState)([]),c=a.auth.currentUser;return(0,s.useEffect)(()=>{if(!c)return;let e=(0,r.query)((0,r.collection)(n,"users",c.uid,"notifications"),(0,r.orderBy)("createdAt","desc")),t=(0,r.onSnapshot)(e,e=>{i(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[c]),(0,t.jsxs)("div",{className:"fixed inset-y-0 right-0 z-50 w-full max-w-sm glass-card animate-slide-in-right",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-glass-border",children:[(0,t.jsx)("h3",{className:"text-xl font-headline font-bold text-brand-gold",children:"Notifications"}),(0,t.jsx)("button",{onClick:e,className:"text-accent-pink text-2xl",children:"Ã—"})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2 p-4 overflow-y-auto h-full pb-20",children:0===l.length?(0,t.jsx)("div",{className:"text-muted-foreground text-center mt-16",children:"No new notifications."}):l.map(e=>(0,t.jsx)(o,{notification:e},e.id))})]})}e.s(["default",()=>i])},21880,e=>{e.n(e.i(57389))}]);