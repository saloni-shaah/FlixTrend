(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},75254,e=>{"use strict";var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...s,width:r,height:r,stroke:e,strokeWidth:a?24*Number(i)/Number(r):i,className:n("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(c)&&{"aria-hidden":"true"},...c},[...d.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),a=(e,s)=>{let a=(0,t.forwardRef)(({className:a,...o},l)=>(0,t.createElement)(i,{ref:l,iconNode:s,className:n(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...o}));return a.displayName=r(e),a};e.s(["default",()=>a],75254)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),n=e.i(31178),s=e.i(47414),i=e.i(74008),a=e.i(21476),o=e.i(72846),l=r,d=e.i(37806);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,o.isHTMLElement)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:n,anchorX:s,root:i}){let a=(0,l.useId)(),o=(0,l.useRef)(null),f=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=(0,l.useContext)(d.MotionConfigContext),m=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=c(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():c(e[t],null)}}}}(...e),e)}(o,e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:l,right:d}=f.current;if(n||!o.current||!e||!t)return;let c="left"===s?`left: ${l}`:`right: ${d}`;o.current.dataset.motionPopId=a;let u=document.createElement("style");p&&(u.nonce=p);let m=i??document.head;return m.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${c}px !important;
            top: ${r}px !important;
          }
        `),()=>{m.contains(u)&&m.removeChild(u)}},[n]),(0,t.jsx)(u,{isPresent:n,childRef:o,sizeRef:f,children:l.cloneElement(e,{ref:m})})}let p=({children:e,initial:n,isPresent:i,onExitComplete:o,custom:l,presenceAffectsLayout:d,mode:c,anchorX:u,root:p})=>{let h=(0,s.useConstant)(m),x=(0,r.useId)(),v=!0,g=(0,r.useMemo)(()=>(v=!1,{id:x,initial:n,isPresent:i,custom:l,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;o&&o()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[i,h,o]);return d&&v&&(g={...g}),(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),r.useEffect(()=>{i||h.size||!o||o()},[i]),"popLayout"===c&&(e=(0,t.jsx)(f,{isPresent:i,anchorX:u,root:p,children:e})),(0,t.jsx)(a.PresenceContext.Provider,{value:g,children:e})};function m(){return new Map}var h=e.i(64978);let x=e=>e.key||"";function v(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:a,initial:o=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:c="sync",propagate:u=!1,anchorX:f="left",root:m})=>{let[g,w]=(0,h.usePresence)(u),y=(0,r.useMemo)(()=>v(e),[e]),b=u&&!g?[]:y.map(x),j=(0,r.useRef)(!0),E=(0,r.useRef)(y),C=(0,s.useConstant)(()=>new Map),[k,N]=(0,r.useState)(y),[P,S]=(0,r.useState)(y);(0,i.useIsomorphicLayoutEffect)(()=>{j.current=!1,E.current=y;for(let e=0;e<P.length;e++){let t=x(P[e]);b.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[P,b.length,b.join("-")]);let R=[];if(y!==k){let e=[...y];for(let t=0;t<P.length;t++){let r=P[t],n=x(r);b.includes(n)||(e.splice(t,0,r),R.push(r))}return"wait"===c&&R.length&&(e=R),S(v(e)),N(y),null}let{forceRender:T}=(0,r.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:P.map(e=>{let r=x(e),n=(!u||!!g)&&(y===P||b.includes(r));return(0,t.jsx)(p,{isPresent:n,initial:(!j.current||!!o)&&void 0,custom:a,presenceAffectsLayout:d,mode:c,root:m,onExitComplete:n?void 0:()=>{if(!C.has(r))return;C.set(r,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(T?.(),S(E.current),u&&w?.(),l&&l())},anchorX:f,children:e},r)})})};e.s(["AnimatePresence",()=>g],88653)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},78716,e=>{"use strict";let t=(0,e.i(75254).default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);e.s(["Video",()=>t],78716)},87951,e=>{"use strict";let t=(0,e.i(75254).default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);e.s(["Mic",()=>t],87951)},87246,e=>{"use strict";let t=(0,e.i(75254).default)("mic-off",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]]);e.s(["MicOff",()=>t],87246)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},57873,e=>{"use strict";e.s(["CallScreen",()=>c],57873);var t=e.i(43476),r=e.i(71645),n=e.i(87951),s=e.i(87246),i=e.i(43432),a=e.i(78716);let o=(0,e.i(75254).default)("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var l=e.i(95762),d=e.i(61059);function c({call:e}){let{pc:c,answerCall:u,handleEndCall:f}=(0,l.useAppState)(),[p,m]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),[v,g]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1),b=(0,r.useRef)(null),j=(0,r.useRef)(null),E=d.auth.currentUser,C=E?.uid===e.calleeId,k=!!e.answer;return(0,r.useEffect)(()=>((async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});m(e),b.current&&(b.current.srcObject=e);let t=new MediaStream;x(t),j.current&&(j.current.srcObject=t),c&&(e.getTracks().forEach(t=>{c.getSenders().find(e=>e.track===t)||c.addTrack(t,e)}),c.ontrack=e=>{e.streams[0].getTracks().forEach(e=>{t.addTrack(e)})})}catch(e){console.error("Error accessing media devices:",e)}})(),()=>{p&&p.getTracks().forEach(e=>e.stop())}),[c]),(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col text-white",children:[(0,t.jsx)("video",{ref:j,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),h?.getTracks().length===0&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-900",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-700 animate-pulse"}),(0,t.jsxs)("p",{className:"mt-4 animate-pulse",children:["Connecting to ",e.calleeName||"user","..."]})]}),(0,t.jsx)("video",{ref:b,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute bottom-6 right-6 w-32 h-48 object-cover rounded-lg border-2 border-accent-cyan"}),C&&!k&&(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center gap-6",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold animate-pulse",children:["Incoming Call from ",e.callerName,"..."]}),(0,t.jsxs)("div",{className:"flex gap-8",children:[(0,t.jsx)("button",{onClick:u,className:"p-4 bg-green-500 rounded-full text-white",children:(0,t.jsx)(i.Phone,{size:32})}),(0,t.jsx)("button",{onClick:f,className:"p-4 bg-red-500 rounded-full text-white",children:(0,t.jsx)(i.Phone,{size:32})})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex items-center gap-6 bg-black/50 p-4 rounded-full",children:[(0,t.jsx)("button",{onClick:()=>{p&&(p.getAudioTracks().forEach(e=>e.enabled=!e.enabled),g(!v))},className:`p-3 rounded-full ${v?"bg-red-500":"bg-gray-600"}`,children:v?(0,t.jsx)(s.MicOff,{size:24}):(0,t.jsx)(n.Mic,{size:24})}),(0,t.jsx)("button",{onClick:()=>{p&&(p.getVideoTracks().forEach(e=>e.enabled=!e.enabled),y(!w))},className:`p-3 rounded-full ${w?"bg-red-500":"bg-gray-600"}`,children:w?(0,t.jsx)(o,{size:24}):(0,t.jsx)(a.Video,{size:24})}),(0,t.jsx)("button",{onClick:f,className:"p-4 bg-red-500 rounded-full",children:(0,t.jsx)(i.Phone,{size:24})})]})]})}},45423,e=>{"use strict";let t=(0,e.i(75254).default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);e.s(["Bell",()=>t],45423)},95762,e=>{"use strict";e.s(["AppStateProvider",()=>h,"useAppState",()=>x]);var t=e.i(43476),r=e.i(71645);e.i(36180);var n=e.i(98925),s=e.i(61059),i=e.i(57873),a=e.i(45423),o=e.i(37727),l=e.i(46932),d=e.i(88653);let c=(0,n.getFirestore)(s.app);function u({onEnable:e,onDismiss:r}){return(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-4 right-4 z-50 bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-4 max-w-sm w-full",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"bg-accent-cyan/20 text-accent-cyan p-2 rounded-full",children:(0,t.jsx)(a.Bell,{size:24})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-bold text-white",children:"Enable Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"Stay updated with the latest activity and never miss a call. Allow us to send you notifications."}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)("button",{onClick:e,className:"flex-1 btn-glass bg-accent-cyan text-black text-sm",children:"Enable"}),(0,t.jsx)("button",{onClick:r,className:"flex-1 btn-glass text-sm",children:"Not Now"})]})]}),(0,t.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white",children:(0,t.jsx)(o.X,{size:18})})]})})}let f=(0,r.createContext)(void 0),p={iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10};async function m(e){if(!e)return;let t=(0,n.doc)(c,"calls",e);try{if(!(await (0,n.getDoc)(t)).exists())return;let e=(0,n.writeBatch)(c),r=(0,n.collection)(t,"offerCandidates"),s=(0,n.collection)(t,"answerCandidates");(await (0,n.getDocs)(r)).forEach(t=>e.delete(t.ref)),(await (0,n.getDocs)(s)).forEach(t=>e.delete(t.ref)),e.delete(t),await e.commit()}catch(t){console.error(`Error cleaning up call ${e}:`,t)}}function h({children:a}){let[o,l]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[v,g]=(0,r.useState)(null),[w,y]=(0,r.useState)(null),[b,j]=(0,r.useState)(null),[E,C]=(0,r.useState)([]),[k,N]=(0,r.useState)(-1),[P,S]=(0,r.useState)(!1),R=(0,r.useRef)(null),[T,L]=(0,r.useState)(null),[M,A]=(0,r.useState)({}),[D,I]=(0,r.useState)(!1),[F,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let t,r=null,i=null,a=null,o=s.auth.onAuthStateChanged(s=>{if(r&&r(),i&&i(),t&&t(),s){let o=(0,n.doc)(c,"users",s.uid);e.A(39931).then(async e=>{let r=async()=>{z(!1),await e.requestNotificationPermission(s.uid)};if("Notification"in window){let t=Notification.permission,i=await (0,n.getDoc)(o),a=i.exists()&&!!i.data()?.fcmToken;"granted"!==t||a?"default"===t&&(z(!0),window.handleNotificationPermissionRequest=r):await e.requestNotificationPermission(s.uid)}t=e.onForegroundMessage(async e=>{console.log("FCM message received in foreground:",e);let{type:t,callId:r}=e.data||{};"incoming_call"===t&&r&&await (0,n.updateDoc)(o,{currentCallId:r})})}).catch(e=>console.error("Failed to load messaging module",e)),(e=>{if(!e)return;let t=(0,n.doc)(c,"users",e.uid),r={status:"online",lastSeen:(0,n.serverTimestamp)()},s={status:"offline",lastSeen:(0,n.serverTimestamp)()};(0,n.setDoc)(t,r,{merge:!0});let i=()=>{"hidden"===document.visibilityState?(0,n.setDoc)(t,s,{merge:!0}):(0,n.setDoc)(t,r,{merge:!0})};return window.addEventListener("visibilitychange",i),window.addEventListener("beforeunload",()=>(0,n.setDoc)(t,s,{merge:!0})),()=>{window.removeEventListener("visibilitychange",i)}})(s),r=(0,n.onSnapshot)(o,e=>{let t=e.data(),r=t?.currentCallId;if(i&&i(),a&&a.close(),r){y(a=new RTCPeerConnection(p));let e=(0,n.doc)(c,"calls",r);i=(0,n.onSnapshot)(e,e=>{e.exists()?g({id:e.id,...e.data()}):U()})}else U()})}else U()});return()=>{o(),r&&r(),i&&i(),t&&t(),w&&w.close(),delete window.handleNotificationPermissionRequest}},[]);let O=async()=>{if(!w||!v)return;let e=(0,n.doc)(c,"calls",v.id),t=(0,n.collection)(e,"answerCandidates"),r=(0,n.collection)(e,"offerCandidates");w.onicecandidate=e=>{e.candidate&&(0,n.addDoc)(t,e.candidate.toJSON())};let s=(await (0,n.getDoc)(e)).data();s?.offer&&await w.setRemoteDescription(new RTCSessionDescription(s.offer));let i=await w.createAnswer();await w.setLocalDescription(i),await (0,n.updateDoc)(e,{answer:{type:i.type,sdp:i.sdp}}),(0,n.onSnapshot)(r,e=>{e.docChanges().forEach(e=>{"added"===e.type&&w.addIceCandidate(new RTCIceCandidate(e.doc.data()))})})},_=async()=>{if(!v)return;let e=s.auth.currentUser;if(!e)return;let t=v.id;U();let r=(0,n.doc)(c,"users",e.uid);await (0,n.updateDoc)(r,{currentCallId:(0,n.deleteField)()});let i=e.uid===v.callerId?v.calleeId:v.callerId;if(i){let e=(0,n.doc)(c,"users",i);(await (0,n.getDoc)(e)).exists()&&await (0,n.updateDoc)(e,{currentCallId:(0,n.deleteField)()})}await m(t)};(0,r.useEffect)(()=>()=>{R.current&&(R.current.pause(),R.current=null)},[]);let $=e=>{R.current&&R.current.pause();let t=new Audio(e.audioUrl);R.current=t,t.play(),t.addEventListener("play",()=>S(!0)),t.addEventListener("pause",()=>S(!1)),t.addEventListener("ended",H),j(e),S(!0)},V=()=>{R.current&&R.current.pause()},H=()=>{if(0===E.length)return;let e=(k+1)%E.length;N(e),$(E[e])},U=()=>{w&&w.close(),y(null),g(null)},W={isCalling:o,setIsCalling:l,callTarget:h,setCallTarget:x,activeCall:v,answerCall:O,handleEndCall:_,closeCall:U,pc:w,activeSong:b,isPlaying:P,playSong:(e,t=[],r=-1)=>{$(e),C(t),N(r)},pauseSong:V,toggleSong:()=>{P?V():R.current&&R.current.play()},playNext:H,playPrevious:()=>{if(0===E.length)return;let e=(k-1+E.length)%E.length;N(e),$(E[e])},audioPlayer:R.current,selectedChat:T,setSelectedChat:L,drafts:M,setDraft:(e,t)=>{A(r=>({...r,[e]:t}))},isScopeVideoPlaying:D,setIsScopeVideoPlaying:I};return(0,t.jsxs)(f.Provider,{value:W,children:[a,v&&(0,t.jsx)(i.CallScreen,{call:v}),(0,t.jsx)(d.AnimatePresence,{children:F&&(0,t.jsx)(u,{onEnable:()=>{window.handleNotificationPermissionRequest&&window.handleNotificationPermissionRequest()},onDismiss:()=>{z(!1)}})})]})}function x(){let e=(0,r.useContext)(f);if(void 0===e)throw Error("useAppState must be used within an AppStateProvider");return e}},59411,e=>{"use strict";var t=e.i(71645),r=e.i(48425),n=e.i(43476),s=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),i=t.forwardRef((e,t)=>(0,n.jsx)(r.Primitive.span,{...e,ref:t,style:{...s,...e.style}}));i.displayName="VisuallyHidden",e.s(["Root",()=>i,"VisuallyHidden",()=>i])},25913,e=>{"use strict";var t=e.i(7670);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=t.clsx;e.s(["cva",0,(e,t)=>s=>{var i;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(e=>{let t=null==s?void 0:s[e],n=null==o?void 0:o[e];if(null===t)return null;let i=r(t)||r(n);return a[e][i]}),d=s&&Object.entries(s).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return n(e,l,null==t||null==(i=t.compoundVariants)?void 0:i.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...o,...d}[t]):({...o,...d})[t]===r})?[...e,r,n]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}])},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let n=e.r(32061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return o}});let n=e.r(43476),s=e.r(74080),i=e.r(63599),a=e.r(9885);function o({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}return 0===r.length?null:(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,a.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},7779,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let n=e.r(43476),s=e.r(71645),i=e.r(67585),a=e.r(52157);function o(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...l,...e},r=(0,s.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,c=l?s.Suspense:s.Fragment,u=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(a.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(c,{...l?{fallback:o}:{},children:u})}return c.displayName="LoadableComponent",c}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let n=e.r(55682)._(e.r(7779));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,n.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},44636,e=>{"use strict";var t=e.i(43476),r=e.i(18566),n=e.i(95762),s=e.i(86311),i=e.i(71689),a=e.i(46932),o=e.i(71645);e.i(36180);var l=e.i(98925),d=e.i(61059);let c=(0,l.getFirestore)(d.app),u=({className:e})=>(0,t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{d:"M3 8L12 3L21 8V19C21 19.5523 20.5523 20 20 20H4C3.44772 20 3 19.5523 3 19V8Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M8 20V14H16V20",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M12 11L12 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})}),f=({className:e})=>(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[(0,t.jsx)("path",{d:"M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M20.59 22C20.59 18.13 16.74 15 12 15C7.26 15 3.41 18.13 3.41 22",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),p=({className:e})=>(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"scopeGradient",x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"var(--accent-pink)"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"var(--accent-cyan)"})]})}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"url(#scopeGradient)",className:"group-hover:opacity-80 transition-opacity",children:(0,t.jsx)("animate",{attributeName:"opacity",values:"0.7;1;0.7",dur:"2s",repeatCount:"indefinite"})}),(0,t.jsx)("path",{d:"M9.5 16V8L16.5 12L9.5 16Z",fill:"white"})]});function m({href:e,icon:n,label:s,notificationCount:i}){let o=(0,r.usePathname)(),l=(0,r.useRouter)(),d=o===e||"/squad"===e&&o.startsWith("/squad/");return(0,t.jsxs)("a",{href:e,onClick:t=>{t.preventDefault(),l.push(e)},className:"relative flex flex-col items-center gap-1 px-2 py-1 text-muted-foreground hover:text-foreground transition-colors group",children:[(0,t.jsx)(n,{className:`${d?"text-brand-gold":""}`}),(0,t.jsx)("span",{className:`text-xs font-semibold ${d?"text-foreground":""}`,children:s}),d&&(0,t.jsx)(a.motion.div,{className:"h-[2px] w-full bg-brand-gold rounded-full mt-1",layoutId:"nav-underline"}),i&&i>0&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-accent-pink rounded-full flex items-center justify-center text-white text-[10px] font-bold",children:i>9?"9+":i})]})}function h(){let a=(0,r.usePathname)(),{activeCall:h,selectedChat:x,setSelectedChat:v,isScopeVideoPlaying:g}=(0,n.useAppState)(),[w,y]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),[E,C]=(0,o.useState)(!1);(0,o.useEffect)(()=>{y(!0);let e=()=>j(window.innerWidth<768);e(),window.addEventListener("resize",e);let t=()=>C(!1),r=()=>C(!0);return window.addEventListener("online",t),window.addEventListener("offline",r),"undefined"==typeof navigator||navigator.onLine||r(),()=>{window.removeEventListener("resize",e),window.removeEventListener("online",t),window.removeEventListener("offline",r)}},[]);let[k,N]=(0,o.useState)(0),[P,S]=(0,o.useState)(!1),R=d.auth.currentUser;(0,o.useEffect)(()=>{R&&e.A(39931).then(e=>{e.requestNotificationPermission(R.uid)}).catch(e=>{console.error("Failed to load firebaseMessaging",e)})},[R]),(0,o.useEffect)(()=>{if(!R||E)return void N(0)},[R,E]),(0,o.useEffect)(()=>{if(!R||E)return void S(!1);let e=(0,l.query)((0,l.collection)(c,"users",R.uid,"notifications"),(0,l.where)("read","==",!1)),t=(0,l.onSnapshot)(e,e=>{S(!e.empty)});return()=>t()},[R,E]);let T="/login"===a||"/signup"===a||"/"===a,L="/guest"===a||"/about"===a,M=a.startsWith("/scope")&&g;if(!w||T||L||h||M)return null;let A=b&&a.startsWith("/signal/")&&x;return(0,t.jsxs)(t.Fragment,{children:[E&&(0,t.jsx)("div",{className:"fixed bottom-0 left-0 w-full z-50 bg-yellow-500/90 backdrop-blur-md text-black font-bold p-2 text-center text-sm",children:"You are offline. Some features may be limited."}),(0,t.jsx)("nav",{className:`fixed left-0 w-full z-40 bg-background/50 backdrop-blur-lg border-t border-glass-border flex justify-around items-center py-2 transition-all ${E?"bottom-8":"bottom-0"}`,children:A?(0,t.jsxs)("button",{onClick:()=>{v(null),router.back()},className:"flex flex-col items-center gap-1 px-2 py-1 text-foreground",children:[(0,t.jsx)(i.ArrowLeft,{}),(0,t.jsx)("span",{className:"text-xs font-semibold",children:"Back"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{href:"/home",icon:u,label:"VibeSpace"}),(0,t.jsx)(m,{href:"/scope",icon:p,label:"Scope"}),(0,t.jsx)(m,{href:"/squad",icon:f,label:"Squad"}),(0,t.jsx)(m,{href:"/signal",icon:s.MessageSquare,label:"Signal",notificationCount:k>0?k:void 0})]})})]})}var x=e.i(31343),v=e.i(95242),g=e.i(75254);let w=(0,g.default)("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),y=(0,g.default)("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]);function b(){let{activeSong:e,isPlaying:r,toggleSong:s,playNext:i,playPrevious:o}=(0,n.useAppState)();return e?(0,t.jsx)(a.motion.div,{initial:{y:100},animate:{y:0},exit:{y:100},transition:{type:"spring",stiffness:300,damping:30},className:"fixed bottom-20 md:bottom-4 left-4 right-4 md:left-auto md:max-w-md z-50",children:(0,t.jsxs)("div",{className:"glass-card p-3 flex items-center gap-4",children:[(0,t.jsx)("img",{src:e.albumArtUrl,alt:e.title,className:"w-14 h-14 rounded-lg object-cover"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"font-bold text-accent-cyan truncate",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-400 truncate",children:e.artist})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:o,className:"p-2 text-gray-300 hover:text-white transition-colors",children:(0,t.jsx)(w,{size:20})}),(0,t.jsx)("button",{onClick:s,className:"p-3 rounded-full bg-accent-cyan text-black shadow-lg hover:scale-110 transition-transform",children:r?(0,t.jsx)(v.Pause,{size:20}):(0,t.jsx)(x.Play,{size:20})}),(0,t.jsx)("button",{onClick:i,className:"p-2 text-gray-300 hover:text-white transition-colors",children:(0,t.jsx)(y,{size:20})})]})]})}):null}var j=e.i(57094),E=e.i(74911);function C(){let{toast:e}=(0,E.useToast)();return(0,o.useEffect)(()=>{let r=r=>{console.error("Caught Firestore Permission Error:",r),e({variant:"destructive",title:"Firestore Security Rule Denied",description:(0,t.jsx)("pre",{className:"mt-2 w-full rounded-md bg-slate-950 p-4",children:(0,t.jsx)("code",{className:"text-white whitespace-pre-wrap",children:r.message})}),duration:2e4})};return j.errorEmitter.on("permission-error",r),()=>{j.errorEmitter.off("permission-error",r)}},[e]),null}var k=e.i(74080),N=e.i(81140),P=e.i(20783),S=e.i(75830),R=e.i(30030),T=e.i(26330),L=e.i(74606),M=e.i(96626),A=e.i(48425),D=e.i(30207),I=e.i(69340),F=e.i(34620),z=e.i(59411),O="ToastProvider",[_,$,V]=(0,S.createCollection)("Toast"),[H,U]=(0,R.createContextScope)("Toast",[V]),[W,q]=H(O),B=e=>{let{__scopeToast:r,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:l}=e,[d,c]=o.useState(null),[u,f]=o.useState(0),p=o.useRef(!1),m=o.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${O}\`. Expected non-empty \`string\`.`),(0,t.jsx)(_.Provider,{scope:r,children:(0,t.jsx)(W,{scope:r,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:u,viewport:d,onViewportChange:c,onToastAdd:o.useCallback(()=>f(e=>e+1),[]),onToastRemove:o.useCallback(()=>f(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:m,children:l})})};B.displayName=O;var K="ToastViewport",X=["F8"],G="toast.viewportPause",Z="toast.viewportResume",Y=o.forwardRef((e,r)=>{let{__scopeToast:n,hotkey:s=X,label:i="Notifications ({hotkey})",...a}=e,l=q(K,n),d=$(n),c=o.useRef(null),u=o.useRef(null),f=o.useRef(null),p=o.useRef(null),m=(0,P.useComposedRefs)(r,p,l.onViewportChange),h=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=l.toastCount>0;o.useEffect(()=>{let e=e=>{0!==s.length&&s.every(t=>e[t]||e.code===t)&&p.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),o.useEffect(()=>{let e=c.current,t=p.current;if(x&&e&&t){let r=()=>{if(!l.isClosePausedRef.current){let e=new CustomEvent(G);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},n=()=>{if(l.isClosePausedRef.current){let e=new CustomEvent(Z);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},s=t=>{e.contains(t.relatedTarget)||n()},i=()=>{e.contains(document.activeElement)||n()};return e.addEventListener("focusin",r),e.addEventListener("focusout",s),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",i),window.addEventListener("blur",r),window.addEventListener("focus",n),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",s),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",r),window.removeEventListener("focus",n)}}},[x,l.isClosePausedRef]);let v=o.useCallback(({tabbingDirection:e})=>{let t=d().map(t=>{let r=t.ref.current,n=[r,...function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}(r)];return"forwards"===e?n:n.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return o.useEffect(()=>{let e=p.current;if(e){let t=t=>{let r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){let r=document.activeElement,n=t.shiftKey;if(t.target===e&&n)return void u.current?.focus();let s=v({tabbingDirection:n?"backwards":"forwards"}),i=s.findIndex(e=>e===r);eh(s.slice(i+1))?t.preventDefault():n?u.current?.focus():f.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,v]),(0,t.jsxs)(T.Branch,{ref:c,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&(0,t.jsx)(Q,{ref:u,onFocusFromOutsideViewport:()=>{eh(v({tabbingDirection:"forwards"}))}}),(0,t.jsx)(_.Slot,{scope:n,children:(0,t.jsx)(A.Primitive.ol,{tabIndex:-1,...a,ref:m})}),x&&(0,t.jsx)(Q,{ref:f,onFocusFromOutsideViewport:()=>{eh(v({tabbingDirection:"backwards"}))}})]})});Y.displayName=K;var J="ToastFocusProxy",Q=o.forwardRef((e,r)=>{let{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=q(J,n);return(0,t.jsx)(z.VisuallyHidden,{tabIndex:0,...i,ref:r,style:{position:"fixed"},onFocus:e=>{let t=e.relatedTarget;a.viewport?.contains(t)||s()}})});Q.displayName=J;var ee="Toast",et=o.forwardRef((e,r)=>{let{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l,d]=(0,I.useControllableState)({prop:s,defaultProp:i??!0,onChange:a,caller:ee});return(0,t.jsx)(M.Presence,{present:n||l,children:(0,t.jsx)(es,{open:l,...o,ref:r,onClose:()=>d(!1),onPause:(0,D.useCallbackRef)(e.onPause),onResume:(0,D.useCallbackRef)(e.onResume),onSwipeStart:(0,N.composeEventHandlers)(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,N.composeEventHandlers)(e.onSwipeMove,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:(0,N.composeEventHandlers)(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,N.composeEventHandlers)(e.onSwipeEnd,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),d(!1)})})})});et.displayName=ee;var[er,en]=H(ee,{onClose(){}}),es=o.forwardRef((e,r)=>{let{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:l,onEscapeKeyDown:d,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:p,onSwipeCancel:m,onSwipeEnd:h,...x}=e,v=q(ee,n),[g,w]=o.useState(null),y=(0,P.useComposedRefs)(r,e=>w(e)),b=o.useRef(null),j=o.useRef(null),E=i||v.duration,C=o.useRef(0),S=o.useRef(E),R=o.useRef(0),{onToastAdd:L,onToastRemove:M}=v,I=(0,D.useCallbackRef)(()=>{g?.contains(document.activeElement)&&v.viewport?.focus(),l()}),F=o.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(R.current),C.current=new Date().getTime(),R.current=window.setTimeout(I,e))},[I]);o.useEffect(()=>{let e=v.viewport;if(e){let t=()=>{F(S.current),u?.()},r=()=>{let e=new Date().getTime()-C.current;S.current=S.current-e,window.clearTimeout(R.current),c?.()};return e.addEventListener(G,r),e.addEventListener(Z,t),()=>{e.removeEventListener(G,r),e.removeEventListener(Z,t)}}},[v.viewport,E,c,u,F]),o.useEffect(()=>{a&&!v.isClosePausedRef.current&&F(E)},[a,E,v.isClosePausedRef,F]),o.useEffect(()=>(L(),()=>M()),[L,M]);let z=o.useMemo(()=>g?function e(t){let r=[];return Array.from(t.childNodes).forEach(t=>{var n;if(t.nodeType===t.TEXT_NODE&&t.textContent&&r.push(t.textContent),(n=t).nodeType===n.ELEMENT_NODE){let n=t.ariaHidden||t.hidden||"none"===t.style.display,s=""===t.dataset.radixToastAnnounceExclude;if(!n)if(s){let e=t.dataset.radixToastAnnounceAlt;e&&r.push(e)}else r.push(...e(t))}}),r}(g):null,[g]);return v.viewport?(0,t.jsxs)(t.Fragment,{children:[z&&(0,t.jsx)(ei,{__scopeToast:n,role:"status","aria-live":"foreground"===s?"assertive":"polite",children:z}),(0,t.jsx)(er,{scope:n,onClose:I,children:k.createPortal((0,t.jsx)(_.ItemSlot,{scope:n,children:(0,t.jsx)(T.Root,{asChild:!0,onEscapeKeyDown:(0,N.composeEventHandlers)(d,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,t.jsx)(A.Primitive.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:(0,N.composeEventHandlers)(e.onKeyDown,e=>{"Escape"===e.key&&(d?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:(0,N.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})}),onPointerMove:(0,N.composeEventHandlers)(e.onPointerMove,e=>{if(!b.current)return;let t=e.clientX-b.current.x,r=e.clientY-b.current.y,n=!!j.current,s=["left","right"].includes(v.swipeDirection),i=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,a=s?i(0,t):0,o=s?0:i(0,r),l="touch"===e.pointerType?10:2,d={x:a,y:o},c={originalEvent:e,delta:d};n?(j.current=d,ep("toast.swipeMove",p,c,{discrete:!1})):em(d,v.swipeDirection,l)?(j.current=d,ep("toast.swipeStart",f,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(b.current=null)}),onPointerUp:(0,N.composeEventHandlers)(e.onPointerUp,e=>{let t=j.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),j.current=null,b.current=null,t){let r=e.currentTarget,n={originalEvent:e,delta:t};em(t,v.swipeDirection,v.swipeThreshold)?ep("toast.swipeEnd",h,n,{discrete:!0}):ep("toast.swipeCancel",m,n,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),ei=e=>{let{__scopeToast:r,children:n,...s}=e,i=q(ee,r),[a,l]=o.useState(!1),[d,c]=o.useState(!1);return function(e=()=>{}){let t=(0,D.useCallbackRef)(e);(0,F.useLayoutEffect)(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>l(!0)),o.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),d?null:(0,t.jsx)(L.Portal,{asChild:!0,children:(0,t.jsx)(z.VisuallyHidden,{...s,children:a&&(0,t.jsxs)(t.Fragment,{children:[i.label," ",n]})})})},ea=o.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e;return(0,t.jsx)(A.Primitive.div,{...s,ref:r})});ea.displayName="ToastTitle";var eo=o.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e;return(0,t.jsx)(A.Primitive.div,{...s,ref:r})});eo.displayName="ToastDescription";var el="ToastAction",ed=o.forwardRef((e,r)=>{let{altText:n,...s}=e;return n.trim()?(0,t.jsx)(ef,{altText:n,asChild:!0,children:(0,t.jsx)(eu,{...s,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${el}\`. Expected non-empty \`string\`.`),null)});ed.displayName=el;var ec="ToastClose",eu=o.forwardRef((e,r)=>{let{__scopeToast:n,...s}=e,i=en(ec,n);return(0,t.jsx)(ef,{asChild:!0,children:(0,t.jsx)(A.Primitive.button,{type:"button",...s,ref:r,onClick:(0,N.composeEventHandlers)(e.onClick,i.onClose)})})});eu.displayName=ec;var ef=o.forwardRef((e,r)=>{let{__scopeToast:n,altText:s,...i}=e;return(0,t.jsx)(A.Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:r})});function ep(e,t,r,{discrete:n}){let s=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?(0,A.dispatchDiscreteCustomEvent)(s,i):s.dispatchEvent(i)}var em=(e,t,r=0)=>{let n=Math.abs(e.x),s=Math.abs(e.y),i=n>s;return"left"===t||"right"===t?i&&n>r:!i&&s>r};function eh(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var ex=e.i(25913),ev=e.i(37727),eg=e.i(75157);let ew=o.forwardRef(({className:e,...r},n)=>(0,t.jsx)(Y,{ref:n,className:(0,eg.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));ew.displayName=Y.displayName;let ey=(0,ex.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eb=o.forwardRef(({className:e,variant:r,...n},s)=>(0,t.jsx)(et,{ref:s,className:(0,eg.cn)(ey({variant:r}),e),...n}));eb.displayName=et.displayName,o.forwardRef(({className:e,...r},n)=>(0,t.jsx)(ed,{ref:n,className:(0,eg.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...r})).displayName=ed.displayName;let ej=o.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eu,{ref:n,className:(0,eg.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:(0,t.jsx)(ev.X,{className:"h-4 w-4"})}));ej.displayName=eu.displayName;let eE=o.forwardRef(({className:e,...r},n)=>(0,t.jsx)(ea,{ref:n,className:(0,eg.cn)("text-sm font-semibold",e),...r}));eE.displayName=ea.displayName;let eC=o.forwardRef(({className:e,...r},n)=>(0,t.jsx)(eo,{ref:n,className:(0,eg.cn)("text-sm opacity-90",e),...r}));function ek(){let{toasts:e}=(0,E.useToast)();return(0,t.jsxs)(B,{children:[e.map(function({id:e,title:r,description:n,action:s,...i}){return(0,t.jsxs)(eb,{...i,children:[(0,t.jsxs)("div",{className:"grid gap-1",children:[r&&(0,t.jsx)(eE,{children:r}),n&&(0,t.jsx)(eC,{children:n})]}),s,(0,t.jsx)(ej,{})]},e)}),(0,t.jsx)(ew,{})]})}eC.displayName=eo.displayName;let eN=(0,e.i(70703).default)(()=>e.A(74980).then(e=>e.AppStateProvider),{loadableGenerated:{modules:[16122]},ssr:!1});function eP({children:e}){return(0,t.jsxs)(eN,{children:[(0,t.jsx)(C,{}),(0,t.jsx)(ek,{}),(0,t.jsx)("main",{className:"pb-20 pt-6 px-4",children:e}),(0,t.jsx)(b,{}),(0,t.jsx)(h,{})]})}e.s(["Providers",()=>eP],44636)},39931,e=>{e.v(t=>Promise.all(["static/chunks/5e8445bf0ef060ca.js"].map(t=>e.l(t))).then(()=>t(60146)))},74980,e=>{e.v(t=>Promise.all(["static/chunks/86a8ee6c3a9c1b85.js"].map(t=>e.l(t))).then(()=>t(16122)))}]);